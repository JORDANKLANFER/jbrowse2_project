"use strict";var JBrowsePluginMsaView=(()=>{var wP=Object.create;var qa=Object.defineProperty;var SP=Object.getOwnPropertyDescriptor;var xP=Object.getOwnPropertyNames;var EP=Object.getPrototypeOf,OP=Object.prototype.hasOwnProperty;var C=(e,t)=>()=>(e&&(t=e(e=0)),t);var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dt=(e,t)=>{for(var r in t)qa(e,r,{get:t[r],enumerable:!0})},tv=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of xP(t))!OP.call(e,i)&&i!==r&&qa(e,i,{get:()=>t[i],enumerable:!(n=SP(t,i))||n.enumerable});return e};var x=(e,t,r)=>(r=e!=null?wP(EP(e)):{},tv(t||!e||!e.__esModule?qa(r,"default",{value:e,enumerable:!0}):r,e)),MP=e=>tv(qa({},"__esModule",{value:!0}),e);var nv=g((ZZ,rv)=>{rv.exports=JBrowseExports["@jbrowse/core/Plugin"]});var Me=g((KZ,iv)=>{iv.exports=JBrowseExports["@jbrowse/core/util"]});var G=g((JZ,Yi)=>{function AP(e){return e&&e.__esModule?e:{default:e}}Yi.exports=AP,Yi.exports.__esModule=!0,Yi.exports.default=Yi.exports});var av=g((QZ,ov)=>{ov.exports=JBrowseExports["@mui/material/utils"]});var ne=g(Rf=>{"use strict";"use client";Object.defineProperty(Rf,"__esModule",{value:!0});Object.defineProperty(Rf,"default",{enumerable:!0,get:function(){return PP.createSvgIcon}});var PP=av()});var ie=g((tK,uv)=>{uv.exports=JBrowseExports["react/jsx-runtime"]});var sv=g(Ta=>{"use strict";"use client";var qP=G();Object.defineProperty(Ta,"__esModule",{value:!0});Ta.default=void 0;var TP=qP(ne()),kP=ie(),rK=Ta.default=(0,TP.default)((0,kP.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn")});var R=g((oK,cv)=>{cv.exports=JBrowseExports.react});var dv=g((aK,fv)=>{fv.exports=JBrowseExports["@jbrowse/core/pluggableElementTypes/ViewType"]});var Ge=g((uK,pv)=>{pv.exports=JBrowseExports["mobx-state-tree"]});var tr=g((sK,hv)=>{hv.exports=JBrowseExports.mobx});var D=g((lK,mv)=>{mv.exports=JBrowseExports["mobx-react"]});var B=g((cK,vv)=>{vv.exports=JBrowseExports["@mui/material"]});function IP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var rt,jP,Ff,ka,_v=C(()=>{"use client";rt=x(R()),jP=(0,rt.createContext)(null),Ff={didCatch:!1,error:null},ka=class extends rt.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ff}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:o,reason:"imperative-api"}),this.setState(Ff)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&IP(t.resetKeys,i)){var o,a;(o=(a=this.props).onReset)===null||o===void 0||o.call(a,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(Ff)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:o,error:a}=this.state,u=t;if(o){let d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")u=r(d);else if(n)u=(0,rt.createElement)(n,d);else if(i===null||(0,rt.isValidElement)(i))u=i;else throw a}return(0,rt.createElement)(jP.Provider,{value:{didCatch:o,error:a,resetErrorBoundary:this.resetErrorBoundary}},u)}}});var Ae=g((dK,bv)=>{bv.exports=JBrowseExports["@jbrowse/core/ui"]});async function Ca(e,t,r){e.setError(void 0),t&&e.setMSAFilehandle(t),r&&e.setTreeFilehandle(r)}var Lf=C(()=>{});var gv,yv,wv,Sv=C(()=>{gv=`CLUSTAL O(1.2.3) multiple sequence alignment

hiv2_a_env           ------------MSG--KIQLLVAFLLTSACLIYCTKYVTVFYGVPVWKNASIPLFCATKN-------RDTWGTIQCLPDNDDYQEIPL-NVTEAFDAWDNIVTEQAVEDVWNLFETSIKPCVKLTPLCVTMNCNASTES---------AVATTSPSGPDMINDTDPCIQLNNCSGLREEDMVECQFNMTGLELDKKKQYSETWYSKDVVCESDNST----DRKRCYMNHCNTSVITESCDKHYWDAMRFRYCAPPGFVLLRCNDTNYSGFEPNCSKVVASTCTRMMETQPSTWLGFNGTRAENRTYIYWHGR-DNRTIISLNKYYNLTILCRRPENKTVVPITLMSGRRFHSQKIINKKPRQAWCRF-KGEWREAMQEVKQTLVKHPRYKGTNDTNK--INFTAPEKDSDPEVAYMWTNCRGEFLYCNMTWFLN------WVENKTG---Q-QHNYVPCHIEQIINTWHKVGKNVYLPPREGELSCESTVTSIIANIDVDGDN---RTNITFSAEVAELYRLELGDYKLVEVTPIGFAPTAEKRYSSAPGRHKRGVLVLGFLGFLTTAGAAMGAASLTLSAQSRTLFRGIVQQQQQLLDVVKRQQEMLRLTVWGTKNLQARVTAIEKYLADQARLNSWGCAFRQVCHTTVPWV----NDTLTPEWNNMTWQEWEHKIRFLEANISESLEQAQIQQEKNMYELQKLNSWDVFGNWFDLTSWIKYIQYGVMIVVGIVALRIVIYVVQMLSRLRKGYRPVFSSPPGYIQQIHIHKDWEQPDREETEEDVGNDVGSRSWPWPIEYIHFLIRLLIRLLTRLYNSCRDLLSRLYLILQPLR-----------DWLRLKAAYLQYGCEWIQEAFQALARVTRETLTSAGRSLWGALGRIGRGILAVPRRIRQGAEIALL
hiv2_b_env           -----------MAYF--SSRLPIALLLIGISGFVCKQYVTVFYGIPAWRNATVPLICATTN-------RDTWGTVQCLPDNGDYTEIRL-NITEAFDAWDNTVTQQAVDDVWRLFETSIKPCVKLTPLCVAMNCSKTETNPGNASSTTTTKPTTTSRGLKTINETDPCIKNDSCTGLGEEEIMQCNFSMTGLRRDELKQYKDTWYSEDLECNNTR-K----YTSRCYIRTCNTTIIQESCDKHYWDSLRFRYCAPPGFFLLRCNDTNYSGFMPNCSKVVASSCTRMMETQSSTWFGFNGTRAENRTYIYWHEK-DNRTIISLNTYYNLSIHCKRPGNKTVVPIRTVSGLLFHSQP-INKRPRQAWCWF-KGNWTEAIKEVKRTIIKHPRYKGGAKNITSVKLVSEHGKGSDPETTYMWTNCRGEFLYCNMTWFLN------WVENKTN---TTRRNYAPCHIRQIINTWHKVGKNIYLPPREGELSCNSTVTSLIANINSDN-S---TTNISVSAEVSELYRLELGDYKLVEITPIGFAPTDVRRYSSVKPRNKRGVMVLGFLGFLAMAGSAMGATSLTLSAQSRTLLAGIVQQQQQPVDVVKRQQELLRLTVWGTKNLQARVTAIEKYLKDQAQLNSWGCAFRQVCHTTVPWP----NETLTPNWNNMTWQQWEKQVHFLDANITALLEEAQIQQEKNMYELQKINSWDVFGNWFDLTSWIKYIHLGLYIVAGLVVLRIVVYIVQMLARLRKGYRPVFSSPPSYTQQIPIRKDRGQPANEETEEGGGNDGDYRSWPWQIEYIHFLLRQLRNLLIWLYNGCRTLLLKTFQILHQIS--------TNLQPLRLPVAYLQYGISWFQEALRAAARATGETLASAGETLWEALRRAARAIIAIPRRIRQGLELTLL
siv_cpz_env          MKAMETQRNCRTLSLKEIILCTLVLGIIGIIKCEDNMWVTVYYGVPVWREADTTLFCASDAKAQNPEVHNVWASQACVSTNPNPEEIELTNVTEYFNAWENNMVEQMHEDIVNLWDQSVKPCVKLIPLCVTLNCSLFKCIKENGNTTNCTVQIST--GNDS---------TANNITVGTIDMYNCSFNATTELRDRKKQVYSLFYRQDLEPLEGNKPPEGDKNALYRLYNCNTTAMTQACSKVSLEPIPIHYCAPAGFALLKCNDKNFTGIGQ-CKNVSTVHCTHGIRPVVSTQFLLNGTLEEKV-TVLDRNVSNDMDTIIVKLNETVRLNCTRTGNNTIKGIPIGPSQIFYGIETVIGDTRQAFCQLNKTVWTNTFKKVRHALNETYKGYLGNET-----ITFGPSTGGDLEVTNLHLICGGEFFYCNTSILFNTSIIFNETK--------DDNITIPCRIRQIVRLWQRVGRGIFLPPIRGTINCISNITGILFAQQKTDRMNKSAMFTPVGGEMRNNWRSELYKYKVVRIEPLGVAPTKAKRRTVHREKRAAVGLGALFLGFLGAAGSTMGAASLTLTVQARQLLSGIVQQQSNLLRAIEAQQHLLQLSVWGIKQLQARVLAVERYLKDQQLLGLWGCSGKLICTTSVPWNTTWTNKSYDDIWYNMTWMQWDKEVSNYTDVIYNLLEKAQTQQENNEKELLELDKWASLWNWFDITSWLWYIKIFIIIVGGLIGLRIVFALLSIVNRVRQGYSPL-----SFQTLIPARRDRDR--PEEIEEGGGEPDNVRSIRLVSGFLALAWNDLRDLCLFLYHRLRDLLLIVLRTLELVGQTLLKGLRRGREALIHLRGILQYWGQELKTSAISLLDTTAIAVAEGTDRIIEIAQRFGRGILNIPRRIRQGLERALL
hiv1_m:b_env         MRAKGTRKNYQHLW----RWGTMLLGMLMICSAAEQLWVTVYYGVPVWKEATTTLFCASDAKAYDTEVHNVWATHACVPTDPNPQEVVLQNVTENFNMWKNNTVEQMHEDIISLWDQSLKPCVKSTPLCVTLNCTDLTNATYANGS-----------------------------SEERGEIRNCSFNVTTIIRNKIQKEYALFYRLDIVPIDKDN-------TSYTLINCNTSVITQACPKVSFEPIPIHYCAPAGFAILKCNDKKFNGTGP-CTNVSTVQCTHGIKPVVSTQLLLNGSLAEGEVVIRSENFTNNAKTIIVQLNKSVEINCTRPNNNTKKGIAIGPGRTLYAREKIIGDIRQAHCNISKAKWNDTLKQIVTKLKEQF----RNKT-----IVFNQSSGGDPEIVMHSFNCGGEFFYCKTTQLFNSTWLFNSTWNDTERSDNNETIIIPCRIKQIINSGRK----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
hiv1_m:c_env         MRVEGIQRNWKQWW----IWGILGFWMVMIYNVRGNLWVTVYYGVPVWKEAKTTLFCASDAKAYDAEVHNVWATHACVPTDPNPQEMVLENVTENFNMWENDMVEQMHQDIISLWDQSLKPCVKLTPLCVTLHCSNRT-IDYNNRT-----------------------------DNMGGEIKNCSFNMTTEVRDKREKVHALFYRLDIVPLKNESS---NTSGDYRLINCNTSAITQACPKVSFDPIPIHYCAPAGYAILKCNNKTFNGTGP-CNNVSTIQCTHGTKPVVSTQLLLNGSLAEEEIIIRSKNLTDNVKTIIVHLNESVEINCTRPNNNTRKSIRIGPGQAFYATGEIIGDIRQAHCNISRTAWNKTLQEVGKKLAEHF----PNKA-----IKFAKHSGGDLEITTHSFNCRGEFFYCNTSSLFNSTYTPNSTENIT--GTENSIITIPCRIKQIINMWQGVGRAMYAPPIEGILTCRSNITGLLLTRDGGTGMHDTEIFRPEGGDMRDNWRSELYKYKVVEIKPLGIAPTKAKRRVVEREKR-AVGIGAVFLGFLGAAGSTMGAASITLTVQVRQLLSGIVQQQSNLLRAIEAQQHMLQLTVWGIKQLQTRVLAIERYLRDQQLLGIWGCSGKLICTTAVPWNSSWSNRSQEDIWNNMTWMQWDREISNYTNTIYRLLEDSQNQQEKNEQDLLALDKWQNLWTWFGITNWLWYIKIFIKIVGGLIGLRIIFAVLSIVNRVRQGYSPL-----SFQTLTPNPRGPDR--LGGIEEEGGEQDRDRSIRLVSGFLALAWDDLRSLCLFSYHRLRDLILIAARAVELLGRSSLRGIQRGWEILKYLGGLVQYWSLELKKSAISLFDTIAIAVAEGTDRIIEVIQGIWRAICNIPRRIRQGFEAALQ

`,yv=`CLUSTAL O(1.2.4) multiple sequence alignment


sp|P69905|HBA_HUMAN       MVLSPADKTNVKAAWGKVGAHAGEYGAEALERMFLSFPTTKTYFPHFDLSHGSAQVKGHG	60
sp|P01942|HBA_MOUSE       MVLSGEDKSNIKAAWGKIGGHGAEYGAEALERMFASFPTTKTYFPHFDVSHGSAQVKGHG	60
sp|P13786|HBAZ_CAPHI      MSLTRTERTIILSLWSKISTQADVIGTETLERLFSCYPQAKTYFPHFDLHSGSAQLRAHG	60
                          * *:  ::: : : *.*:. :.   *:*:***:* .:* :********:  ****::.**

sp|P69905|HBA_HUMAN       KKVADALTNAVAHVDDMPNALSALSDLHAHKLRVDPVNFKLLSHCLLVTLAAHLPAEFTP	120
sp|P01942|HBA_MOUSE       KKVADALASAAGHLDDLPGALSALSDLHAHKLRVDPVNFKLLSHCLLVTLASHHPADFTP	120
sp|P13786|HBAZ_CAPHI      SKVVAAVGDAVKSIDNVTSALSKLSELHAYVLRVDPVNFKFLSHCLLVTLASHFPADFTA	120
                          .**. *: .*.  :*:: .*** **:***: *********:**********:* **:**

sp|P69905|HBA_HUMAN       AVHASLDKFLASVSTVLTSKYR	142
sp|P01942|HBA_MOUSE       AVHASLDKFLASVSTVLTSKYR	142
sp|P13786|HBAZ_CAPHI      DAHAAWDKFLSIVSGVLTEKYR	142
                           .**: ****: ** ***.***`,wv="(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)"});function rr({onClick:e,model:t,children:r}){return $e.default.createElement("li",null,$e.default.createElement(ja.Link,{onClick:n=>{t.setError(void 0),n.preventDefault(),e()},href:"#"},$e.default.createElement(ja.Typography,{display:"inline"},r)))}var $e,ja,xv,RP,Ev,Ov=C(()=>{$e=x(R()),ja=x(B()),xv=x(D());Sv();Lf();RP=(0,xv.observer)(function({model:e}){function t(r,n){(async()=>{try{await Ca(e,r?{uri:r,locationType:"UriLocation"}:void 0,n?{uri:n,locationType:"UriLocation"}:void 0)}catch(i){console.error(i),e.setError(i)}})()}return $e.default.createElement("ul",null,$e.default.createElement(rr,{model:e,onClick:()=>{t(void 0,"https://jbrowse.org/genomes/newicktrees/sarscov2phylo.pub.ft.nh")}},"230k COVID-19 samples (tree only)"),$e.default.createElement(rr,{model:e,onClick:()=>{e.setData({msa:gv,tree:wv})}},"Small protein MSA+tree"),$e.default.createElement(rr,{model:e,onClick:()=>{e.setData({msa:yv})}},"Small MSA only"),$e.default.createElement(rr,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/pfam-cov2.stock")}},"PFAM SARS-CoV2 multi-stockholm"),$e.default.createElement(rr,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock")}},"Lysine stockholm file"),$e.default.createElement(rr,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt")}},"PF01601 stockholm file (SARS-CoV2 spike protein)"),$e.default.createElement(rr,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa")}},"Europe COVID full genomes (LR883044.1 and 199 other sequences)"),$e.default.createElement(rr,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa","https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh")}},"MAFFT+VeryFastTree(17.9k samples)"),$e.default.createElement(rr,{model:e,onClick:()=>{t("https://jbrowse.org/demos/ttc39a.mfa")}},"Human BLAST results mfa"))}),Ev=RP});var he,Mv,Re,Df,FP,Av,Pv=C(()=>{he=x(R()),Mv=x(D()),Re=x(B()),Df=x(Ae());Lf();Ov();FP=(0,Mv.observer)(function({model:e}){let[t,r]=(0,he.useState)(),[n,i]=(0,he.useState)(),{error:o}=e;return he.default.createElement(Re.Container,null,he.default.createElement("div",{style:{width:"50%"}},o?he.default.createElement("div",{style:{padding:20}},he.default.createElement(Re.Typography,{color:"error"},"Error: ",`${o}`)):null,he.default.createElement(Re.Typography,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),he.default.createElement(Re.Typography,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),he.default.createElement(Re.Grid,{container:!0,spacing:10,justifyContent:"center",alignItems:"center"},he.default.createElement(Re.Grid,{item:!0},he.default.createElement(Re.Typography,null,"MSA file or URL"),he.default.createElement(Df.FileSelector,{location:t,setLocation:r}),he.default.createElement(Re.Typography,null,"Tree file or URL"),he.default.createElement(Df.FileSelector,{location:n,setLocation:i})),he.default.createElement(Re.Grid,{item:!0},he.default.createElement(Re.Button,{onClick:()=>{(async()=>{try{await Ca(e,t,n)}catch(a){console.error(a),e.setError(a)}})()},variant:"contained",color:"primary",disabled:!t&&!n},"Open")),he.default.createElement(Re.Grid,{item:!0},he.default.createElement(Re.Typography,null,"Examples"),he.default.createElement(Ev,{model:e}))))}),Av=FP});var Fe,Nf,qv,Tv,kv=C(()=>{Fe=x(R()),Nf=x(D()),qv=(0,Nf.observer)(function({model:e}){let{resizeHandleWidth:t}=e,[r,n]=(0,Fe.useState)(!1),i=(0,Fe.useRef)(!1),o=(0,Fe.useRef)(0);return(0,Fe.useEffect)(()=>{function a(d){d.preventDefault();let l=d.clientX;if(o.current===0)o.current=d.clientX;else{let f=l-o.current;f&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setTreeAreaWidth(e.treeAreaWidth+f),i.current=!1,o.current=d.clientX})))}}function u(){o.current=0,r&&n(!1)}return r?(document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",u,!0),()=>{document.removeEventListener("mousemove",a,!0),document.removeEventListener("mouseup",u,!0)}):()=>{}},[r,e]),Fe.default.createElement("div",null,Fe.default.createElement("div",{onMouseDown:()=>{n(!0)},style:{cursor:"ew-resize",height:"100%",width:t,background:"rgba(200,200,200)",position:"relative"}}))}),Tv=(0,Nf.observer)(function({model:e}){let{resizeHandleWidth:t}=e,[r,n]=(0,Fe.useState)(!1),i=(0,Fe.useRef)(!1),o=(0,Fe.useRef)(0);return(0,Fe.useEffect)(()=>{function a(d){d.preventDefault();let l=d.clientY;if(o.current===0)o.current=d.clientY;else{let f=l-o.current;f&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setHeight(e.height+f),i.current=!1,o.current=d.clientY})))}}function u(){o.current=0,r&&n(!1)}return r?(document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",u,!0),()=>{document.removeEventListener("mousemove",a,!0),document.removeEventListener("mouseup",u,!0)}):()=>{}},[r,e]),Fe.default.createElement("div",null,Fe.default.createElement("div",{onMouseDown:()=>{n(!0)},style:{cursor:"ns-resize",width:"100%",height:t,background:"rgba(200,200,200)",position:"relative"}}))})});var Cv,jv,LP,Iv,Rv=C(()=>{Cv=x(R()),jv=x(D()),LP=(0,jv.observer)(({model:e})=>{let{treeAreaWidth:t}=e;return Cv.default.createElement("div",{style:{flexShrink:0,width:t}})}),Iv=LP});var Hf=g(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=DP;var Bf=R();function DP(){let e=(0,Bf.useRef)(null),[t,r]=(0,Bf.useState)({width:void 0,height:void 0});return(0,Bf.useEffect)(()=>{if(!e.current)return;let n=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:void 0;if(!n)return;let i=new n(o=>{r({width:o[0].contentRect.width,height:o[0].contentRect.height})});return i.observe(e.current),()=>{i.disconnect()}},[]),[e,t]}});var Fv=g(Ia=>{"use strict";"use client";var NP=G();Object.defineProperty(Ia,"__esModule",{value:!0});Ia.default=void 0;var BP=NP(ne()),zP=ie(),EK=Ia.default=(0,BP.default)((0,zP.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help")});var It=g((MK,Lv)=>{Lv.exports=JBrowseExports["tss-react/mui"]});var Dv=g(Ra=>{"use strict";"use client";var HP=G();Object.defineProperty(Ra,"__esModule",{value:!0});Ra.default=void 0;var VP=HP(ne()),WP=ie(),AK=Ra.default=(0,VP.default)((0,WP.jsx)("path",{d:"m10 17 5-5-5-5z"}),"ArrowRight")});var Nv=g(Fa=>{"use strict";"use client";var UP=G();Object.defineProperty(Fa,"__esModule",{value:!0});Fa.default=void 0;var GP=UP(ne()),$P=ie(),qK=Fa.default=(0,GP.default)((0,$P.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox")});var Bv=g(La=>{"use strict";"use client";var YP=G();Object.defineProperty(La,"__esModule",{value:!0});La.default=void 0;var XP=YP(ne()),ZP=ie(),kK=La.default=(0,XP.default)((0,ZP.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank")});var zv=g(Da=>{"use strict";"use client";var KP=G();Object.defineProperty(Da,"__esModule",{value:!0});Da.default=void 0;var JP=KP(ne()),QP=ie(),jK=Da.default=(0,JP.default)((0,QP.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonChecked")});var Hv=g(Na=>{"use strict";"use client";var eq=G();Object.defineProperty(Na,"__esModule",{value:!0});Na.default=void 0;var tq=eq(ne()),rq=ie(),RK=Na.default=(0,tq.default)((0,rq.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")});var Wv=g((LK,Vv)=>{"use strict";Vv.exports=function(t){return typeof t=="object"&&t!==null}});var Gv=g(Uv=>{"use strict";Object.defineProperty(Uv,"__esModule",{value:!0})});var $v=g(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var Vf=class extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(let[r,n]of t)this.onEviction(r,n.value)}_deleteIfExpired(t,r){return typeof r.expiry=="number"&&r.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,r.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,r){if(!this._deleteIfExpired(t,r))return r.value}_getItemValue(t,r){return r.expiry?this._getOrDeleteIfExpired(t,r):r.value}_peek(t,r){let n=r.get(t);return this._getItemValue(t,n)}_set(t,r){this.cache.set(t,r),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,r){this.oldCache.delete(t),this._set(t,r)}*_entriesAscending(){for(let t of this.oldCache){let[r,n]=t;this.cache.has(r)||this._deleteIfExpired(r,n)||(yield t)}for(let t of this.cache){let[r,n]=t;this._deleteIfExpired(r,n)||(yield t)}}get(t){if(this.cache.has(t)){let r=this.cache.get(t);return this._getItemValue(t,r)}if(this.oldCache.has(t)){let r=this.oldCache.get(t);if(!this._deleteIfExpired(t,r))return this._moveToRecent(t,r),r.value}}set(t,r,{maxAge:n=this.maxAge}={}){let i=typeof n=="number"&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(t)?this.cache.set(t,{value:r,expiry:i}):this._set(t,{value:r,expiry:i})}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){let r=this.cache.delete(t);return r&&this._size--,this.oldCache.delete(t)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");let r=[...this._entriesAscending()],n=r.length-t;n<0?(this.cache=new Map(r),this.oldCache=new Map,this._size=r.length):(n>0&&this._emitEvictions(r.slice(0,n)),this.oldCache=new Map(r.slice(n)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache){let[r,n]=t;this._deleteIfExpired(r,n)||(yield[r,n.value])}for(let t of this.oldCache){let[r,n]=t;this.cache.has(r)||this._deleteIfExpired(r,n)||(yield[r,n.value])}}*entriesDescending(){let t=[...this.cache];for(let r=t.length-1;r>=0;--r){let n=t[r],[i,o]=n;this._deleteIfExpired(i,o)||(yield[i,o.value])}t=[...this.oldCache];for(let r=t.length-1;r>=0;--r){let n=t[r],[i,o]=n;this.cache.has(i)||this._deleteIfExpired(i,o)||(yield[i,o.value])}}*entriesAscending(){for(let[t,r]of this._entriesAscending())yield[t,r.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(let r of this.oldCache.keys())this.cache.has(r)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,r=this){for(let[n,i]of this.entriesAscending())t.call(r,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};Wf.default=Vf});var Yv=g(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.nanoid=Ye.customAlphabet=Ye.customRandom=Ye.random=Ye.urlAlphabet=void 0;Ye.urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var nq=e=>crypto.getRandomValues(new Uint8Array(e));Ye.random=nq;var iq=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return(o=t)=>{let a="";for(;;){let u=r(i),d=i;for(;d--;)if(a+=e[u[d]&n]||"",a.length===o)return a}}};Ye.customRandom=iq;var oq=(e,t=21)=>(0,Ye.customRandom)(e,t,Ye.random);Ye.customAlphabet=oq;var aq=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");Ye.nanoid=aq});var Uf=g(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.FileLocation=se.UriLocation=se.UriLocationRaw=se.BlobLocation=se.LocalPathLocation=se.Region=se.NoAssemblyRegion=se.ElementId=void 0;var $=Ge(),uq=Yv();se.ElementId=$.types.optional($.types.identifier,()=>(0,uq.nanoid)());se.NoAssemblyRegion=$.types.model("NoAssemblyRegion",{refName:$.types.string,start:$.types.number,end:$.types.number,reversed:$.types.optional($.types.boolean,!1)}).actions(e=>({setRefName(t){e.refName=t}}));se.Region=$.types.compose("Region",se.NoAssemblyRegion,$.types.model({assemblyName:$.types.string}));se.LocalPathLocation=$.types.model("LocalPathLocation",{locationType:$.types.literal("LocalPathLocation"),localPath:$.types.string});se.BlobLocation=$.types.model("BlobLocation",{locationType:$.types.literal("BlobLocation"),name:$.types.string,blobId:$.types.string});se.UriLocationRaw=$.types.model("UriLocation",{locationType:$.types.literal("UriLocation"),uri:$.types.string,baseUri:$.types.maybe($.types.string),internetAccountId:$.types.maybe($.types.string),internetAccountPreAuthorization:$.types.maybe($.types.model("InternetAccountPreAuthorization",{internetAccountType:$.types.string,authInfo:$.types.frozen()}))});se.UriLocation=$.types.snapshotProcessor(se.UriLocationRaw,{postProcessor:e=>{let{baseUri:t,...r}=e;return t?e:r}});se.FileLocation=$.types.snapshotProcessor($.types.union(se.LocalPathLocation,se.UriLocation,se.BlobLocation),{preProcessor(e){if(!e)return;let{locationType:t,...r}=e;if(!t){let{uri:n,localPath:i,blob:o}=r,a="";return n!==void 0?a="UriLocation":i!==void 0?a="LocalPathLocation":o!==void 0&&(a="BlobLocation"),{...r,locationType:a}}return e}})});var zn=g((HK,nr)=>{function Gf(e){"@babel/helpers - typeof";return nr.exports=Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr.exports.__esModule=!0,nr.exports.default=nr.exports,Gf(e)}nr.exports=Gf,nr.exports.__esModule=!0,nr.exports.default=nr.exports});var Zv=g((VK,Xi)=>{var Xv=zn().default;function sq(e,t){if(Xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}Xi.exports=sq,Xi.exports.__esModule=!0,Xi.exports.default=Xi.exports});var $f=g((WK,Zi)=>{var lq=zn().default,cq=Zv();function fq(e){var t=cq(e,"string");return lq(t)=="symbol"?t:t+""}Zi.exports=fq,Zi.exports.__esModule=!0,Zi.exports.default=Zi.exports});var Ba=g((UK,Ki)=>{var dq=$f();function pq(e,t,r){return(t=dq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ki.exports=pq,Ki.exports.__esModule=!0,Ki.exports.default=Ki.exports});var ln=g((GK,Ji)=>{function hq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Ji.exports=hq,Ji.exports.__esModule=!0,Ji.exports.default=Ji.exports});var cn=g(($K,Qi)=>{var mq=$f();function Kv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mq(n.key),n)}}function vq(e,t,r){return t&&Kv(e.prototype,t),r&&Kv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Qi.exports=vq,Qi.exports.__esModule=!0,Qi.exports.default=Qi.exports});var Yf=g((YK,eo)=>{function _q(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}eo.exports=_q,eo.exports.__esModule=!0,eo.exports.default=eo.exports});var Jv=g((XK,to)=>{var bq=Yf();function gq(e){if(Array.isArray(e))return bq(e)}to.exports=gq,to.exports.__esModule=!0,to.exports.default=to.exports});var Qv=g((ZK,ro)=>{function yq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}ro.exports=yq,ro.exports.__esModule=!0,ro.exports.default=ro.exports});var Xf=g((KK,no)=>{var e_=Yf();function wq(e,t){if(e){if(typeof e=="string")return e_(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e_(e,t):void 0}}no.exports=wq,no.exports.__esModule=!0,no.exports.default=no.exports});var t_=g((JK,io)=>{function Sq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}io.exports=Sq,io.exports.__esModule=!0,io.exports.default=io.exports});var r_=g((QK,oo)=>{var xq=Jv(),Eq=Qv(),Oq=Xf(),Mq=t_();function Aq(e){return xq(e)||Eq(e)||Oq(e)||Mq()}oo.exports=Aq,oo.exports.__esModule=!0,oo.exports.default=oo.exports});var n_=g(Rt=>{"use strict";var Pq=G(),qq=Pq(r_()),Tq={functions:"Jexl Function",transforms:"Transform"};Rt.ArrayLiteral=function(e){return this.evalArray(e.value)};Rt.BinaryExpression=function(e){var t=this,r=this._grammar.elements[e.operator];if(r.evalOnDemand){var n=function(o){return{eval:function(){return t.eval(o)}}};return r.evalOnDemand(n(e.left),n(e.right))}return this.Promise.all([this.eval(e.left),this.eval(e.right)]).then(function(i){return r.eval(i[0],i[1])})};Rt.ConditionalExpression=function(e){var t=this;return this.eval(e.test).then(function(r){return r?e.consequent?t.eval(e.consequent):r:t.eval(e.alternate)})};Rt.FilterExpression=function(e){var t=this;return this.eval(e.subject).then(function(r){return e.relative?t._filterRelative(r,e.expr):t._filterStatic(r,e.expr)})};Rt.Identifier=function(e){return e.from?this.eval(e.from).then(function(t){if(t!=null)return Array.isArray(t)&&(t=t[0]),t[e.value]}):e.relative?this._relContext[e.value]:this._context[e.value]};Rt.Literal=function(e){return e.value};Rt.ObjectLiteral=function(e){return this.evalMap(e.value)};Rt.FunctionCall=function(e){var t=Tq[e.pool];if(!t)throw new Error("Corrupt AST: Pool '".concat(e.pool,"' not found"));var r=this._grammar[e.pool],n=r[e.name];if(!n)throw new Error("".concat(t," ").concat(e.name," is not defined."));return this.evalArray(e.args||[]).then(function(i){return n.apply(void 0,(0,qq.default)(i))})};Rt.UnaryExpression=function(e){var t=this;return this.eval(e.right).then(function(r){return t._grammar.elements[e.operator].eval(r)})}});var a_=g((tJ,o_)=>{"use strict";var i_=G(),kq=i_(ln()),Cq=i_(cn()),jq=n_(),Iq=function(){function e(t,r,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Promise;(0,kq.default)(this,e),this._grammar=t,this._context=r||{},this._relContext=n||this._context,this.Promise=i}return(0,Cq.default)(e,[{key:"eval",value:function(r){var n=this;return this.Promise.resolve().then(function(){return jq[r.type].call(n,r)})}},{key:"evalArray",value:function(r){var n=this;return this.Promise.all(r.map(function(i){return n.eval(i)}))}},{key:"evalMap",value:function(r){var n=this,i=Object.keys(r),o={},a=i.map(function(u){return n.eval(r[u])});return this.Promise.all(a).then(function(u){return u.forEach(function(d,l){o[i[l]]=d}),o})}},{key:"_filterRelative",value:function(r,n){var i=this,o=[];return Array.isArray(r)||(r=r===void 0?[]:[r]),r.forEach(function(a){var u=new e(i._grammar,i._context,a,i.Promise);o.push(u.eval(n))}),this.Promise.all(o).then(function(a){var u=[];return a.forEach(function(d,l){d&&u.push(r[l])}),u})}},{key:"_filterStatic",value:function(r,n){return this.eval(n).then(function(i){return typeof i=="boolean"?i?r:void 0:r[i]})}}]),e}();o_.exports=Iq});var c_=g((rJ,l_)=>{"use strict";var s_=G(),Rq=s_(ln()),Fq=s_(cn()),Lq=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/,u_=/^[a-zA-Zа-яА-Я_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][a-zA-Zа-яА-Я0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*$/,Dq=/\\\\/,Nq=/^\s*$/,Bq=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],zq=["[a-zA-Z\u0430-\u044F\u0410-\u042F_\xC0-\xD6\xD8-\xF6\xF8-\xFF\\$][a-zA-Z0-9\u0430-\u044F\u0410-\u042F_\xC0-\xD6\xD8-\xF6\xF8-\xFF\\$]*","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],Hq=["binaryOp","unaryOp","openParen","openBracket","question","colon"],Vq=function(){function e(t){(0,Rq.default)(this,e),this._grammar=t}return(0,Fq.default)(e,[{key:"getElements",value:function(r){var n=this._getSplitRegex();return r.split(n).filter(function(i){return i})}},{key:"getTokens",value:function(r){for(var n=[],i=!1,o=0;o<r.length;o++)this._isWhitespace(r[o])?n.length&&(n[n.length-1].raw+=r[o]):r[o]==="-"&&this._isNegative(n)?i=!0:(i&&(r[o]="-"+r[o],i=!1),n.push(this._createToken(r[o])));return i&&n.push(this._createToken("-")),n}},{key:"tokenize",value:function(r){var n=this.getElements(r);return this.getTokens(n)}},{key:"_createToken",value:function(r){var n={type:"literal",value:r,raw:r};if(r[0]==='"'||r[0]==="'")n.value=this._unquote(r);else if(r.match(Lq))n.value=parseFloat(r);else if(r==="true"||r==="false")n.value=r==="true";else if(this._grammar.elements[r])n.type=this._grammar.elements[r].type;else if(r.match(u_))n.type="identifier";else throw new Error("Invalid expression token: ".concat(r));return n}},{key:"_escapeRegExp",value:function(r){return r=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r.match(u_)&&(r="\\b"+r+"\\b"),r}},{key:"_getSplitRegex",value:function(){var r=this;if(!this._splitRegex){var n=Object.keys(this._grammar.elements).sort(function(i,o){return o.length-i.length}).map(function(i){return r._escapeRegExp(i)},this);this._splitRegex=new RegExp("("+[Bq.join("|"),n.join("|"),zq.join("|")].join("|")+")")}return this._splitRegex}},{key:"_isNegative",value:function(r){return r.length?Hq.some(function(n){return n===r[r.length-1].type}):!0}},{key:"_isWhitespace",value:function(r){return!!r.match(Nq)}},{key:"_unquote",value:function(r){var n=r[0],i=new RegExp("\\\\"+n,"g");return r.substr(1,r.length-2).replace(i,n).replace(Dq,"\\")}}]),e}();l_.exports=Vq});var Zf=g(ye=>{"use strict";ye.argVal=function(e){e&&this._cursor.args.push(e)};ye.arrayStart=function(){this._placeAtCursor({type:"ArrayLiteral",value:[]})};ye.arrayVal=function(e){e&&this._cursor.value.push(e)};ye.binaryOp=function(e){for(var t=this._grammar.elements[e.value].precedence||0,r=this._cursor._parent;r&&r.operator&&this._grammar.elements[r.operator].precedence>=t;)this._cursor=r,r=r._parent;var n={type:"BinaryExpression",operator:e.value,left:this._cursor};this._setParent(this._cursor,n),this._cursor=r,this._placeAtCursor(n)};ye.dot=function(){this._nextIdentEncapsulate=this._cursor&&this._cursor.type!=="UnaryExpression"&&(this._cursor.type!=="BinaryExpression"||this._cursor.type==="BinaryExpression"&&this._cursor.right),this._nextIdentRelative=!this._cursor||this._cursor&&!this._nextIdentEncapsulate,this._nextIdentRelative&&(this._relative=!0)};ye.filter=function(e){this._placeBeforeCursor({type:"FilterExpression",expr:e,relative:this._subParser.isRelative(),subject:this._cursor})};ye.functionCall=function(){this._placeBeforeCursor({type:"FunctionCall",name:this._cursor.value,args:[],pool:"functions"})};ye.identifier=function(e){var t={type:"Identifier",value:e.value};this._nextIdentEncapsulate?(t.from=this._cursor,this._placeBeforeCursor(t),this._nextIdentEncapsulate=!1):(this._nextIdentRelative&&(t.relative=!0,this._nextIdentRelative=!1),this._placeAtCursor(t))};ye.literal=function(e){this._placeAtCursor({type:"Literal",value:e.value})};ye.objKey=function(e){this._curObjKey=e.value};ye.objStart=function(){this._placeAtCursor({type:"ObjectLiteral",value:{}})};ye.objVal=function(e){this._cursor.value[this._curObjKey]=e};ye.subExpression=function(e){this._placeAtCursor(e)};ye.ternaryEnd=function(e){this._cursor.alternate=e};ye.ternaryMid=function(e){this._cursor.consequent=e};ye.ternaryStart=function(){this._tree={type:"ConditionalExpression",test:this._tree},this._cursor=this._tree};ye.transform=function(e){this._placeBeforeCursor({type:"FunctionCall",name:e.value,args:[this._cursor],pool:"transforms"})};ye.unaryOp=function(e){this._placeAtCursor({type:"UnaryExpression",operator:e.value})}});var d_=g(f_=>{"use strict";var Xe=Zf();f_.states={expectOperand:{tokenTypes:{literal:{toState:"expectBinOp"},identifier:{toState:"identifier"},unaryOp:{},openParen:{toState:"subExpression"},openCurl:{toState:"expectObjKey",handler:Xe.objStart},dot:{toState:"traverse"},openBracket:{toState:"arrayVal",handler:Xe.arrayStart}}},expectBinOp:{tokenTypes:{binaryOp:{toState:"expectOperand"},pipe:{toState:"expectTransform"},dot:{toState:"traverse"},question:{toState:"ternaryMid",handler:Xe.ternaryStart}},completable:!0},expectTransform:{tokenTypes:{identifier:{toState:"postTransform",handler:Xe.transform}}},expectObjKey:{tokenTypes:{identifier:{toState:"expectKeyValSep",handler:Xe.objKey},closeCurl:{toState:"expectBinOp"}}},expectKeyValSep:{tokenTypes:{colon:{toState:"objVal"}}},postTransform:{tokenTypes:{openParen:{toState:"argVal"},binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},postArgs:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},identifier:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},openParen:{toState:"argVal",handler:Xe.functionCall},pipe:{toState:"expectTransform"},question:{toState:"ternaryMid",handler:Xe.ternaryStart}},completable:!0},traverse:{tokenTypes:{identifier:{toState:"identifier"}}},filter:{subHandler:Xe.filter,endStates:{closeBracket:"identifier"}},subExpression:{subHandler:Xe.subExpression,endStates:{closeParen:"expectBinOp"}},argVal:{subHandler:Xe.argVal,endStates:{comma:"argVal",closeParen:"postArgs"}},objVal:{subHandler:Xe.objVal,endStates:{comma:"expectObjKey",closeCurl:"expectBinOp"}},arrayVal:{subHandler:Xe.arrayVal,endStates:{comma:"arrayVal",closeBracket:"expectBinOp"}},ternaryMid:{subHandler:Xe.ternaryMid,endStates:{colon:"ternaryEnd"}},ternaryEnd:{subHandler:Xe.ternaryEnd,completable:!0}}});var m_=g((oJ,h_)=>{"use strict";var p_=G(),Wq=p_(ln()),Uq=p_(cn()),Gq=Zf(),za=d_().states,$q=function(){function e(t,r,n){(0,Wq.default)(this,e),this._grammar=t,this._state="expectOperand",this._tree=null,this._exprStr=r||"",this._relative=!1,this._stopMap=n||{}}return(0,Uq.default)(e,[{key:"addToken",value:function(r){if(this._state==="complete")throw new Error("Cannot add a new token to a completed Parser");var n=za[this._state],i=this._exprStr;if(this._exprStr+=r.raw,n.subHandler){this._subParser||this._startSubExpression(i);var o=this._subParser.addToken(r);if(o){if(this._endSubExpression(),this._parentStop)return o;this._state=o}}else if(n.tokenTypes[r.type]){var a=n.tokenTypes[r.type],u=Gq[r.type];a.handler&&(u=a.handler),u&&u.call(this,r),a.toState&&(this._state=a.toState)}else{if(this._stopMap[r.type])return this._stopMap[r.type];throw new Error("Token ".concat(r.raw," (").concat(r.type,") unexpected in expression: ").concat(this._exprStr))}return!1}},{key:"addTokens",value:function(r){r.forEach(this.addToken,this)}},{key:"complete",value:function(){if(this._cursor&&!za[this._state].completable)throw new Error("Unexpected end of expression: ".concat(this._exprStr));return this._subParser&&this._endSubExpression(),this._state="complete",this._cursor?this._tree:null}},{key:"isRelative",value:function(){return this._relative}},{key:"_endSubExpression",value:function(){za[this._state].subHandler.call(this,this._subParser.complete()),this._subParser=null}},{key:"_placeAtCursor",value:function(r){this._cursor?(this._cursor.right=r,this._setParent(r,this._cursor)):this._tree=r,this._cursor=r}},{key:"_placeBeforeCursor",value:function(r){this._cursor=this._cursor._parent,this._placeAtCursor(r)}},{key:"_setParent",value:function(r,n){Object.defineProperty(r,"_parent",{value:n,writable:!0})}},{key:"_startSubExpression",value:function(r){var n=za[this._state].endStates;n||(this._parentStop=!0,n=this._stopMap),this._subParser=new e(this._grammar,r,n)}}]),e}();h_.exports=$q});var b_=g((aJ,__)=>{"use strict";var v_=G(),Yq=v_(ln()),Xq=v_(cn()),yr=function(){function e(t){(0,Yq.default)(this,e),t(this._resolve.bind(this),this._reject.bind(this))}return(0,Xq.default)(e,[{key:"catch",value:function(r){if(this.error)try{this._resolve(r(this.error))}catch(n){this._reject(n)}return this}},{key:"then",value:function(r,n){if(!this.error)try{this._resolve(r(this.value))}catch(i){this._reject(i)}return n&&this.catch(n),this}},{key:"_reject",value:function(r){this.value=void 0,this.error=r}},{key:"_resolve",value:function(r){r instanceof e?r.error?this._reject(r.error):this._resolve(r.value):(this.value=r,this.error=void 0)}}]),e}();yr.all=function(e){return new yr(function(t){var r=e.map(function(n){for(;n instanceof yr;){if(n.error)throw Error(n.error);n=n.value}return n});t(r)})};yr.resolve=function(e){return new yr(function(t){return t(e)})};yr.reject=function(e){return new yr(function(t,r){return r(e)})};__.exports=yr});var w_=g((uJ,y_)=>{"use strict";var g_=G(),Zq=g_(ln()),Kq=g_(cn()),Jq=a_(),Qq=c_(),eT=m_(),tT=b_(),rT=function(){function e(t,r){(0,Zq.default)(this,e),this._grammar=t,this._exprStr=r,this._ast=null}return(0,Kq.default)(e,[{key:"compile",value:function(){var r=new Qq(this._grammar),n=new eT(this._grammar),i=r.tokenize(this._exprStr);return n.addTokens(i),this._ast=n.complete(),this}},{key:"eval",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._eval(r,Promise)}},{key:"evalSync",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this._eval(r,tT);if(n.error)throw n.error;return n.value}},{key:"_eval",value:function(r,n){var i=this;return n.resolve().then(function(){var o=i._getAst(),a=new Jq(i._grammar,r,void 0,n);return a.eval(o)})}},{key:"_getAst",value:function(){return this._ast||this.compile(),this._ast}}]),e}();y_.exports=rT});var x_=g(S_=>{"use strict";S_.getGrammar=function(){return{elements:{".":{type:"dot"},"[":{type:"openBracket"},"]":{type:"closeBracket"},"|":{type:"pipe"},"{":{type:"openCurl"},"}":{type:"closeCurl"},":":{type:"colon"},",":{type:"comma"},"(":{type:"openParen"},")":{type:"closeParen"},"?":{type:"question"},"+":{type:"binaryOp",precedence:30,eval:function(t,r){return t+r}},"-":{type:"binaryOp",precedence:30,eval:function(t,r){return t-r}},"*":{type:"binaryOp",precedence:40,eval:function(t,r){return t*r}},"/":{type:"binaryOp",precedence:40,eval:function(t,r){return t/r}},"//":{type:"binaryOp",precedence:40,eval:function(t,r){return Math.floor(t/r)}},"%":{type:"binaryOp",precedence:50,eval:function(t,r){return t%r}},"^":{type:"binaryOp",precedence:50,eval:function(t,r){return Math.pow(t,r)}},"==":{type:"binaryOp",precedence:20,eval:function(t,r){return t==r}},"!=":{type:"binaryOp",precedence:20,eval:function(t,r){return t!=r}},">":{type:"binaryOp",precedence:20,eval:function(t,r){return t>r}},">=":{type:"binaryOp",precedence:20,eval:function(t,r){return t>=r}},"<":{type:"binaryOp",precedence:20,eval:function(t,r){return t<r}},"<=":{type:"binaryOp",precedence:20,eval:function(t,r){return t<=r}},"&&":{type:"binaryOp",precedence:10,evalOnDemand:function(t,r){return t.eval().then(function(n){return n&&r.eval()})}},"||":{type:"binaryOp",precedence:10,evalOnDemand:function(t,r){return t.eval().then(function(n){return n||r.eval()})}},in:{type:"binaryOp",precedence:20,eval:function(t,r){return typeof r=="string"?r.indexOf(t)!==-1:Array.isArray(r)?r.some(function(n){return n===t}):!1}},"!":{type:"unaryOp",precedence:1/0,eval:function(t){return!t}}},functions:{},transforms:{}}}});var O_=g((lJ,Jf)=>{"use strict";var Kf=G(),nT=Kf(Ba()),iT=Kf(ln()),oT=Kf(cn()),aT=w_(),uT=x_(),sT=uT.getGrammar,E_=function(){function e(){(0,iT.default)(this,e),this.expr=this.expr.bind(this),this._grammar=sT()}return(0,oT.default)(e,[{key:"addBinaryOp",value:function(r,n,i,o){this._addGrammarElement(r,(0,nT.default)({type:"binaryOp",precedence:n},o?"evalOnDemand":"eval",i))}},{key:"addFunction",value:function(r,n){this._grammar.functions[r]=n}},{key:"addFunctions",value:function(r){for(var n in r)this._grammar.functions[n]=r[n]}},{key:"addUnaryOp",value:function(r,n){this._addGrammarElement(r,{type:"unaryOp",weight:1/0,eval:n})}},{key:"addTransform",value:function(r,n){this._grammar.transforms[r]=n}},{key:"addTransforms",value:function(r){for(var n in r)this._grammar.transforms[n]=r[n]}},{key:"compile",value:function(r){var n=this.createExpression(r);return n.compile()}},{key:"createExpression",value:function(r){return new aT(this._grammar,r)}},{key:"getFunction",value:function(r){return this._grammar.functions[r]}},{key:"getTransform",value:function(r){return this._grammar.transforms[r]}},{key:"eval",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.createExpression(r);return i.eval(n)}},{key:"evalSync",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.createExpression(r);return i.evalSync(n)}},{key:"expr",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=r.reduce(function(u,d,l){var f=l<i.length?i[l]:"";return u+=d+f,u},"");return this.createExpression(a)}},{key:"removeOp",value:function(r){this._grammar.elements[r]&&(this._grammar.elements[r].type==="binaryOp"||this._grammar.elements[r].type==="unaryOp")&&delete this._grammar.elements[r]}},{key:"_addGrammarElement",value:function(r,n){this._grammar.elements[r]=n}}]),e}();Jf.exports=new E_;Jf.exports.Jexl=E_});var M_=g(ao=>{"use strict";var lT=ao&&ao.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ao,"__esModule",{value:!0});ao.default=fT;var cT=lT(O_());function fT(){let e=new cT.default.Jexl;return e.addFunction("get",(t,r)=>t.get(r)),e.addFunction("parent",t=>t.parent()),e.addFunction("id",t=>t.id()),e.addFunction("cast",t=>t),e.addFunction("log",t=>(console.log(t),t)),e.addFunction("max",Math.max),e.addFunction("min",Math.min),e.addFunction("sqrt",Math.sqrt),e.addFunction("ceil",Math.ceil),e.addFunction("floor",Math.floor),e.addFunction("round",Math.round),e.addFunction("abs",Math.abs),e.addFunction("log10",Math.log10),e.addFunction("parseInt",Number.parseInt),e.addFunction("parseFloat",Number.parseFloat),e.addFunction("split",(t,r)=>t.split(r)),e.addFunction("charAt",(t,r)=>t.charAt(r)),e.addFunction("charCodeAt",(t,r)=>t.charCodeAt(r)),e.addFunction("codePointAt",(t,r)=>t.codePointAt(r)),e.addFunction("startsWith",(t,r,n)=>t.startsWith(r,n)),e.addFunction("endsWith",(t,r,n)=>t.endsWith(r,n)),e.addFunction("padEnd",(t,r,n)=>t.padEnd(r,n)),e.addFunction("padStart",(t,r,n)=>t.padStart(r,n)),e.addFunction("repeat",(t,r)=>t.repeat(r)),e.addFunction("replace",(t,r,n)=>t.replace(r,n)),e.addFunction("replaceAll",(t,r,n)=>t.replaceAll(r,n)),e.addFunction("slice",(t,r,n)=>t.slice(r,n)),e.addFunction("startsWith",(t,r,n)=>t.startsWith(r,n)),e.addFunction("substring",(t,r,n)=>t.substring(r,n)),e.addFunction("toLowerCase",t=>t.toLowerCase()),e.addFunction("toUpperCase",t=>t.toUpperCase()),e.addFunction("jsonParse",t=>JSON.parse(t)),e.addFunction("trim",t=>t.trim()),e.addFunction("trimEnd",t=>t.trimEnd()),e.addFunction("trimStart",t=>t.trimStart()),e.addFunction("getTag",(t,r)=>{let n=t.get("tags");return n?n[r]:t.get(r)}),e.addBinaryOp("&",15,(t,r)=>t&r),e}});var A_=g(uo=>{"use strict";var dT=uo&&uo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uo,"__esModule",{value:!0});uo.stringToJexlExpression=hT;var pT=dT(M_()),Qf={};function hT(e,t){let r=`nosig|${e}`;if(!Qf[r]){if(!e.startsWith("jexl:"))throw new Error("string does not appear to be in jexl format");let i=e.split("jexl:")[1],o=t?t.compile(i):(0,pT.default)().compile(i);Qf[r]=o}return Qf[r]}});var k_=g(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=ST;var oe=Ge(),mT=A_(),vT=Uf(),_T=rd();function bT(){return!0}var gT={stringArray:oe.types.array(oe.types.string),stringArrayMap:oe.types.map(oe.types.array(oe.types.string)),numberMap:oe.types.map(oe.types.number),boolean:oe.types.boolean,color:oe.types.refinement("Color",oe.types.string,bT),integer:oe.types.integer,number:oe.types.number,string:oe.types.string,text:oe.types.string,fileLocation:vT.FileLocation,frozen:oe.types.frozen()},P_={stringArray:[],stringArrayMap:{},numberMap:{},boolean:!0,color:"black",integer:1,number:1,string:"",text:"",fileLocation:{uri:"/path/to/resource.txt",locationType:"UriLocation"},frozen:{}},ed=e=>({views:{get valueJSON(){return e.value}}}),q_=e=>({views:{get valueJSON(){return JSON.stringify(e.value)}}}),T_={fileLocation:q_,number:ed,integer:ed,boolean:ed,frozen:q_,stringArray:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t){e.value.push(t)},removeAtIndex(t){e.value.splice(t,1)},setAtIndex(t,r){e.value[t]=r}}}),stringArrayMap:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t,r){e.value.set(t,r)},remove(t){e.value.delete(t)},addToKey(t,r){let n=e.value.get(t);if(!n)throw new Error(`${t} not found`);n.push(r)},removeAtKeyIndex(t,r){let n=e.value.get(t);if(!n)throw new Error(`${t} not found`);n.splice(r,1)},setAtKeyIndex(t,r,n){let i=e.value.get(t);if(!i)throw new Error(`${t} not found`);i[r]=n}}}),numberMap:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t,r){e.value.set(t,r)},remove(t){e.value.delete(t)}}})},yT=oe.types.refinement("JexlString",oe.types.string,e=>e.startsWith("jexl:"));function wT(e){return e?.toJSON?e.toJSON():`"${e}"`}function ST(e,{description:t="",model:r,type:n,defaultValue:i,contextVariable:o=[]}){if(!n)throw new Error("type name required");if(r||(r=gT[n]),!r)throw new Error(`no builtin config slot type "${n}", and no 'model' param provided`);if(i===void 0)throw new Error("no 'defaultValue' provided");let a=`${e.charAt(0).toUpperCase()}${e.slice(1)}ConfigSlot`,u=oe.types.model(a,{name:oe.types.literal(e),description:oe.types.literal(t),type:oe.types.literal(n),value:oe.types.optional(oe.types.union(yT,r),i)}).volatile(()=>({contextVariable:o})).views(f=>({get isCallback(){return String(f.value).startsWith("jexl:")}})).views(f=>({get expr(){if(f.isCallback){let{pluginManager:s}=(0,_T.getEnv)(f);return!s&&typeof jest>"u"&&console.warn("no pluginManager detected on config env (if you dynamically instantiate a config, for example in renderProps for your display model, check that you add the env argument)"),(0,mT.stringToJexlExpression)(String(f.value),s?.jexl)}return{evalSync:()=>f.value}},get valueJSON(){if(!f.isCallback)return wT(f.value)}})).preProcessSnapshot(f=>typeof f=="object"&&f.name===e?f:{name:e,description:t,type:n,value:f}).postProcessSnapshot(f=>typeof f.value=="object"?JSON.stringify(f.value)!==JSON.stringify(i)?f.value:void 0:f.value!==i?f.value:void 0).actions(f=>({set(s){f.value=s},reset(){f.value=i},convertToCallback(){f.isCallback||(f.value=`jexl:${f.valueJSON||"''"}`)},convertToValue(){if(f.isCallback){try{let s=f.expr.evalSync();if(s!==void 0){f.value=s;return}}catch{}if(f.value=i,!(n in P_))throw new Error(`no fallbackDefault defined for type ${n}`);f.value=P_[n]}}}));T_[n]&&(u=u.extend(T_[n]));let l=oe.types.optional(u,{name:e,type:n,description:t,value:i});return Object.defineProperty(l,"isJBrowseConfigurationSlot",{value:!0}),l}});var j_=g(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.getSubType=nd;Sr.getUnionSubTypes=C_;Sr.getPropertyType=xT;Sr.getDefaultValue=ET;Sr.getEnumerationValues=OT;Sr.resolveLateType=MT;var wr=Ge();function nd(e){let t;if((0,wr.isOptionalType)(e))t=e._subtype||e.type;else if((0,wr.isArrayType)(e)||(0,wr.isMapType)(e))t=e._subtype||e._subType||e.subType;else{if(typeof e.getSubType=="function")return e.getSubType();throw new TypeError("unsupported mst type")}if(!t)throw new Error("failed to get subtype");return t}function C_(e){if(!(0,wr.isUnionType)(e))throw new TypeError("not an MST union type");let t=e._types||e.types||nd(e)._types||nd(e).types;if(!t)throw new Error("failed to extract subtypes from mst union");return t}function xT(e,t){return e.properties[t]}function ET(e){if(!(0,wr.isOptionalType)(e))throw new TypeError("type must be an optional type");return e._defaultValue||e.defaultValue}function OT(e){return C_(e).map(r=>r.value)}function MT(e){return!(0,wr.isUnionType)(e)&&!(0,wr.isArrayType)(e)&&(0,wr.isLateType)(e)?e.getSubType():e}});var id=g(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.readConfObject=Ha;ir.getConf=AT;ir.getTypeNamesFromExplicitlyTypedUnion=I_;ir.isBareConfigurationSchemaType=R_;ir.isConfigurationSchemaType=Hn;ir.isConfigurationModel=F_;ir.isConfigurationSlotType=PT;var me=Ge(),xr=j_();function Ha(e,t,r={}){if(!t)return JSON.parse(JSON.stringify((0,me.getSnapshot)(e)));if(typeof t=="string"){let n=e[t];if(!n&&(0,me.isStateTreeNode)(e)&&(0,me.isMapType)((0,me.getType)(e))&&(n=e.get(t)),!n)return;let i=n.expr?n.expr.evalSync(r):n;return(0,me.isStateTreeNode)(i)?JSON.parse(JSON.stringify((0,me.getSnapshot)(i))):i}if(Array.isArray(t)){let n=t[0];if(t.length>1){let i=t.slice(1),o=e[n];return!o&&(0,me.isStateTreeNode)(e)&&(0,me.isMapType)((0,me.getType)(e))&&(o=e.get(n)),o?Ha(o,i,r):void 0}return Ha(e,n,r)}throw new TypeError("slotPath must be a string or array")}function AT(e,t,r){let{configuration:n}=e;if(F_(n))return Ha(n,t,r);throw new TypeError("cannot getConf on this model, it has no configuration")}function I_(e){if((0,me.isType)(e)&&(e=(0,xr.resolveLateType)(e),(0,me.isUnionType)(e))){let t=[];return(0,xr.getUnionSubTypes)(e).forEach(r=>{r=(0,xr.resolveLateType)(r);let n=I_(r);if(n.length||(n=[(0,xr.getDefaultValue)(r).type]),!n[0])throw new Error(`invalid config schema type ${r}`);t.push(...n)}),t}return[]}function R_(e){return!!((0,me.isType)(e)&&((0,me.isModelType)(e)&&("isJBrowseConfigurationSchema"in e||e.name.includes("ConfigurationSchema"))||(0,me.isLateType)(e)))}function Hn(e){return(0,me.isType)(e)?R_(e)?!0:(0,me.isUnionType)(e)?(0,xr.getUnionSubTypes)(e).every(t=>Hn(t)||t.name==="undefined"):!!((0,me.isOptionalType)(e)&&Hn((0,xr.getSubType)(e))||(0,me.isArrayType)(e)&&Hn((0,xr.getSubType)(e))||(0,me.isMapType)(e)&&Hn((0,xr.getSubType)(e))):!1}function F_(e){return(0,me.isStateTreeNode)(e)&&Hn((0,me.getType)(e))}function PT(e){return typeof e=="object"&&e!==null&&"isJBrowseConfigurationSlot"in e}});var N_=g(Vn=>{"use strict";var qT=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ConfigurationSchema=RT;Vn.ConfigurationReference=FT;var pt=Ge(),L_=Uf(),TT=qT(k_()),D_=id();function kT(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null&&Object.keys(e).length===0}function CT(e){return Array.isArray(e)&&e.length===0}function jT(e,t,r={}){var n;if(typeof e!="string")throw new Error("first arg must be string name of the model that this config schema goes with");let i=t,o=r;return!((n=r.baseConfiguration)===null||n===void 0)&&n.jbrowseSchemaDefinition&&(i={...r.baseConfiguration.jbrowseSchemaDefinition,...i},o={...r.baseConfiguration.jbrowseSchemaOptions,...r},o.baseConfiguration=void 0),{schemaDefinition:i,options:o}}function IT(e,t,r){let n={},i;if(r.explicitlyTyped&&(n.type=pt.types.optional(pt.types.literal(e),e)),r.explicitIdentifier&&r.implicitIdentifier)throw new Error(`Cannot have both explicit and implicit identifiers in ${e}`);r.explicitIdentifier?typeof r.explicitIdentifier=="string"?(n[r.explicitIdentifier]=pt.types.identifier,i=r.explicitIdentifier):(n.id=pt.types.identifier,i="id"):r.implicitIdentifier&&(typeof r.implicitIdentifier=="string"?(n[r.implicitIdentifier]=L_.ElementId,i=r.implicitIdentifier):(n.id=L_.ElementId,i="id"));let o={isJBrowseConfigurationSchema:!0,jbrowseSchema:{modelName:e,definition:t,options:r}};Object.entries(t).forEach(([f,s])=>{if((0,pt.isType)(s)&&(0,pt.isLateType)(s)||(0,D_.isConfigurationSchemaType)(s))n[f]=s;else if(typeof s=="string"||typeof s=="number")o[f]=s;else if(typeof s=="object"){if(!s.type)throw new Error(`no type set for config slot ${e}.${f}`);try{n[f]=(0,TT.default)(f,s)}catch(c){throw new Error(`invalid config slot definition for ${e}.${f}: ${c}`)}}else throw new Error(`invalid configuration schema definition, "${f}" must be either a valid configuration slot definition, a constant, or a nested configuration schema`)});let a=pt.types.model(`${e}ConfigurationSchema`,n).actions(f=>({setSubschema(s,c){if(!(0,D_.isConfigurationSchemaType)(n[s]))throw new Error(`${s} is not a subschema, cannot replace`);let p=(0,pt.isStateTreeNode)(c)?c:n[s].create(c);return f[s]=p,p}}));Object.keys(o).length&&(a=a.volatile(()=>o)),r.actions&&(a=a.actions(r.actions)),r.views&&(a=a.views(r.views)),r.extend&&(a=a.extend(r.extend));let u=i?{[i]:"placeholderId"}:{},d=r.explicitlyTyped?{type:e,...u}:u,l=(0,pt.getSnapshot)(a.create(d));return a=a.postProcessSnapshot(f=>{let s={},c=!0;for(let[p,m]of Object.entries(f))c&&(typeof l[p]=="object"&&typeof m=="object"?JSON.stringify(l[p])!==JSON.stringify(m)&&(c=!1):l[p]!==m&&(c=!1)),m!==void 0&&o[p]===void 0&&!kT(m)&&!CT(m)&&(s[p]=m);return c?{}:s}),r.preProcessSnapshot&&(a=a.preProcessSnapshot(r.preProcessSnapshot)),pt.types.optional(a,d)}function RT(e,t,r){let{schemaDefinition:n,options:i}=jT(e,t,r),o=IT(e,n,i);return o.isJBrowseConfigurationSchema=!0,o.jbrowseSchemaDefinition=n,o.jbrowseSchemaOptions=i,o}function FT(e){return pt.types.union(pt.types.reference(e),e)}});var z_=g(Et=>{"use strict";var LT=Et&&Et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),DT=Et&&Et.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&LT(t,e,r)};Object.defineProperty(Et,"__esModule",{value:!0});Et.ConfigurationReference=Et.ConfigurationSchema=void 0;var B_=N_();Object.defineProperty(Et,"ConfigurationSchema",{enumerable:!0,get:function(){return B_.ConfigurationSchema}});Object.defineProperty(Et,"ConfigurationReference",{enumerable:!0,get:function(){return B_.ConfigurationReference}});DT(id(),Et)});var H_=g(so=>{"use strict";var NT=so&&so.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(so,"__esModule",{value:!0});var BT=NT($v()),od=z_(),ad=class{constructor(t){this.pluginManager=t,this.adapterCache=new BT.default({maxSize:15})}loadTextSearchAdapters(t){let r=this.pluginManager;return this.relevantAdapters(t).map(n=>{let i=(0,od.readConfObject)(n,"textSearchAdapterId"),o=this.adapterCache.get(i);if(o)return o;{let{AdapterClass:a}=r.getTextSearchAdapterType(n.type),u=new a(n,void 0,r);return this.adapterCache.set(i,u),u}})}relevantAdapters(t){var r,n;let i=this.pluginManager,{aggregateTextSearchAdapters:o}=(r=i.rootModel)===null||r===void 0?void 0:r.jbrowse,{tracks:a}=(n=i.rootModel)===null||n===void 0?void 0:n.session,{assemblyName:u}=t;return[...this.getAdaptersWithAssembly(u,o),...this.getTrackAdaptersWithAssembly(u,a)]}getAdaptersWithAssembly(t,r){return r.filter(n=>{var i;return(i=(0,od.readConfObject)(n,"assemblyNames"))===null||i===void 0?void 0:i.includes(t)})}getTrackAdaptersWithAssembly(t,r){return r.filter(n=>{var i;return(i=(0,od.readConfObject)(n,["textSearching","textSearchAdapter","assemblyNames"]))===null||i===void 0?void 0:i.includes(t)}).map(n=>n.textSearching.textSearchAdapter)}async search(t,r,n){let i=this.loadTextSearchAdapters(r),o=await Promise.all(i.map(a=>a.searchIndex(t)));return this.sortResults(o.flat(),n)}sortResults(t,r){return r(t.sort((n,i)=>-i.getLabel().localeCompare(n.getLabel()))).sort((n,i)=>n.getScore()-i.getScore())}};so.default=ad});var Va=g(H=>{"use strict";var zT=H&&H.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),HT=H&&H.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zT(t,e,r)},VT=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H,"__esModule",{value:!0});H.TextSearchManager=H.RetryError=H.AuthNeededError=void 0;H.isViewContainer=UT;H.isSessionModel=Er;H.isSessionModelWithConfigEditing=GT;H.isSessionWithAddTracks=$T;H.isSessionWithShareURL=YT;H.isSessionModelWithWidgets=XT;H.isSessionModelWithConnections=ZT;H.isSessionModelWithConnectionEditing=KT;H.isSessionWithSessionPlugins=JT;H.isSelectionContainer=QT;H.isViewModel=ek;H.isTrackModel=tk;H.isDisplayModel=rk;H.isTrackViewModel=nk;H.isAppRootModel=ik;H.isRootModelWithInternetAccounts=ok;H.isAbstractMenuManager=ak;H.isUriLocation=uk;H.isLocalPathLocation=sk;H.isBlobLocation=lk;H.isAuthNeededException=ck;H.isRetryException=fk;var WT=Ge();HT(Gv(),H);function UT(e){return(0,WT.isStateTreeNode)(e)&&"removeView"in e&&"addView"in e&&"views"in e}function Er(e){return typeof e=="object"&&e!==null&&"rpcManager"in e&&"configuration"in e}function GT(e){return Er(e)&&"editConfiguration"in e}function $T(e){return Er(e)&&"addTrackConf"in e&&!e.disableAddTracks}function YT(e){return Er(e)&&"shareURL"in e&&!!e.shareURL}function XT(e){return Er(e)&&"widgets"in e}function ZT(e){return Er(e)&&"makeConnection"in e}function KT(e){return Er(e)&&"addConnectionConf"in e}function JT(e){return Er(e)&&"sessionPlugins"in e}function QT(e){return typeof e=="object"&&e!==null&&"selection"in e&&"setSelection"in e}function ek(e){return typeof e=="object"&&e!==null&&"width"in e&&"setWidth"in e}function tk(e){return typeof e=="object"&&e!==null&&"configuration"in e&&e.configuration.trackId}function rk(e){return typeof e=="object"&&e!==null&&"configuration"in e&&e.configuration.displayId}function nk(e){return typeof e=="object"&&e!==null&&"showTrack"in e&&"hideTrack"in e}function ik(e){return typeof e=="object"&&e!==null&&"findAppropriateInternetAccount"in e}function ok(e){return typeof e=="object"&&e!==null&&"internetAccounts"in e&&"findAppropriateInternetAccount"in e}function ak(e){return typeof e=="object"&&e!==null&&"appendMenu"in e&&"appendToSubMenu"in e}function uk(e){return typeof e=="object"&&e!==null&&"uri"in e&&!!e.uri}function sk(e){return typeof e=="object"&&e!==null&&"localPath"in e&&!!e.localPath}function lk(e){return typeof e=="object"&&e!==null&&"blobId"in e&&!!e.blobId}var ud=class e extends Error{constructor(t,r){super(t),this.message=t,this.url=r,this.name="AuthNeededError",Object.setPrototypeOf(this,e.prototype)}};H.AuthNeededError=ud;var sd=class extends Error{constructor(t,r){super(t),this.message=t,this.internetAccountId=r,this.name="RetryError"}};H.RetryError=sd;function ck(e){return e instanceof Error&&(e.name==="AuthNeededError"||e.url!==void 0)}function fk(e){return e.name==="RetryError"||e.internetAccountId!==void 0}var dk=H_();Object.defineProperty(H,"TextSearchManager",{enumerable:!0,get:function(){return VT(dk).default}})});var K=g(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.isFunction=void 0;function pk(e){return typeof e=="function"}Wa.isFunction=pk});var Or=g(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.createErrorClass=void 0;function hk(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}Ua.createErrorClass=hk});var ld=g(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.UnsubscriptionError=void 0;var mk=Or();Ga.UnsubscriptionError=mk.createErrorClass(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}})});var or=g($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.arrRemove=void 0;function vk(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}$a.arrRemove=vk});var nt=g(Ze=>{"use strict";var V_=Ze&&Ze.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},W_=Ze&&Ze.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},U_=Ze&&Ze.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ze,"__esModule",{value:!0});Ze.isSubscription=Ze.EMPTY_SUBSCRIPTION=Ze.Subscription=void 0;var lo=K(),cd=ld(),G_=or(),fd=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=V_(a),d=u.next();!d.done;d=u.next()){var l=d.value;l.remove(this)}}catch(v){t={error:v}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}else a.remove(this);var f=this.initialTeardown;if(lo.isFunction(f))try{f()}catch(v){o=v instanceof cd.UnsubscriptionError?v.errors:[v]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var c=V_(s),p=c.next();!p.done;p=c.next()){var m=p.value;try{$_(m)}catch(v){o=o??[],v instanceof cd.UnsubscriptionError?o=U_(U_([],W_(o)),W_(v.errors)):o.push(v)}}}catch(v){n={error:v}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}if(o)throw new cd.UnsubscriptionError(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)$_(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&G_.arrRemove(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&G_.arrRemove(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();Ze.Subscription=fd;Ze.EMPTY_SUBSCRIPTION=fd.EMPTY;function _k(e){return e instanceof fd||e&&"closed"in e&&lo.isFunction(e.remove)&&lo.isFunction(e.add)&&lo.isFunction(e.unsubscribe)}Ze.isSubscription=_k;function $_(e){lo.isFunction(e)?e():e.unsubscribe()}});var Wn=g(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.config=void 0;Ya.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var dd=g(Ft=>{"use strict";var Y_=Ft&&Ft.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},X_=Ft&&Ft.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.timeoutProvider=void 0;Ft.timeoutProvider={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Ft.timeoutProvider.delegate;return i?.setTimeout?i.setTimeout.apply(i,X_([e,t],Y_(r))):setTimeout.apply(void 0,X_([e,t],Y_(r)))},clearTimeout:function(e){var t=Ft.timeoutProvider.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0}});var pd=g(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.reportUnhandledError=void 0;var bk=Wn(),gk=dd();function yk(e){gk.timeoutProvider.setTimeout(function(){var t=bk.config.onUnhandledError;if(t)t(e);else throw e})}Xa.reportUnhandledError=yk});var Pe=g(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.noop=void 0;function wk(){}Za.noop=wk});var Z_=g(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.createNotification=Lt.nextNotification=Lt.errorNotification=Lt.COMPLETE_NOTIFICATION=void 0;Lt.COMPLETE_NOTIFICATION=function(){return Ka("C",void 0,void 0)}();function Sk(e){return Ka("E",void 0,e)}Lt.errorNotification=Sk;function xk(e){return Ka("N",e,void 0)}Lt.nextNotification=xk;function Ka(e,t,r){return{kind:e,value:t,error:r}}Lt.createNotification=Ka});var Ja=g(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.captureError=Un.errorContext=void 0;var K_=Wn(),fn=null;function Ek(e){if(K_.config.useDeprecatedSynchronousErrorHandling){var t=!fn;if(t&&(fn={errorThrown:!1,error:null}),e(),t){var r=fn,n=r.errorThrown,i=r.error;if(fn=null,n)throw i}}else e()}Un.errorContext=Ek;function Ok(e){K_.config.useDeprecatedSynchronousErrorHandling&&fn&&(fn.errorThrown=!0,fn.error=e)}Un.captureError=Ok});var Gn=g(Ot=>{"use strict";var e0=Ot&&Ot.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.EMPTY_OBSERVER=Ot.SafeSubscriber=Ot.Subscriber=void 0;var Mk=K(),J_=nt(),_d=Wn(),Ak=pd(),Q_=Pe(),hd=Z_(),Pk=dd(),qk=Ja(),t0=function(e){e0(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,J_.isSubscription(r)&&r.add(n)):n.destination=Ot.EMPTY_OBSERVER,n}return t.create=function(r,n,i){return new r0(r,n,i)},t.prototype.next=function(r){this.isStopped?vd(hd.nextNotification(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?vd(hd.errorNotification(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?vd(hd.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(J_.Subscription);Ot.Subscriber=t0;var Tk=Function.prototype.bind;function md(e,t){return Tk.call(e,t)}var kk=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Qa(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Qa(n)}else Qa(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Qa(r)}},e}(),r0=function(e){e0(t,e);function t(r,n,i){var o=e.call(this)||this,a;if(Mk.isFunction(r)||!r)a={next:r??void 0,error:n??void 0,complete:i??void 0};else{var u;o&&_d.config.useDeprecatedNextContext?(u=Object.create(r),u.unsubscribe=function(){return o.unsubscribe()},a={next:r.next&&md(r.next,u),error:r.error&&md(r.error,u),complete:r.complete&&md(r.complete,u)}):a=r}return o.destination=new kk(a),o}return t}(t0);Ot.SafeSubscriber=r0;function Qa(e){_d.config.useDeprecatedSynchronousErrorHandling?qk.captureError(e):Ak.reportUnhandledError(e)}function Ck(e){throw e}function vd(e,t){var r=_d.config.onStoppedNotification;r&&Pk.timeoutProvider.setTimeout(function(){return r(e,t)})}Ot.EMPTY_OBSERVER={closed:!0,next:Q_.noop,error:Ck,complete:Q_.noop}});var co=g(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.observable=void 0;eu.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}()});var qe=g(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.identity=void 0;function jk(e){return e}tu.identity=jk});var fo=g($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.pipeFromArray=$n.pipe=void 0;var Ik=qe();function Rk(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n0(e)}$n.pipe=Rk;function n0(e){return e.length===0?Ik.identity:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}$n.pipeFromArray=n0});var Q=g(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.Observable=void 0;var gd=Gn(),Fk=nt(),Lk=co(),Dk=fo(),Nk=Wn(),bd=K(),Bk=Ja(),zk=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Vk(t)?t:new gd.SafeSubscriber(t,r,n);return Bk.errorContext(function(){var a=i,u=a.operator,d=a.source;o.add(u?u.call(o,d):d?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=i0(r),new r(function(i,o){var a=new gd.SafeSubscriber({next:function(u){try{t(u)}catch(d){o(d),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[Lk.observable]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Dk.pipeFromArray(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=i0(t),new t(function(n,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();ru.Observable=zk;function i0(e){var t;return(t=e??Nk.config.Promise)!==null&&t!==void 0?t:Promise}function Hk(e){return e&&bd.isFunction(e.next)&&bd.isFunction(e.error)&&bd.isFunction(e.complete)}function Vk(e){return e&&e instanceof gd.Subscriber||Hk(e)&&Fk.isSubscription(e)}});var j=g(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.operate=Yn.hasLift=void 0;var Wk=K();function o0(e){return Wk.isFunction(e?.lift)}Yn.hasLift=o0;function Uk(e){return function(t){if(o0(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}Yn.operate=Uk});var F=g(Mr=>{"use strict";var Gk=Mr&&Mr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Mr,"__esModule",{value:!0});Mr.OperatorSubscriber=Mr.createOperatorSubscriber=void 0;var $k=Gn();function Yk(e,t,r,n,i){return new a0(e,t,r,n,i)}Mr.createOperatorSubscriber=Yk;var a0=function(e){Gk(t,e);function t(r,n,i,o,a,u){var d=e.call(this,r)||this;return d.onFinalize=a,d.shouldUnsubscribe=u,d._next=n?function(l){try{n(l)}catch(f){r.error(f)}}:e.prototype._next,d._error=o?function(l){try{o(l)}catch(f){r.error(f)}finally{this.unsubscribe()}}:e.prototype._error,d._complete=i?function(){try{i()}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,d}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}($k.Subscriber);Mr.OperatorSubscriber=a0});var yd=g(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.refCount=void 0;var Xk=j(),Zk=F();function Kk(){return Xk.operate(function(e,t){var r=null;e._refCount++;var n=Zk.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){r=null;return}var i=e._connection,o=r;r=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(r=e.connect())})}nu.refCount=Kk});var po=g(Xn=>{"use strict";var Jk=Xn&&Xn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.ConnectableObservable=void 0;var Qk=Q(),u0=nt(),eC=yd(),tC=F(),rC=j(),nC=function(e){Jk(t,e);function t(r,n){var i=e.call(this)||this;return i.source=r,i.subjectFactory=n,i._subject=null,i._refCount=0,i._connection=null,rC.hasLift(r)&&(i.lift=r.lift),i}return t.prototype._subscribe=function(r){return this.getSubject().subscribe(r)},t.prototype.getSubject=function(){var r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var r=this._connection;this._subject=this._connection=null,r?.unsubscribe()},t.prototype.connect=function(){var r=this,n=this._connection;if(!n){n=this._connection=new u0.Subscription;var i=this.getSubject();n.add(this.source.subscribe(tC.createOperatorSubscriber(i,void 0,function(){r._teardown(),i.complete()},function(o){r._teardown(),i.error(o)},function(){return r._teardown()}))),n.closed&&(this._connection=null,n=u0.Subscription.EMPTY)}return n},t.prototype.refCount=function(){return eC.refCount()(this)},t}(Qk.Observable);Xn.ConnectableObservable=nC});var s0=g(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.performanceTimestampProvider=void 0;ho.performanceTimestampProvider={now:function(){return(ho.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}});var wd=g(Mt=>{"use strict";var l0=Mt&&Mt.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},c0=Mt&&Mt.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.animationFrameProvider=void 0;var iC=nt();Mt.animationFrameProvider={schedule:function(e){var t=requestAnimationFrame,r=cancelAnimationFrame,n=Mt.animationFrameProvider.delegate;n&&(t=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=t(function(o){r=void 0,e(o)});return new iC.Subscription(function(){return r?.(i)})},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Mt.animationFrameProvider.delegate;return(r?.requestAnimationFrame||requestAnimationFrame).apply(void 0,c0([],l0(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Mt.animationFrameProvider.delegate;return(r?.cancelAnimationFrame||cancelAnimationFrame).apply(void 0,c0([],l0(e)))},delegate:void 0}});var p0=g(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.animationFrames=void 0;var oC=Q(),aC=s0(),f0=wd();function uC(e){return e?d0(e):sC}iu.animationFrames=uC;function d0(e){return new oC.Observable(function(t){var r=e||aC.performanceTimestampProvider,n=r.now(),i=0,o=function(){t.closed||(i=f0.animationFrameProvider.requestAnimationFrame(function(a){i=0;var u=r.now();t.next({timestamp:e?u:a,elapsed:u-n}),o()}))};return o(),function(){i&&f0.animationFrameProvider.cancelAnimationFrame(i)}})}var sC=d0()});var Sd=g(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.ObjectUnsubscribedError=void 0;var lC=Or();ou.ObjectUnsubscribedError=lC.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})});var Te=g(Dt=>{"use strict";var m0=Dt&&Dt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cC=Dt&&Dt.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.AnonymousSubject=Dt.Subject=void 0;var h0=Q(),Ed=nt(),fC=Sd(),dC=or(),xd=Ja(),v0=function(e){m0(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new Od(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new fC.ObjectUnsubscribedError},t.prototype.next=function(r){var n=this;xd.errorContext(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=cC(n.currentObservers),u=a.next();!u.done;u=a.next()){var d=u.value;d.next(r)}}catch(l){i={error:l}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;xd.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;xd.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,a=i.isStopped,u=i.observers;return o||a?Ed.EMPTY_SUBSCRIPTION:(this.currentObservers=null,u.push(r),new Ed.Subscription(function(){n.currentObservers=null,dC.arrRemove(u,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?r.error(o):a&&r.complete()},t.prototype.asObservable=function(){var r=new h0.Observable;return r.source=this,r},t.create=function(r,n){return new Od(r,n)},t}(h0.Observable);Dt.Subject=v0;var Od=function(e){m0(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:Ed.EMPTY_SUBSCRIPTION},t}(v0);Dt.AnonymousSubject=Od});var Md=g(Zn=>{"use strict";var pC=Zn&&Zn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Zn,"__esModule",{value:!0});Zn.BehaviorSubject=void 0;var hC=Te(),mC=function(e){pC(t,e);function t(r){var n=e.call(this)||this;return n._value=r,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var n=e.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},t.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},t.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},t}(hC.Subject);Zn.BehaviorSubject=mC});var au=g(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.dateTimestampProvider=void 0;mo.dateTimestampProvider={now:function(){return(mo.dateTimestampProvider.delegate||Date).now()},delegate:void 0}});var uu=g(Kn=>{"use strict";var vC=Kn&&Kn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.ReplaySubject=void 0;var _C=Te(),bC=au(),gC=function(e){vC(t,e);function t(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=bC.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=r,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,r),o._windowTime=Math.max(1,n),o}return t.prototype.next=function(r){var n=this,i=n.isStopped,o=n._buffer,a=n._infiniteTimeWindow,u=n._timestampProvider,d=n._windowTime;i||(o.push(r),!a&&o.push(u.now()+d)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this,o=i._infiniteTimeWindow,a=i._buffer,u=a.slice(),d=0;d<u.length&&!r.closed;d+=o?1:2)r.next(u[d]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,o=r._buffer,a=r._infiniteTimeWindow,u=(a?1:2)*n;if(n<1/0&&u<o.length&&o.splice(0,o.length-u),!a){for(var d=i.now(),l=0,f=1;f<o.length&&o[f]<=d;f+=2)l=f;l&&o.splice(0,l+1)}},t}(_C.Subject);Kn.ReplaySubject=gC});var su=g(Jn=>{"use strict";var yC=Jn&&Jn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Jn,"__esModule",{value:!0});Jn.AsyncSubject=void 0;var wC=Te(),SC=function(e){yC(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._value=null,r._hasValue=!1,r._isComplete=!1,r}return t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n._hasValue,a=n._value,u=n.thrownError,d=n.isStopped,l=n._isComplete;i?r.error(u):(d||l)&&(o&&r.next(a),r.complete())},t.prototype.next=function(r){this.isStopped||(this._value=r,this._hasValue=!0)},t.prototype.complete=function(){var r=this,n=r._hasValue,i=r._value,o=r._isComplete;o||(this._isComplete=!0,n&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},t}(wC.Subject);Jn.AsyncSubject=SC});var _0=g(Qn=>{"use strict";var xC=Qn&&Qn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.Action=void 0;var EC=nt(),OC=function(e){xC(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return n===void 0&&(n=0),this},t}(EC.Subscription);Qn.Action=OC});var y0=g(Nt=>{"use strict";var b0=Nt&&Nt.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},g0=Nt&&Nt.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.intervalProvider=void 0;Nt.intervalProvider={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Nt.intervalProvider.delegate;return i?.setInterval?i.setInterval.apply(i,g0([e,t],b0(r))):setInterval.apply(void 0,g0([e,t],b0(r)))},clearInterval:function(e){var t=Nt.intervalProvider.delegate;return(t?.clearInterval||clearInterval)(e)},delegate:void 0}});var ti=g(ei=>{"use strict";var MC=ei&&ei.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ei,"__esModule",{value:!0});ei.AsyncAction=void 0;var AC=_0(),w0=y0(),PC=or(),qC=function(e){MC(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return t.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,n),this},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),w0.intervalProvider.setInterval(r.flush.bind(r,this),i)},t.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&w0.intervalProvider.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,PC.arrRemove(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(AC.Action);ei.AsyncAction=qC});var x0=g(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.TestTools=ri.Immediate=void 0;var TC=1,Ad,lu={};function S0(e){return e in lu?(delete lu[e],!0):!1}ri.Immediate={setImmediate:function(e){var t=TC++;return lu[t]=!0,Ad||(Ad=Promise.resolve()),Ad.then(function(){return S0(t)&&e()}),t},clearImmediate:function(e){S0(e)}};ri.TestTools={pending:function(){return Object.keys(lu).length}}});var O0=g(Bt=>{"use strict";var kC=Bt&&Bt.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},CC=Bt&&Bt.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.immediateProvider=void 0;var E0=x0(),jC=E0.Immediate.setImmediate,IC=E0.Immediate.clearImmediate;Bt.immediateProvider={setImmediate:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Bt.immediateProvider.delegate;return(r?.setImmediate||jC).apply(void 0,CC([],kC(e)))},clearImmediate:function(e){var t=Bt.immediateProvider.delegate;return(t?.clearImmediate||IC)(e)},delegate:void 0}});var A0=g(ni=>{"use strict";var RC=ni&&ni.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ni,"__esModule",{value:!0});ni.AsapAction=void 0;var FC=ti(),M0=O0(),LC=function(e){RC(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=M0.immediateProvider.setImmediate(r.flush.bind(r,void 0))))},t.prototype.recycleAsyncId=function(r,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var a=r.actions;n!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==n&&(M0.immediateProvider.clearImmediate(n),r._scheduled===n&&(r._scheduled=void 0))},t}(FC.AsyncAction);ni.AsapAction=LC});var Pd=g(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.Scheduler=void 0;var DC=au(),NC=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=DC.dateTimestampProvider.now,e}();cu.Scheduler=NC});var oi=g(ii=>{"use strict";var BC=ii&&ii.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ii,"__esModule",{value:!0});ii.AsyncScheduler=void 0;var P0=Pd(),zC=function(e){BC(t,e);function t(r,n){n===void 0&&(n=P0.Scheduler.now);var i=e.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},t}(P0.Scheduler);ii.AsyncScheduler=zC});var q0=g(ai=>{"use strict";var HC=ai&&ai.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ai,"__esModule",{value:!0});ai.AsapScheduler=void 0;var VC=oi(),WC=function(e){HC(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;r=r||i.shift();do if(o=r.execute(r.state,r.delay))break;while((r=i[0])&&r.id===n&&i.shift());if(this._active=!1,o){for(;(r=i[0])&&r.id===n&&i.shift();)r.unsubscribe();throw o}},t}(VC.AsyncScheduler);ai.AsapScheduler=WC});var T0=g(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.asap=dn.asapScheduler=void 0;var UC=A0(),GC=q0();dn.asapScheduler=new GC.AsapScheduler(UC.AsapAction);dn.asap=dn.asapScheduler});var Ke=g(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.async=pn.asyncScheduler=void 0;var $C=ti(),YC=oi();pn.asyncScheduler=new YC.AsyncScheduler($C.AsyncAction);pn.async=pn.asyncScheduler});var k0=g(ui=>{"use strict";var XC=ui&&ui.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ui,"__esModule",{value:!0});ui.QueueAction=void 0;var ZC=ti(),KC=function(e){XC(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.schedule=function(r,n){return n===void 0&&(n=0),n>0?e.prototype.schedule.call(this,r,n):(this.delay=n,this.state=r,this.scheduler.flush(this),this)},t.prototype.execute=function(r,n){return n>0||this.closed?e.prototype.execute.call(this,r,n):this._execute(r,n)},t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.flush(this),0)},t}(ZC.AsyncAction);ui.QueueAction=KC});var C0=g(si=>{"use strict";var JC=si&&si.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(si,"__esModule",{value:!0});si.QueueScheduler=void 0;var QC=oi(),ej=function(e){JC(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(QC.AsyncScheduler);si.QueueScheduler=ej});var j0=g(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.queue=hn.queueScheduler=void 0;var tj=k0(),rj=C0();hn.queueScheduler=new rj.QueueScheduler(tj.QueueAction);hn.queue=hn.queueScheduler});var R0=g(li=>{"use strict";var nj=li&&li.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(li,"__esModule",{value:!0});li.AnimationFrameAction=void 0;var ij=ti(),I0=wd(),oj=function(e){nj(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.scheduler=r,i.work=n,i}return t.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,r,n,i):(r.actions.push(this),r._scheduled||(r._scheduled=I0.animationFrameProvider.requestAnimationFrame(function(){return r.flush(void 0)})))},t.prototype.recycleAsyncId=function(r,n,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,r,n,i);var a=r.actions;n!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==n&&(I0.animationFrameProvider.cancelAnimationFrame(n),r._scheduled=void 0)},t}(ij.AsyncAction);li.AnimationFrameAction=oj});var F0=g(ci=>{"use strict";var aj=ci&&ci.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ci,"__esModule",{value:!0});ci.AnimationFrameScheduler=void 0;var uj=oi(),sj=function(e){aj(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(r){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i=this.actions,o;r=r||i.shift();do if(o=r.execute(r.state,r.delay))break;while((r=i[0])&&r.id===n&&i.shift());if(this._active=!1,o){for(;(r=i[0])&&r.id===n&&i.shift();)r.unsubscribe();throw o}},t}(uj.AsyncScheduler);ci.AnimationFrameScheduler=sj});var L0=g(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.animationFrame=mn.animationFrameScheduler=void 0;var lj=R0(),cj=F0();mn.animationFrameScheduler=new cj.AnimationFrameScheduler(lj.AnimationFrameAction);mn.animationFrame=mn.animationFrameScheduler});var B0=g(Ar=>{"use strict";var D0=Ar&&Ar.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ar,"__esModule",{value:!0});Ar.VirtualAction=Ar.VirtualTimeScheduler=void 0;var fj=ti(),dj=nt(),pj=oi(),hj=function(e){D0(t,e);function t(r,n){r===void 0&&(r=N0),n===void 0&&(n=1/0);var i=e.call(this,r,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var r=this,n=r.actions,i=r.maxFrames,o,a;(a=n[0])&&a.delay<=i&&(n.shift(),this.frame=a.delay,!(o=a.execute(a.state,a.delay))););if(o){for(;a=n.shift();)a.unsubscribe();throw o}},t.frameTimeFactor=10,t}(pj.AsyncScheduler);Ar.VirtualTimeScheduler=hj;var N0=function(e){D0(t,e);function t(r,n,i){i===void 0&&(i=r.index+=1);var o=e.call(this,r,n)||this;return o.scheduler=r,o.work=n,o.index=i,o.active=!0,o.index=r.index=i,o}return t.prototype.schedule=function(r,n){if(n===void 0&&(n=0),Number.isFinite(n)){if(!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)}else return dj.Subscription.EMPTY},t.prototype.requestAsyncId=function(r,n,i){i===void 0&&(i=0),this.delay=r.frame+i;var o=r.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(r,n,i){i===void 0&&(i=0)},t.prototype._execute=function(r,n){if(this.active===!0)return e.prototype._execute.call(this,r,n)},t.sortActions=function(r,n){return r.delay===n.delay?r.index===n.index?0:r.index>n.index?1:-1:r.delay>n.delay?1:-1},t}(fj.AsyncAction);Ar.VirtualAction=N0});var At=g(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.empty=vn.EMPTY=void 0;var z0=Q();vn.EMPTY=new z0.Observable(function(e){return e.complete()});function mj(e){return e?vj(e):vn.EMPTY}vn.empty=mj;function vj(e){return new z0.Observable(function(t){return e.schedule(function(){return t.complete()})})}});var vo=g(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.isScheduler=void 0;var _j=K();function bj(e){return e&&_j.isFunction(e.schedule)}fu.isScheduler=bj});var Je=g(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});Pr.popNumber=Pr.popScheduler=Pr.popResultSelector=void 0;var gj=K(),yj=vo();function qd(e){return e[e.length-1]}function wj(e){return gj.isFunction(qd(e))?e.pop():void 0}Pr.popResultSelector=wj;function Sj(e){return yj.isScheduler(qd(e))?e.pop():void 0}Pr.popScheduler=Sj;function xj(e,t){return typeof qd(e)=="number"?e.pop():t}Pr.popNumber=xj});var pu=g(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.isArrayLike=void 0;du.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"}});var Td=g(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.isPromise=void 0;var Ej=K();function Oj(e){return Ej.isFunction(e?.then)}hu.isPromise=Oj});var kd=g(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.isInteropObservable=void 0;var Mj=co(),Aj=K();function Pj(e){return Aj.isFunction(e[Mj.observable])}mu.isInteropObservable=Pj});var Cd=g(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.isAsyncIterable=void 0;var qj=K();function Tj(e){return Symbol.asyncIterator&&qj.isFunction(e?.[Symbol.asyncIterator])}vu.isAsyncIterable=Tj});var jd=g(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.createInvalidObservableTypeError=void 0;function kj(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}_u.createInvalidObservableTypeError=kj});var Id=g(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.iterator=fi.getSymbolIterator=void 0;function H0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}fi.getSymbolIterator=H0;fi.iterator=H0()});var Rd=g(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.isIterable=void 0;var Cj=Id(),jj=K();function Ij(e){return jj.isFunction(e?.[Cj.iterator])}bu.isIterable=Ij});var gu=g(ht=>{"use strict";var Rj=ht&&ht.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return d([l,f])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(f){l=[6,f],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},di=ht&&ht.__await||function(e){return this instanceof di?(this.v=e,this):new di(e)},Fj=ht&&ht.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(c){n[c]&&(i[c]=function(p){return new Promise(function(m,v){o.push([c,p,m,v])>1||u(c,p)})})}function u(c,p){try{d(n[c](p))}catch(m){s(o[0][3],m)}}function d(c){c.value instanceof di?Promise.resolve(c.value.v).then(l,f):s(o[0][2],c)}function l(c){u("next",c)}function f(c){u("throw",c)}function s(c,p){c(p),o.shift(),o.length&&u(o[0][0],o[0][1])}};Object.defineProperty(ht,"__esModule",{value:!0});ht.isReadableStreamLike=ht.readableStreamLikeToAsyncGenerator=void 0;var Lj=K();function Dj(e){return Fj(this,arguments,function(){var r,n,i,o;return Rj(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,di(r.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,di(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,di(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}ht.readableStreamLikeToAsyncGenerator=Dj;function Nj(e){return Lj.isFunction(e?.getReader)}ht.isReadableStreamLike=Nj});var L=g(ae=>{"use strict";var Bj=ae&&ae.__awaiter||function(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function u(f){try{l(n.next(f))}catch(s){a(s)}}function d(f){try{l(n.throw(f))}catch(s){a(s)}}function l(f){f.done?o(f.value):i(f.value).then(u,d)}l((n=n.apply(e,t||[])).next())})},zj=ae&&ae.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return d([l,f])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(f){l=[6,f],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Hj=ae&&ae.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Fd=="function"?Fd(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(u,d){a=e[o](a),i(u,d,a.done,a.value)})}}function i(o,a,u,d){Promise.resolve(d).then(function(l){o({value:l,done:u})},a)}},Fd=ae&&ae.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ae,"__esModule",{value:!0});ae.fromReadableStreamLike=ae.fromAsyncIterable=ae.fromIterable=ae.fromPromise=ae.fromArrayLike=ae.fromInteropObservable=ae.innerFrom=void 0;var Vj=pu(),Wj=Td(),pi=Q(),Uj=kd(),Gj=Cd(),$j=jd(),Yj=Rd(),V0=gu(),Xj=K(),Zj=pd(),Kj=co();function Jj(e){if(e instanceof pi.Observable)return e;if(e!=null){if(Uj.isInteropObservable(e))return W0(e);if(Vj.isArrayLike(e))return U0(e);if(Wj.isPromise(e))return G0(e);if(Gj.isAsyncIterable(e))return Ld(e);if(Yj.isIterable(e))return $0(e);if(V0.isReadableStreamLike(e))return Y0(e)}throw $j.createInvalidObservableTypeError(e)}ae.innerFrom=Jj;function W0(e){return new pi.Observable(function(t){var r=e[Kj.observable]();if(Xj.isFunction(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}ae.fromInteropObservable=W0;function U0(e){return new pi.Observable(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}ae.fromArrayLike=U0;function G0(e){return new pi.Observable(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,Zj.reportUnhandledError)})}ae.fromPromise=G0;function $0(e){return new pi.Observable(function(t){var r,n;try{for(var i=Fd(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}ae.fromIterable=$0;function Ld(e){return new pi.Observable(function(t){Qj(e,t).catch(function(r){return t.error(r)})})}ae.fromAsyncIterable=Ld;function Y0(e){return Ld(V0.readableStreamLikeToAsyncGenerator(e))}ae.fromReadableStreamLike=Y0;function Qj(e,t){var r,n,i,o;return Bj(this,void 0,void 0,function(){var a,u;return zj(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),r=Hj(e),d.label=1;case 1:return[4,r.next()];case 2:if(n=d.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=d.sent(),i={error:u},[3,11];case 6:return d.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}});var ar=g(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.executeSchedule=void 0;function e5(e,t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}yu.executeSchedule=e5});var _o=g(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.observeOn=void 0;var Dd=ar(),t5=j(),r5=F();function n5(e,t){return t===void 0&&(t=0),t5.operate(function(r,n){r.subscribe(r5.createOperatorSubscriber(n,function(i){return Dd.executeSchedule(n,e,function(){return n.next(i)},t)},function(){return Dd.executeSchedule(n,e,function(){return n.complete()},t)},function(i){return Dd.executeSchedule(n,e,function(){return n.error(i)},t)}))})}wu.observeOn=n5});var bo=g(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.subscribeOn=void 0;var i5=j();function o5(e,t){return t===void 0&&(t=0),i5.operate(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}Su.subscribeOn=o5});var X0=g(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.scheduleObservable=void 0;var a5=L(),u5=_o(),s5=bo();function l5(e,t){return a5.innerFrom(e).pipe(s5.subscribeOn(t),u5.observeOn(t))}xu.scheduleObservable=l5});var Z0=g(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.schedulePromise=void 0;var c5=L(),f5=_o(),d5=bo();function p5(e,t){return c5.innerFrom(e).pipe(d5.subscribeOn(t),f5.observeOn(t))}Eu.schedulePromise=p5});var K0=g(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.scheduleArray=void 0;var h5=Q();function m5(e,t){return new h5.Observable(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}Ou.scheduleArray=m5});var Nd=g(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.scheduleIterable=void 0;var v5=Q(),_5=Id(),b5=K(),J0=ar();function g5(e,t){return new v5.Observable(function(r){var n;return J0.executeSchedule(r,t,function(){n=e[_5.iterator](),J0.executeSchedule(r,t,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(u){r.error(u);return}a?r.complete():r.next(o)},0,!0)}),function(){return b5.isFunction(n?.return)&&n.return()}})}Mu.scheduleIterable=g5});var Bd=g(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.scheduleAsyncIterable=void 0;var y5=Q(),Q0=ar();function w5(e,t){if(!e)throw new Error("Iterable cannot be null");return new y5.Observable(function(r){Q0.executeSchedule(r,t,function(){var n=e[Symbol.asyncIterator]();Q0.executeSchedule(r,t,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}Au.scheduleAsyncIterable=w5});var eb=g(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.scheduleReadableStreamLike=void 0;var S5=Bd(),x5=gu();function E5(e,t){return S5.scheduleAsyncIterable(x5.readableStreamLikeToAsyncGenerator(e),t)}Pu.scheduleReadableStreamLike=E5});var zd=g(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.scheduled=void 0;var O5=X0(),M5=Z0(),A5=K0(),P5=Nd(),q5=Bd(),T5=kd(),k5=Td(),C5=pu(),j5=Rd(),I5=Cd(),R5=jd(),F5=gu(),L5=eb();function D5(e,t){if(e!=null){if(T5.isInteropObservable(e))return O5.scheduleObservable(e,t);if(C5.isArrayLike(e))return A5.scheduleArray(e,t);if(k5.isPromise(e))return M5.schedulePromise(e,t);if(I5.isAsyncIterable(e))return q5.scheduleAsyncIterable(e,t);if(j5.isIterable(e))return P5.scheduleIterable(e,t);if(F5.isReadableStreamLike(e))return L5.scheduleReadableStreamLike(e,t)}throw R5.createInvalidObservableTypeError(e)}qu.scheduled=D5});var ur=g(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.from=void 0;var N5=zd(),B5=L();function z5(e,t){return t?N5.scheduled(e,t):B5.innerFrom(e)}Tu.from=z5});var Cu=g(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.of=void 0;var H5=Je(),V5=ur();function W5(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=H5.popScheduler(e);return V5.from(e,r)}ku.of=W5});var Hd=g(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.throwError=void 0;var U5=Q(),G5=K();function $5(e,t){var r=G5.isFunction(e)?e:function(){return e},n=function(i){return i.error(r())};return new U5.Observable(t?function(i){return t.schedule(n,0,i)}:n)}ju.throwError=$5});var Iu=g(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.observeNotification=sr.Notification=sr.NotificationKind=void 0;var Y5=At(),X5=Cu(),Z5=Hd(),K5=K(),J5;(function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"})(J5=sr.NotificationKind||(sr.NotificationKind={}));var Q5=function(){function e(t,r,n){this.kind=t,this.value=r,this.error=n,this.hasValue=t==="N"}return e.prototype.observe=function(t){return tb(this,t)},e.prototype.do=function(t,r,n){var i=this,o=i.kind,a=i.value,u=i.error;return o==="N"?t?.(a):o==="E"?r?.(u):n?.()},e.prototype.accept=function(t,r,n){var i;return K5.isFunction((i=t)===null||i===void 0?void 0:i.next)?this.observe(t):this.do(t,r,n)},e.prototype.toObservable=function(){var t=this,r=t.kind,n=t.value,i=t.error,o=r==="N"?X5.of(n):r==="E"?Z5.throwError(function(){return i}):r==="C"?Y5.EMPTY:0;if(!o)throw new TypeError("Unexpected notification kind "+r);return o},e.createNext=function(t){return new e("N",t)},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e}();sr.Notification=Q5;function tb(e,t){var r,n,i,o=e,a=o.kind,u=o.value,d=o.error;if(typeof a!="string")throw new TypeError('Invalid notification, missing "kind"');a==="N"?(r=t.next)===null||r===void 0||r.call(t,u):a==="E"?(n=t.error)===null||n===void 0||n.call(t,d):(i=t.complete)===null||i===void 0||i.call(t)}sr.observeNotification=tb});var nb=g(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.isObservable=void 0;var eI=Q(),rb=K();function tI(e){return!!e&&(e instanceof eI.Observable||rb.isFunction(e.lift)&&rb.isFunction(e.subscribe))}Ru.isObservable=tI});var qr=g(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.EmptyError=void 0;var rI=Or();Fu.EmptyError=rI.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})});var ib=g(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.lastValueFrom=void 0;var nI=qr();function iI(e,t){var r=typeof t=="object";return new Promise(function(n,i){var o=!1,a;e.subscribe({next:function(u){a=u,o=!0},error:i,complete:function(){o?n(a):r?n(t.defaultValue):i(new nI.EmptyError)}})})}Lu.lastValueFrom=iI});var ob=g(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.firstValueFrom=void 0;var oI=qr(),aI=Gn();function uI(e,t){var r=typeof t=="object";return new Promise(function(n,i){var o=new aI.SafeSubscriber({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new oI.EmptyError)}});e.subscribe(o)})}Du.firstValueFrom=uI});var Vd=g(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.ArgumentOutOfRangeError=void 0;var sI=Or();Nu.ArgumentOutOfRangeError=sI.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})});var Wd=g(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.NotFoundError=void 0;var lI=Or();Bu.NotFoundError=lI.createErrorClass(function(e){return function(r){e(this),this.name="NotFoundError",this.message=r}})});var Ud=g(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.SequenceError=void 0;var cI=Or();zu.SequenceError=cI.createErrorClass(function(e){return function(r){e(this),this.name="SequenceError",this.message=r}})});var Vu=g(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.isValidDate=void 0;function fI(e){return e instanceof Date&&!isNaN(e)}Hu.isValidDate=fI});var Wu=g(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.timeout=_n.TimeoutError=void 0;var dI=Ke(),pI=Vu(),hI=j(),mI=L(),vI=Or(),_I=F(),bI=ar();_n.TimeoutError=vI.createErrorClass(function(e){return function(r){r===void 0&&(r=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function gI(e,t){var r=pI.isValidDate(e)?{first:e}:typeof e=="number"?{each:e}:e,n=r.first,i=r.each,o=r.with,a=o===void 0?yI:o,u=r.scheduler,d=u===void 0?t??dI.asyncScheduler:u,l=r.meta,f=l===void 0?null:l;if(n==null&&i==null)throw new TypeError("No timeout provided.");return hI.operate(function(s,c){var p,m,v=null,h=0,_=function(y){m=bI.executeSchedule(c,d,function(){try{p.unsubscribe(),mI.innerFrom(a({meta:f,lastValue:v,seen:h})).subscribe(c)}catch(S){c.error(S)}},y)};p=s.subscribe(_I.createOperatorSubscriber(c,function(y){m?.unsubscribe(),h++,c.next(v=y),i>0&&_(i)},void 0,void 0,function(){m?.closed||m?.unsubscribe(),v=null})),!h&&_(n!=null?typeof n=="number"?n:+n-d.now():i)})}_n.timeout=gI;function yI(e){throw new _n.TimeoutError(e)}});var Tr=g(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.map=void 0;var wI=j(),SI=F();function xI(e,t){return wI.operate(function(r,n){var i=0;r.subscribe(SI.createOperatorSubscriber(n,function(o){n.next(e.call(t,o,i++))}))})}Uu.map=xI});var Cr=g(kr=>{"use strict";var EI=kr&&kr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},OI=kr&&kr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(kr,"__esModule",{value:!0});kr.mapOneOrManyArgs=void 0;var MI=Tr(),AI=Array.isArray;function PI(e,t){return AI(t)?e.apply(void 0,OI([],EI(t))):e(t)}function qI(e){return MI.map(function(t){return PI(e,t)})}kr.mapOneOrManyArgs=qI});var $d=g(jr=>{"use strict";var TI=jr&&jr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},ab=jr&&jr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(jr,"__esModule",{value:!0});jr.bindCallbackInternals=void 0;var kI=vo(),CI=Q(),jI=bo(),II=Cr(),RI=_o(),FI=su();function Gd(e,t,r,n){if(r)if(kI.isScheduler(r))n=r;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Gd(e,t,n).apply(this,i).pipe(II.mapOneOrManyArgs(r))};return n?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Gd(e,t).apply(this,i).pipe(jI.subscribeOn(n),RI.observeOn(n))}:function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=new FI.AsyncSubject,d=!0;return new CI.Observable(function(l){var f=u.subscribe(l);if(d){d=!1;var s=!1,c=!1;t.apply(i,ab(ab([],TI(o)),[function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];if(e){var v=p.shift();if(v!=null){u.error(v);return}}u.next(1<p.length?p:p[0]),c=!0,s&&u.complete()}])),c&&u.complete(),s=!0}return f})}}jr.bindCallbackInternals=Gd});var ub=g(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.bindCallback=void 0;var LI=$d();function DI(e,t,r){return LI.bindCallbackInternals(!1,e,t,r)}Gu.bindCallback=DI});var sb=g($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.bindNodeCallback=void 0;var NI=$d();function BI(e,t,r){return NI.bindCallbackInternals(!0,e,t,r)}$u.bindNodeCallback=BI});var Yd=g(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.argsArgArrayOrObject=void 0;var zI=Array.isArray,HI=Object.getPrototypeOf,VI=Object.prototype,WI=Object.keys;function UI(e){if(e.length===1){var t=e[0];if(zI(t))return{args:t,keys:null};if(GI(t)){var r=WI(t);return{args:r.map(function(n){return t[n]}),keys:r}}}return{args:e,keys:null}}Yu.argsArgArrayOrObject=UI;function GI(e){return e&&typeof e=="object"&&HI(e)===VI}});var Xd=g(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.createObject=void 0;function $I(e,t){return e.reduce(function(r,n,i){return r[n]=t[i],r},{})}Xu.createObject=$I});var Zu=g(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.combineLatestInit=hi.combineLatest=void 0;var YI=Q(),XI=Yd(),fb=ur(),db=qe(),ZI=Cr(),lb=Je(),KI=Xd(),JI=F(),QI=ar();function e8(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=lb.popScheduler(e),n=lb.popResultSelector(e),i=XI.argsArgArrayOrObject(e),o=i.args,a=i.keys;if(o.length===0)return fb.from([],r);var u=new YI.Observable(pb(o,r,a?function(d){return KI.createObject(a,d)}:db.identity));return n?u.pipe(ZI.mapOneOrManyArgs(n)):u}hi.combineLatest=e8;function pb(e,t,r){return r===void 0&&(r=db.identity),function(n){cb(t,function(){for(var i=e.length,o=new Array(i),a=i,u=i,d=function(f){cb(t,function(){var s=fb.from(e[f],t),c=!1;s.subscribe(JI.createOperatorSubscriber(n,function(p){o[f]=p,c||(c=!0,u--),u||n.next(r(o.slice()))},function(){--a||n.complete()}))},n)},l=0;l<i;l++)d(l)},n)}}hi.combineLatestInit=pb;function cb(e,t,r){e?QI.executeSchedule(r,e,t):t()}});var Ju=g(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.mergeInternals=void 0;var t8=L(),r8=ar(),hb=F();function n8(e,t,r,n,i,o,a,u){var d=[],l=0,f=0,s=!1,c=function(){s&&!d.length&&!l&&t.complete()},p=function(v){return l<n?m(v):d.push(v)},m=function(v){o&&t.next(v),l++;var h=!1;t8.innerFrom(r(v,f++)).subscribe(hb.createOperatorSubscriber(t,function(_){i?.(_),o?p(_):t.next(_)},function(){h=!0},void 0,function(){if(h)try{l--;for(var _=function(){var y=d.shift();a?r8.executeSchedule(t,a,function(){return m(y)}):m(y)};d.length&&l<n;)_();c()}catch(y){t.error(y)}}))};return e.subscribe(hb.createOperatorSubscriber(t,p,function(){s=!0,c()})),function(){u?.()}}Ku.mergeInternals=n8});var lr=g(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.mergeMap=void 0;var i8=Tr(),o8=L(),a8=j(),u8=Ju(),s8=K();function mb(e,t,r){return r===void 0&&(r=1/0),s8.isFunction(t)?mb(function(n,i){return i8.map(function(o,a){return t(n,o,i,a)})(o8.innerFrom(e(n,i)))},r):(typeof t=="number"&&(r=t),a8.operate(function(n,i){return u8.mergeInternals(n,i,e,r)}))}Qu.mergeMap=mb});var go=g(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.mergeAll=void 0;var l8=lr(),c8=qe();function f8(e){return e===void 0&&(e=1/0),l8.mergeMap(c8.identity,e)}es.mergeAll=f8});var rs=g(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.concatAll=void 0;var d8=go();function p8(){return d8.mergeAll(1)}ts.concatAll=p8});var yo=g(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.concat=void 0;var h8=rs(),m8=Je(),v8=ur();function _8(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return h8.concatAll()(v8.from(e,m8.popScheduler(e)))}ns.concat=_8});var wo=g(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.defer=void 0;var b8=Q(),g8=L();function y8(e){return new b8.Observable(function(t){g8.innerFrom(e()).subscribe(t)})}is.defer=y8});var vb=g(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.connectable=void 0;var w8=Te(),S8=Q(),x8=wo(),E8={connector:function(){return new w8.Subject},resetOnDisconnect:!0};function O8(e,t){t===void 0&&(t=E8);var r=null,n=t.connector,i=t.resetOnDisconnect,o=i===void 0?!0:i,a=n(),u=new S8.Observable(function(d){return a.subscribe(d)});return u.connect=function(){return(!r||r.closed)&&(r=x8.defer(function(){return e}).subscribe(a),o&&r.add(function(){return a=n()})),r},u}os.connectable=O8});var _b=g(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.forkJoin=void 0;var M8=Q(),A8=Yd(),P8=L(),q8=Je(),T8=F(),k8=Cr(),C8=Xd();function j8(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=q8.popResultSelector(e),n=A8.argsArgArrayOrObject(e),i=n.args,o=n.keys,a=new M8.Observable(function(u){var d=i.length;if(!d){u.complete();return}for(var l=new Array(d),f=d,s=d,c=function(m){var v=!1;P8.innerFrom(i[m]).subscribe(T8.createOperatorSubscriber(u,function(h){v||(v=!0,s--),l[m]=h},function(){return f--},void 0,function(){(!f||!v)&&(s||u.next(o?C8.createObject(o,l):l),u.complete())}))},p=0;p<d;p++)c(p)});return r?a.pipe(k8.mapOneOrManyArgs(r)):a}as.forkJoin=j8});var gb=g(mi=>{"use strict";var I8=mi&&mi.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(mi,"__esModule",{value:!0});mi.fromEvent=void 0;var R8=L(),F8=Q(),L8=lr(),D8=pu(),bn=K(),N8=Cr(),B8=["addListener","removeListener"],z8=["addEventListener","removeEventListener"],H8=["on","off"];function Zd(e,t,r,n){if(bn.isFunction(r)&&(n=r,r=void 0),n)return Zd(e,t,r).pipe(N8.mapOneOrManyArgs(n));var i=I8(U8(e)?z8.map(function(u){return function(d){return e[u](t,d,r)}}):V8(e)?B8.map(bb(e,t)):W8(e)?H8.map(bb(e,t)):[],2),o=i[0],a=i[1];if(!o&&D8.isArrayLike(e))return L8.mergeMap(function(u){return Zd(u,t,r)})(R8.innerFrom(e));if(!o)throw new TypeError("Invalid event target");return new F8.Observable(function(u){var d=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return u.next(1<l.length?l:l[0])};return o(d),function(){return a(d)}})}mi.fromEvent=Zd;function bb(e,t){return function(r){return function(n){return e[r](t,n)}}}function V8(e){return bn.isFunction(e.addListener)&&bn.isFunction(e.removeListener)}function W8(e){return bn.isFunction(e.on)&&bn.isFunction(e.off)}function U8(e){return bn.isFunction(e.addEventListener)&&bn.isFunction(e.removeEventListener)}});var wb=g(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.fromEventPattern=void 0;var G8=Q(),$8=K(),Y8=Cr();function yb(e,t,r){return r?yb(e,t).pipe(Y8.mapOneOrManyArgs(r)):new G8.Observable(function(n){var i=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return n.next(a.length===1?a[0]:a)},o=e(i);return $8.isFunction(t)?function(){return t(i,o)}:void 0})}us.fromEventPattern=yb});var xb=g(vi=>{"use strict";var X8=vi&&vi.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(l){return function(f){return d([l,f])}}function d(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(f){l=[6,f],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(vi,"__esModule",{value:!0});vi.generate=void 0;var Sb=qe(),Z8=vo(),K8=wo(),J8=Nd();function Q8(e,t,r,n,i){var o,a,u,d;arguments.length===1?(o=e,d=o.initialState,t=o.condition,r=o.iterate,a=o.resultSelector,u=a===void 0?Sb.identity:a,i=o.scheduler):(d=e,!n||Z8.isScheduler(n)?(u=Sb.identity,i=n):u=n);function l(){var f;return X8(this,function(s){switch(s.label){case 0:f=d,s.label=1;case 1:return!t||t(f)?[4,u(f)]:[3,4];case 2:s.sent(),s.label=3;case 3:return f=r(f),[3,1];case 4:return[2]}})}return K8.defer(i?function(){return J8.scheduleIterable(l(),i)}:l)}vi.generate=Q8});var Eb=g(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.iif=void 0;var eR=wo();function tR(e,t,r){return eR.defer(function(){return e()?t:r})}ss.iif=tR});var Ir=g(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.timer=void 0;var rR=Q(),nR=Ke(),iR=vo(),oR=Vu();function aR(e,t,r){e===void 0&&(e=0),r===void 0&&(r=nR.async);var n=-1;return t!=null&&(iR.isScheduler(t)?r=t:n=t),new rR.Observable(function(i){var o=oR.isValidDate(e)?+e-r.now():e;o<0&&(o=0);var a=0;return r.schedule(function(){i.closed||(i.next(a++),0<=n?this.schedule(void 0,n):i.complete())},o)})}ls.timer=aR});var Kd=g(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.interval=void 0;var uR=Ke(),sR=Ir();function lR(e,t){return e===void 0&&(e=0),t===void 0&&(t=uR.asyncScheduler),e<0&&(e=0),sR.timer(e,e,t)}cs.interval=lR});var Mb=g(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});fs.merge=void 0;var cR=go(),fR=L(),dR=At(),Ob=Je(),pR=ur();function hR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ob.popScheduler(e),n=Ob.popNumber(e,1/0),i=e;return i.length?i.length===1?fR.innerFrom(i[0]):cR.mergeAll(n)(pR.from(i,r)):dR.EMPTY}fs.merge=hR});var Jd=g(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.never=gn.NEVER=void 0;var mR=Q(),vR=Pe();gn.NEVER=new mR.Observable(vR.noop);function _R(){return gn.NEVER}gn.never=_R});var yn=g(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.argsOrArgArray=void 0;var bR=Array.isArray;function gR(e){return e.length===1&&bR(e[0])?e[0]:e}ds.argsOrArgArray=gR});var Qd=g(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.onErrorResumeNext=void 0;var yR=Q(),wR=yn(),SR=F(),Ab=Pe(),xR=L();function ER(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=wR.argsOrArgArray(e);return new yR.Observable(function(n){var i=0,o=function(){if(i<r.length){var a=void 0;try{a=xR.innerFrom(r[i++])}catch{o();return}var u=new SR.OperatorSubscriber(n,void 0,Ab.noop,Ab.noop);a.subscribe(u),u.add(o)}else n.complete()};o()})}ps.onErrorResumeNext=ER});var Pb=g(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.pairs=void 0;var OR=ur();function MR(e,t){return OR.from(Object.entries(e),t)}hs.pairs=MR});var qb=g(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.not=void 0;function AR(e,t){return function(r,n){return!e.call(t,r,n)}}ms.not=AR});var wn=g(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.filter=void 0;var PR=j(),qR=F();function TR(e,t){return PR.operate(function(r,n){var i=0;r.subscribe(qR.createOperatorSubscriber(n,function(o){return e.call(t,o,i++)&&n.next(o)}))})}vs.filter=TR});var Cb=g(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.partition=void 0;var kR=qb(),Tb=wn(),kb=L();function CR(e,t,r){return[Tb.filter(t,r)(kb.innerFrom(e)),Tb.filter(kR.not(t,r))(kb.innerFrom(e))]}_s.partition=CR});var ep=g(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.raceInit=_i.race=void 0;var jR=Q(),jb=L(),IR=yn(),RR=F();function FR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=IR.argsOrArgArray(e),e.length===1?jb.innerFrom(e[0]):new jR.Observable(Ib(e))}_i.race=FR;function Ib(e){return function(t){for(var r=[],n=function(o){r.push(jb.innerFrom(e[o]).subscribe(RR.createOperatorSubscriber(t,function(a){if(r){for(var u=0;u<r.length;u++)u!==o&&r[u].unsubscribe();r=null}t.next(a)})))},i=0;r&&!t.closed&&i<e.length;i++)n(i)}}_i.raceInit=Ib});var Rb=g(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.range=void 0;var LR=Q(),DR=At();function NR(e,t,r){if(t==null&&(t=e,e=0),t<=0)return DR.EMPTY;var n=t+e;return new LR.Observable(r?function(i){var o=e;return r.schedule(function(){o<n?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=e;o<n&&!i.closed;)i.next(o++);i.complete()})}bs.range=NR});var Fb=g(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.using=void 0;var BR=Q(),zR=L(),HR=At();function VR(e,t){return new BR.Observable(function(r){var n=e(),i=t(n),o=i?zR.innerFrom(i):HR.EMPTY;return o.subscribe(r),function(){n&&n.unsubscribe()}})}gs.using=VR});var ys=g(Rr=>{"use strict";var WR=Rr&&Rr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},UR=Rr&&Rr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.zip=void 0;var GR=Q(),$R=L(),YR=yn(),XR=At(),ZR=F(),KR=Je();function JR(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=KR.popResultSelector(e),n=YR.argsOrArgArray(e);return n.length?new GR.Observable(function(i){var o=n.map(function(){return[]}),a=n.map(function(){return!1});i.add(function(){o=a=null});for(var u=function(l){$R.innerFrom(n[l]).subscribe(ZR.createOperatorSubscriber(i,function(f){if(o[l].push(f),o.every(function(c){return c.length})){var s=o.map(function(c){return c.shift()});i.next(r?r.apply(void 0,UR([],WR(s))):s),o.some(function(c,p){return!c.length&&a[p]})&&i.complete()}},function(){a[l]=!0,!o[l].length&&i.complete()}))},d=0;!i.closed&&d<n.length;d++)u(d);return function(){o=a=null}}):XR.EMPTY}Rr.zip=JR});var Db=g(Lb=>{"use strict";Object.defineProperty(Lb,"__esModule",{value:!0})});var tp=g(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.audit=void 0;var QR=j(),eF=L(),Nb=F();function tF(e){return QR.operate(function(t,r){var n=!1,i=null,o=null,a=!1,u=function(){if(o?.unsubscribe(),o=null,n){n=!1;var l=i;i=null,r.next(l)}a&&r.complete()},d=function(){o=null,a&&r.complete()};t.subscribe(Nb.createOperatorSubscriber(r,function(l){n=!0,i=l,o||eF.innerFrom(e(l)).subscribe(o=Nb.createOperatorSubscriber(r,u,d))},function(){a=!0,(!n||!o||o.closed)&&r.complete()}))})}ws.audit=tF});var Bb=g(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.auditTime=void 0;var rF=Ke(),nF=tp(),iF=Ir();function oF(e,t){return t===void 0&&(t=rF.asyncScheduler),nF.audit(function(){return iF.timer(e,t)})}Ss.auditTime=oF});var Hb=g(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.buffer=void 0;var aF=j(),uF=Pe(),zb=F(),sF=L();function lF(e){return aF.operate(function(t,r){var n=[];return t.subscribe(zb.createOperatorSubscriber(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),sF.innerFrom(e).subscribe(zb.createOperatorSubscriber(r,function(){var i=n;n=[],r.next(i)},uF.noop)),function(){n=null}})}xs.buffer=lF});var Vb=g(bi=>{"use strict";var rp=bi&&bi.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(bi,"__esModule",{value:!0});bi.bufferCount=void 0;var cF=j(),fF=F(),dF=or();function pF(e,t){return t===void 0&&(t=null),t=t??e,cF.operate(function(r,n){var i=[],o=0;r.subscribe(fF.createOperatorSubscriber(n,function(a){var u,d,l,f,s=null;o++%t===0&&i.push([]);try{for(var c=rp(i),p=c.next();!p.done;p=c.next()){var m=p.value;m.push(a),e<=m.length&&(s=s??[],s.push(m))}}catch(_){u={error:_}}finally{try{p&&!p.done&&(d=c.return)&&d.call(c)}finally{if(u)throw u.error}}if(s)try{for(var v=rp(s),h=v.next();!h.done;h=v.next()){var m=h.value;dF.arrRemove(i,m),n.next(m)}}catch(_){l={error:_}}finally{try{h&&!h.done&&(f=v.return)&&f.call(v)}finally{if(l)throw l.error}}},function(){var a,u;try{for(var d=rp(i),l=d.next();!l.done;l=d.next()){var f=l.value;n.next(f)}}catch(s){a={error:s}}finally{try{l&&!l.done&&(u=d.return)&&u.call(d)}finally{if(a)throw a.error}}n.complete()},void 0,function(){i=null}))})}bi.bufferCount=pF});var Ub=g(gi=>{"use strict";var hF=gi&&gi.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(gi,"__esModule",{value:!0});gi.bufferTime=void 0;var mF=nt(),vF=j(),_F=F(),bF=or(),gF=Ke(),yF=Je(),Wb=ar();function wF(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(t=yF.popScheduler(n))!==null&&t!==void 0?t:gF.asyncScheduler,a=(r=n[0])!==null&&r!==void 0?r:null,u=n[1]||1/0;return vF.operate(function(d,l){var f=[],s=!1,c=function(v){var h=v.buffer,_=v.subs;_.unsubscribe(),bF.arrRemove(f,v),l.next(h),s&&p()},p=function(){if(f){var v=new mF.Subscription;l.add(v);var h=[],_={buffer:h,subs:v};f.push(_),Wb.executeSchedule(v,o,function(){return c(_)},e)}};a!==null&&a>=0?Wb.executeSchedule(l,o,p,a,!0):s=!0,p();var m=_F.createOperatorSubscriber(l,function(v){var h,_,y=f.slice();try{for(var S=hF(y),E=S.next();!E.done;E=S.next()){var M=E.value,O=M.buffer;O.push(v),u<=O.length&&c(M)}}catch(w){h={error:w}}finally{try{E&&!E.done&&(_=S.return)&&_.call(S)}finally{if(h)throw h.error}}},function(){for(;f?.length;)l.next(f.shift().buffer);m?.unsubscribe(),l.complete(),l.unsubscribe()},void 0,function(){return f=null});d.subscribe(m)})}gi.bufferTime=wF});var Yb=g(yi=>{"use strict";var SF=yi&&yi.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(yi,"__esModule",{value:!0});yi.bufferToggle=void 0;var xF=nt(),EF=j(),Gb=L(),np=F(),$b=Pe(),OF=or();function MF(e,t){return EF.operate(function(r,n){var i=[];Gb.innerFrom(e).subscribe(np.createOperatorSubscriber(n,function(o){var a=[];i.push(a);var u=new xF.Subscription,d=function(){OF.arrRemove(i,a),n.next(a),u.unsubscribe()};u.add(Gb.innerFrom(t(o)).subscribe(np.createOperatorSubscriber(n,d,$b.noop)))},$b.noop)),r.subscribe(np.createOperatorSubscriber(n,function(o){var a,u;try{for(var d=SF(i),l=d.next();!l.done;l=d.next()){var f=l.value;f.push(o)}}catch(s){a={error:s}}finally{try{l&&!l.done&&(u=d.return)&&u.call(d)}finally{if(a)throw a.error}}},function(){for(;i.length>0;)n.next(i.shift());n.complete()}))})}yi.bufferToggle=MF});var Zb=g(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.bufferWhen=void 0;var AF=j(),PF=Pe(),Xb=F(),qF=L();function TF(e){return AF.operate(function(t,r){var n=null,i=null,o=function(){i?.unsubscribe();var a=n;n=[],a&&r.next(a),qF.innerFrom(e()).subscribe(i=Xb.createOperatorSubscriber(r,o,PF.noop))};o(),t.subscribe(Xb.createOperatorSubscriber(r,function(a){return n?.push(a)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=i=null}))})}Es.bufferWhen=TF});var Jb=g(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.catchError=void 0;var kF=L(),CF=F(),jF=j();function Kb(e){return jF.operate(function(t,r){var n=null,i=!1,o;n=t.subscribe(CF.createOperatorSubscriber(r,void 0,void 0,function(a){o=kF.innerFrom(e(a,Kb(e)(t))),n?(n.unsubscribe(),n=null,o.subscribe(r)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(r))})}Os.catchError=Kb});var ip=g(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.scanInternals=void 0;var IF=F();function RF(e,t,r,n,i){return function(o,a){var u=r,d=t,l=0;o.subscribe(IF.createOperatorSubscriber(a,function(f){var s=l++;d=u?e(d,f,s):(u=!0,f),n&&a.next(d)},i&&function(){u&&a.next(d),a.complete()}))}}Ms.scanInternals=RF});var wi=g(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.reduce=void 0;var FF=ip(),LF=j();function DF(e,t){return LF.operate(FF.scanInternals(e,t,arguments.length>=2,!1,!0))}As.reduce=DF});var op=g(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.toArray=void 0;var NF=wi(),BF=j(),zF=function(e,t){return e.push(t),e};function HF(){return BF.operate(function(e,t){NF.reduce(zF,[])(e).subscribe(t)})}Ps.toArray=HF});var ap=g(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.joinAllInternals=void 0;var VF=qe(),WF=Cr(),UF=fo(),GF=lr(),$F=op();function YF(e,t){return UF.pipe($F.toArray(),GF.mergeMap(function(r){return e(r)}),t?WF.mapOneOrManyArgs(t):VF.identity)}qs.joinAllInternals=YF});var up=g(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.combineLatestAll=void 0;var XF=Zu(),ZF=ap();function KF(e){return ZF.joinAllInternals(XF.combineLatest,e)}Ts.combineLatestAll=KF});var Qb=g(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.combineAll=void 0;var JF=up();ks.combineAll=JF.combineLatestAll});var ng=g(Fr=>{"use strict";var eg=Fr&&Fr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},tg=Fr&&Fr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.combineLatest=void 0;var QF=Zu(),eL=j(),tL=yn(),rL=Cr(),nL=fo(),iL=Je();function rg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=iL.popResultSelector(e);return r?nL.pipe(rg.apply(void 0,tg([],eg(e))),rL.mapOneOrManyArgs(r)):eL.operate(function(n,i){QF.combineLatestInit(tg([n],eg(tL.argsOrArgArray(e))))(i)})}Fr.combineLatest=rg});var ig=g(Lr=>{"use strict";var oL=Lr&&Lr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},aL=Lr&&Lr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.combineLatestWith=void 0;var uL=ng();function sL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return uL.combineLatest.apply(void 0,aL([],oL(e)))}Lr.combineLatestWith=sL});var sp=g(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.concatMap=void 0;var og=lr(),lL=K();function cL(e,t){return lL.isFunction(t)?og.mergeMap(e,t,1):og.mergeMap(e,1)}Cs.concatMap=cL});var ug=g(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.concatMapTo=void 0;var ag=sp(),fL=K();function dL(e,t){return fL.isFunction(t)?ag.concatMap(function(){return e},t):ag.concatMap(function(){return e})}js.concatMapTo=dL});var sg=g(Dr=>{"use strict";var pL=Dr&&Dr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},hL=Dr&&Dr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.concat=void 0;var mL=j(),vL=rs(),_L=Je(),bL=ur();function gL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=_L.popScheduler(e);return mL.operate(function(n,i){vL.concatAll()(bL.from(hL([n],pL(e)),r)).subscribe(i)})}Dr.concat=gL});var lg=g(Nr=>{"use strict";var yL=Nr&&Nr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},wL=Nr&&Nr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.concatWith=void 0;var SL=sg();function xL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return SL.concat.apply(void 0,wL([],yL(e)))}Nr.concatWith=xL});var cg=g(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.fromSubscribable=void 0;var EL=Q();function OL(e){return new EL.Observable(function(t){return e.subscribe(t)})}Is.fromSubscribable=OL});var Fs=g(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.connect=void 0;var ML=Te(),AL=L(),PL=j(),qL=cg(),TL={connector:function(){return new ML.Subject}};function kL(e,t){t===void 0&&(t=TL);var r=t.connector;return PL.operate(function(n,i){var o=r();AL.innerFrom(e(qL.fromSubscribable(o))).subscribe(i),i.add(n.subscribe(o))})}Rs.connect=kL});var fg=g(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.count=void 0;var CL=wi();function jL(e){return CL.reduce(function(t,r,n){return!e||e(r,n)?t+1:t},0)}Ls.count=jL});var pg=g(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.debounce=void 0;var IL=j(),RL=Pe(),dg=F(),FL=L();function LL(e){return IL.operate(function(t,r){var n=!1,i=null,o=null,a=function(){if(o?.unsubscribe(),o=null,n){n=!1;var u=i;i=null,r.next(u)}};t.subscribe(dg.createOperatorSubscriber(r,function(u){o?.unsubscribe(),n=!0,i=u,o=dg.createOperatorSubscriber(r,a,RL.noop),FL.innerFrom(e(u)).subscribe(o)},function(){a(),r.complete()},void 0,function(){i=o=null}))})}Ds.debounce=LL});var hg=g(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.debounceTime=void 0;var DL=Ke(),NL=j(),BL=F();function zL(e,t){return t===void 0&&(t=DL.asyncScheduler),NL.operate(function(r,n){var i=null,o=null,a=null,u=function(){if(i){i.unsubscribe(),i=null;var l=o;o=null,n.next(l)}};function d(){var l=a+e,f=t.now();if(f<l){i=this.schedule(void 0,l-f),n.add(i);return}u()}r.subscribe(BL.createOperatorSubscriber(n,function(l){o=l,a=t.now(),i||(i=t.schedule(d,e),n.add(i))},function(){u(),n.complete()},void 0,function(){o=i=null}))})}Ns.debounceTime=zL});var So=g(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.defaultIfEmpty=void 0;var HL=j(),VL=F();function WL(e){return HL.operate(function(t,r){var n=!1;t.subscribe(VL.createOperatorSubscriber(r,function(i){n=!0,r.next(i)},function(){n||r.next(e),r.complete()}))})}Bs.defaultIfEmpty=WL});var xo=g(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.take=void 0;var UL=At(),GL=j(),$L=F();function YL(e){return e<=0?function(){return UL.EMPTY}:GL.operate(function(t,r){var n=0;t.subscribe($L.createOperatorSubscriber(r,function(i){++n<=e&&(r.next(i),e<=n&&r.complete())}))})}zs.take=YL});var lp=g(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.ignoreElements=void 0;var XL=j(),ZL=F(),KL=Pe();function JL(){return XL.operate(function(e,t){e.subscribe(ZL.createOperatorSubscriber(t,KL.noop))})}Hs.ignoreElements=JL});var cp=g(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.mapTo=void 0;var QL=Tr();function e6(e){return QL.map(function(){return e})}Vs.mapTo=e6});var fp=g(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.delayWhen=void 0;var t6=yo(),mg=xo(),r6=lp(),n6=cp(),i6=lr(),o6=L();function vg(e,t){return t?function(r){return t6.concat(t.pipe(mg.take(1),r6.ignoreElements()),r.pipe(vg(e)))}:i6.mergeMap(function(r,n){return o6.innerFrom(e(r,n)).pipe(mg.take(1),n6.mapTo(r))})}Ws.delayWhen=vg});var _g=g(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.delay=void 0;var a6=Ke(),u6=fp(),s6=Ir();function l6(e,t){t===void 0&&(t=a6.asyncScheduler);var r=s6.timer(e,t);return u6.delayWhen(function(){return r})}Us.delay=l6});var bg=g(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.dematerialize=void 0;var c6=Iu(),f6=j(),d6=F();function p6(){return f6.operate(function(e,t){e.subscribe(d6.createOperatorSubscriber(t,function(r){return c6.observeNotification(r,t)}))})}Gs.dematerialize=p6});var yg=g($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.distinct=void 0;var h6=j(),gg=F(),m6=Pe(),v6=L();function _6(e,t){return h6.operate(function(r,n){var i=new Set;r.subscribe(gg.createOperatorSubscriber(n,function(o){var a=e?e(o):o;i.has(a)||(i.add(a),n.next(o))})),t&&v6.innerFrom(t).subscribe(gg.createOperatorSubscriber(n,function(){return i.clear()},m6.noop))})}$s.distinct=_6});var dp=g(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.distinctUntilChanged=void 0;var b6=qe(),g6=j(),y6=F();function w6(e,t){return t===void 0&&(t=b6.identity),e=e??S6,g6.operate(function(r,n){var i,o=!0;r.subscribe(y6.createOperatorSubscriber(n,function(a){var u=t(a);(o||!e(i,u))&&(o=!1,i=u,n.next(a))}))})}Ys.distinctUntilChanged=w6;function S6(e,t){return e===t}});var wg=g(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.distinctUntilKeyChanged=void 0;var x6=dp();function E6(e,t){return x6.distinctUntilChanged(function(r,n){return t?t(r[e],n[e]):r[e]===n[e]})}Xs.distinctUntilKeyChanged=E6});var Eo=g(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.throwIfEmpty=void 0;var O6=qr(),M6=j(),A6=F();function P6(e){return e===void 0&&(e=q6),M6.operate(function(t,r){var n=!1;t.subscribe(A6.createOperatorSubscriber(r,function(i){n=!0,r.next(i)},function(){return n?r.complete():r.error(e())}))})}Zs.throwIfEmpty=P6;function q6(){return new O6.EmptyError}});var xg=g(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.elementAt=void 0;var Sg=Vd(),T6=wn(),k6=Eo(),C6=So(),j6=xo();function I6(e,t){if(e<0)throw new Sg.ArgumentOutOfRangeError;var r=arguments.length>=2;return function(n){return n.pipe(T6.filter(function(i,o){return o===e}),j6.take(1),r?C6.defaultIfEmpty(t):k6.throwIfEmpty(function(){return new Sg.ArgumentOutOfRangeError}))}}Ks.elementAt=I6});var Eg=g(Br=>{"use strict";var R6=Br&&Br.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},F6=Br&&Br.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Br,"__esModule",{value:!0});Br.endWith=void 0;var L6=yo(),D6=Cu();function N6(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(r){return L6.concat(r,D6.of.apply(void 0,F6([],R6(e))))}}Br.endWith=N6});var Og=g(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.every=void 0;var B6=j(),z6=F();function H6(e,t){return B6.operate(function(r,n){var i=0;r.subscribe(z6.createOperatorSubscriber(n,function(o){e.call(t,o,i++,r)||(n.next(!1),n.complete())},function(){n.next(!0),n.complete()}))})}Js.every=H6});var pp=g(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.exhaustMap=void 0;var V6=Tr(),Mg=L(),W6=j(),Ag=F();function Pg(e,t){return t?function(r){return r.pipe(Pg(function(n,i){return Mg.innerFrom(e(n,i)).pipe(V6.map(function(o,a){return t(n,o,i,a)}))}))}:W6.operate(function(r,n){var i=0,o=null,a=!1;r.subscribe(Ag.createOperatorSubscriber(n,function(u){o||(o=Ag.createOperatorSubscriber(n,void 0,function(){o=null,a&&n.complete()}),Mg.innerFrom(e(u,i++)).subscribe(o))},function(){a=!0,!o&&n.complete()}))})}Qs.exhaustMap=Pg});var hp=g(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.exhaustAll=void 0;var U6=pp(),G6=qe();function $6(){return U6.exhaustMap(G6.identity)}el.exhaustAll=$6});var qg=g(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.exhaust=void 0;var Y6=hp();tl.exhaust=Y6.exhaustAll});var Tg=g(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.expand=void 0;var X6=j(),Z6=Ju();function K6(e,t,r){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,X6.operate(function(n,i){return Z6.mergeInternals(n,i,e,t,void 0,!0,r)})}rl.expand=K6});var kg=g(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.finalize=void 0;var J6=j();function Q6(e){return J6.operate(function(t,r){try{t.subscribe(r)}finally{r.add(e)}})}nl.finalize=Q6});var mp=g(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.createFind=Si.find=void 0;var e3=j(),t3=F();function r3(e,t){return e3.operate(Cg(e,t,"value"))}Si.find=r3;function Cg(e,t,r){var n=r==="index";return function(i,o){var a=0;i.subscribe(t3.createOperatorSubscriber(o,function(u){var d=a++;e.call(t,u,d,i)&&(o.next(n?d:u),o.complete())},function(){o.next(n?-1:void 0),o.complete()}))}}Si.createFind=Cg});var jg=g(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.findIndex=void 0;var n3=j(),i3=mp();function o3(e,t){return n3.operate(i3.createFind(e,t,"index"))}il.findIndex=o3});var Ig=g(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.first=void 0;var a3=qr(),u3=wn(),s3=xo(),l3=So(),c3=Eo(),f3=qe();function d3(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?u3.filter(function(i,o){return e(i,o,n)}):f3.identity,s3.take(1),r?l3.defaultIfEmpty(t):c3.throwIfEmpty(function(){return new a3.EmptyError}))}}ol.first=d3});var Fg=g(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.groupBy=void 0;var p3=Q(),h3=L(),m3=Te(),v3=j(),Rg=F();function _3(e,t,r,n){return v3.operate(function(i,o){var a;!t||typeof t=="function"?a=t:(r=t.duration,a=t.element,n=t.connector);var u=new Map,d=function(m){u.forEach(m),m(o)},l=function(m){return d(function(v){return v.error(m)})},f=0,s=!1,c=new Rg.OperatorSubscriber(o,function(m){try{var v=e(m),h=u.get(v);if(!h){u.set(v,h=n?n():new m3.Subject);var _=p(v,h);if(o.next(_),r){var y=Rg.createOperatorSubscriber(h,function(){h.complete(),y?.unsubscribe()},void 0,void 0,function(){return u.delete(v)});c.add(h3.innerFrom(r(_)).subscribe(y))}}h.next(a?a(m):m)}catch(S){l(S)}},function(){return d(function(m){return m.complete()})},l,function(){return u.clear()},function(){return s=!0,f===0});i.subscribe(c);function p(m,v){var h=new p3.Observable(function(_){f++;var y=v.subscribe(_);return function(){y.unsubscribe(),--f===0&&s&&c.unsubscribe()}});return h.key=m,h}})}al.groupBy=_3});var Lg=g(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.isEmpty=void 0;var b3=j(),g3=F();function y3(){return b3.operate(function(e,t){e.subscribe(g3.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}ul.isEmpty=y3});var vp=g(xi=>{"use strict";var w3=xi&&xi.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(xi,"__esModule",{value:!0});xi.takeLast=void 0;var S3=At(),x3=j(),E3=F();function O3(e){return e<=0?function(){return S3.EMPTY}:x3.operate(function(t,r){var n=[];t.subscribe(E3.createOperatorSubscriber(r,function(i){n.push(i),e<n.length&&n.shift()},function(){var i,o;try{for(var a=w3(n),u=a.next();!u.done;u=a.next()){var d=u.value;r.next(d)}}catch(l){i={error:l}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}r.complete()},void 0,function(){n=null}))})}xi.takeLast=O3});var Dg=g(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.last=void 0;var M3=qr(),A3=wn(),P3=vp(),q3=Eo(),T3=So(),k3=qe();function C3(e,t){var r=arguments.length>=2;return function(n){return n.pipe(e?A3.filter(function(i,o){return e(i,o,n)}):k3.identity,P3.takeLast(1),r?T3.defaultIfEmpty(t):q3.throwIfEmpty(function(){return new M3.EmptyError}))}}sl.last=C3});var Ng=g(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.materialize=void 0;var _p=Iu(),j3=j(),I3=F();function R3(){return j3.operate(function(e,t){e.subscribe(I3.createOperatorSubscriber(t,function(r){t.next(_p.Notification.createNext(r))},function(){t.next(_p.Notification.createComplete()),t.complete()},function(r){t.next(_p.Notification.createError(r)),t.complete()}))})}ll.materialize=R3});var Bg=g(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.max=void 0;var F3=wi(),L3=K();function D3(e){return F3.reduce(L3.isFunction(e)?function(t,r){return e(t,r)>0?t:r}:function(t,r){return t>r?t:r})}cl.max=D3});var zg=g(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.flatMap=void 0;var N3=lr();fl.flatMap=N3.mergeMap});var Vg=g(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.mergeMapTo=void 0;var Hg=lr(),B3=K();function z3(e,t,r){return r===void 0&&(r=1/0),B3.isFunction(t)?Hg.mergeMap(function(){return e},t,r):(typeof t=="number"&&(r=t),Hg.mergeMap(function(){return e},r))}dl.mergeMapTo=z3});var Wg=g(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.mergeScan=void 0;var H3=j(),V3=Ju();function W3(e,t,r){return r===void 0&&(r=1/0),H3.operate(function(n,i){var o=t;return V3.mergeInternals(n,i,function(a,u){return e(o,a,u)},r,function(a){o=a},!1,void 0,function(){return o=null})})}pl.mergeScan=W3});var Gg=g(zr=>{"use strict";var U3=zr&&zr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},G3=zr&&zr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(zr,"__esModule",{value:!0});zr.merge=void 0;var $3=j(),Y3=yn(),X3=go(),Ug=Je(),Z3=ur();function K3(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ug.popScheduler(e),n=Ug.popNumber(e,1/0);return e=Y3.argsOrArgArray(e),$3.operate(function(i,o){X3.mergeAll(n)(Z3.from(G3([i],U3(e)),r)).subscribe(o)})}zr.merge=K3});var $g=g(Hr=>{"use strict";var J3=Hr&&Hr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Q3=Hr&&Hr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.mergeWith=void 0;var eD=Gg();function tD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return eD.merge.apply(void 0,Q3([],J3(e)))}Hr.mergeWith=tD});var Yg=g(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.min=void 0;var rD=wi(),nD=K();function iD(e){return rD.reduce(nD.isFunction(e)?function(t,r){return e(t,r)<0?t:r}:function(t,r){return t<r?t:r})}hl.min=iD});var vl=g(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.multicast=void 0;var oD=po(),Xg=K(),aD=Fs();function uD(e,t){var r=Xg.isFunction(e)?e:function(){return e};return Xg.isFunction(t)?aD.connect(t,{connector:r}):function(n){return new oD.ConnectableObservable(n,r)}}ml.multicast=uD});var Kg=g(zt=>{"use strict";var sD=zt&&zt.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},lD=zt&&zt.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(zt,"__esModule",{value:!0});zt.onErrorResumeNext=zt.onErrorResumeNextWith=void 0;var cD=yn(),fD=Qd();function Zg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=cD.argsOrArgArray(e);return function(n){return fD.onErrorResumeNext.apply(void 0,lD([n],sD(r)))}}zt.onErrorResumeNextWith=Zg;zt.onErrorResumeNext=Zg});var Jg=g(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.pairwise=void 0;var dD=j(),pD=F();function hD(){return dD.operate(function(e,t){var r,n=!1;e.subscribe(pD.createOperatorSubscriber(t,function(i){var o=r;r=i,n&&t.next([o,i]),n=!0}))})}_l.pairwise=hD});var Qg=g(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.pluck=void 0;var mD=Tr();function vD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(r===0)throw new Error("list of properties cannot be empty.");return mD.map(function(n){for(var i=n,o=0;o<r;o++){var a=i?.[e[o]];if(typeof a<"u")i=a;else return}return i})}bl.pluck=vD});var ey=g(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.publish=void 0;var _D=Te(),bD=vl(),gD=Fs();function yD(e){return e?function(t){return gD.connect(e)(t)}:function(t){return bD.multicast(new _D.Subject)(t)}}gl.publish=yD});var ty=g(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.publishBehavior=void 0;var wD=Md(),SD=po();function xD(e){return function(t){var r=new wD.BehaviorSubject(e);return new SD.ConnectableObservable(t,function(){return r})}}yl.publishBehavior=xD});var ry=g(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.publishLast=void 0;var ED=su(),OD=po();function MD(){return function(e){var t=new ED.AsyncSubject;return new OD.ConnectableObservable(e,function(){return t})}}wl.publishLast=MD});var iy=g(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.publishReplay=void 0;var AD=uu(),PD=vl(),ny=K();function qD(e,t,r,n){r&&!ny.isFunction(r)&&(n=r);var i=ny.isFunction(r)?r:void 0;return function(o){return PD.multicast(new AD.ReplaySubject(e,t,n),i)(o)}}Sl.publishReplay=qD});var oy=g(Vr=>{"use strict";var TD=Vr&&Vr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},kD=Vr&&Vr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.raceWith=void 0;var CD=ep(),jD=j(),ID=qe();function RD(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?jD.operate(function(r,n){CD.raceInit(kD([r],TD(e)))(n)}):ID.identity}Vr.raceWith=RD});var uy=g(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.repeat=void 0;var FD=At(),LD=j(),ay=F(),DD=L(),ND=Ir();function BD(e){var t,r=1/0,n;return e!=null&&(typeof e=="object"?(t=e.count,r=t===void 0?1/0:t,n=e.delay):r=e),r<=0?function(){return FD.EMPTY}:LD.operate(function(i,o){var a=0,u,d=function(){if(u?.unsubscribe(),u=null,n!=null){var f=typeof n=="number"?ND.timer(n):DD.innerFrom(n(a)),s=ay.createOperatorSubscriber(o,function(){s.unsubscribe(),l()});f.subscribe(s)}else l()},l=function(){var f=!1;u=i.subscribe(ay.createOperatorSubscriber(o,void 0,function(){++a<r?u?d():f=!0:o.complete()})),f&&d()};l()})}xl.repeat=BD});var ly=g(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.repeatWhen=void 0;var zD=L(),HD=Te(),VD=j(),sy=F();function WD(e){return VD.operate(function(t,r){var n,i=!1,o,a=!1,u=!1,d=function(){return u&&a&&(r.complete(),!0)},l=function(){return o||(o=new HD.Subject,zD.innerFrom(e(o)).subscribe(sy.createOperatorSubscriber(r,function(){n?f():i=!0},function(){a=!0,d()}))),o},f=function(){u=!1,n=t.subscribe(sy.createOperatorSubscriber(r,void 0,function(){u=!0,!d()&&l().next()})),i&&(n.unsubscribe(),n=null,i=!1,f())};f()})}El.repeatWhen=WD});var fy=g(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.retry=void 0;var UD=j(),cy=F(),GD=qe(),$D=Ir(),YD=L();function XD(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var r=t.count,n=r===void 0?1/0:r,i=t.delay,o=t.resetOnSuccess,a=o===void 0?!1:o;return n<=0?GD.identity:UD.operate(function(u,d){var l=0,f,s=function(){var c=!1;f=u.subscribe(cy.createOperatorSubscriber(d,function(p){a&&(l=0),d.next(p)},void 0,function(p){if(l++<n){var m=function(){f?(f.unsubscribe(),f=null,s()):c=!0};if(i!=null){var v=typeof i=="number"?$D.timer(i):YD.innerFrom(i(p,l)),h=cy.createOperatorSubscriber(d,function(){h.unsubscribe(),m()},function(){d.complete()});v.subscribe(h)}else m()}else d.error(p)})),c&&(f.unsubscribe(),f=null,s())};s()})}Ol.retry=XD});var py=g(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.retryWhen=void 0;var ZD=L(),KD=Te(),JD=j(),dy=F();function QD(e){return JD.operate(function(t,r){var n,i=!1,o,a=function(){n=t.subscribe(dy.createOperatorSubscriber(r,void 0,void 0,function(u){o||(o=new KD.Subject,ZD.innerFrom(e(o)).subscribe(dy.createOperatorSubscriber(r,function(){return n?a():i=!0}))),o&&o.next(u)})),i&&(n.unsubscribe(),n=null,i=!1,a())};a()})}Ml.retryWhen=QD});var bp=g(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.sample=void 0;var eN=L(),tN=j(),rN=Pe(),hy=F();function nN(e){return tN.operate(function(t,r){var n=!1,i=null;t.subscribe(hy.createOperatorSubscriber(r,function(o){n=!0,i=o})),eN.innerFrom(e).subscribe(hy.createOperatorSubscriber(r,function(){if(n){n=!1;var o=i;i=null,r.next(o)}},rN.noop))})}Al.sample=nN});var my=g(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.sampleTime=void 0;var iN=Ke(),oN=bp(),aN=Kd();function uN(e,t){return t===void 0&&(t=iN.asyncScheduler),oN.sample(aN.interval(e,t))}Pl.sampleTime=uN});var vy=g(ql=>{"use strict";Object.defineProperty(ql,"__esModule",{value:!0});ql.scan=void 0;var sN=j(),lN=ip();function cN(e,t){return sN.operate(lN.scanInternals(e,t,arguments.length>=2,!0))}ql.scan=cN});var by=g(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.sequenceEqual=void 0;var fN=j(),dN=F(),pN=L();function hN(e,t){return t===void 0&&(t=function(r,n){return r===n}),fN.operate(function(r,n){var i=_y(),o=_y(),a=function(d){n.next(d),n.complete()},u=function(d,l){var f=dN.createOperatorSubscriber(n,function(s){var c=l.buffer,p=l.complete;c.length===0?p?a(!1):d.buffer.push(s):!t(s,c.shift())&&a(!1)},function(){d.complete=!0;var s=l.complete,c=l.buffer;s&&a(c.length===0),f?.unsubscribe()});return f};r.subscribe(u(i,o)),pN.innerFrom(e).subscribe(u(o,i))})}Tl.sequenceEqual=hN;function _y(){return{buffer:[],complete:!1}}});var yp=g(Wr=>{"use strict";var mN=Wr&&Wr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},vN=Wr&&Wr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.share=void 0;var gy=L(),_N=Te(),yy=Gn(),bN=j();function gN(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new _N.Subject}:t,n=e.resetOnError,i=n===void 0?!0:n,o=e.resetOnComplete,a=o===void 0?!0:o,u=e.resetOnRefCountZero,d=u===void 0?!0:u;return function(l){var f,s,c,p=0,m=!1,v=!1,h=function(){s?.unsubscribe(),s=void 0},_=function(){h(),f=c=void 0,m=v=!1},y=function(){var S=f;_(),S?.unsubscribe()};return bN.operate(function(S,E){p++,!v&&!m&&h();var M=c=c??r();E.add(function(){p--,p===0&&!v&&!m&&(s=gp(y,d))}),M.subscribe(E),!f&&p>0&&(f=new yy.SafeSubscriber({next:function(O){return M.next(O)},error:function(O){v=!0,h(),s=gp(_,i,O),M.error(O)},complete:function(){m=!0,h(),s=gp(_,a),M.complete()}}),gy.innerFrom(S).subscribe(f))})(l)}}Wr.share=gN;function gp(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var i=new yy.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return gy.innerFrom(t.apply(void 0,vN([],mN(r)))).subscribe(i)}}});var wy=g(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.shareReplay=void 0;var yN=uu(),wN=yp();function SN(e,t,r){var n,i,o,a,u=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,u=o===void 0?!1:o,r=e.scheduler):a=e??1/0,wN.share({connector:function(){return new yN.ReplaySubject(a,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}kl.shareReplay=SN});var Sy=g(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.single=void 0;var xN=qr(),EN=Ud(),ON=Wd(),MN=j(),AN=F();function PN(e){return MN.operate(function(t,r){var n=!1,i,o=!1,a=0;t.subscribe(AN.createOperatorSubscriber(r,function(u){o=!0,(!e||e(u,a++,t))&&(n&&r.error(new EN.SequenceError("Too many matching values")),n=!0,i=u)},function(){n?(r.next(i),r.complete()):r.error(o?new ON.NotFoundError("No matching values"):new xN.EmptyError)}))})}Cl.single=PN});var xy=g(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.skip=void 0;var qN=wn();function TN(e){return qN.filter(function(t,r){return e<=r})}jl.skip=TN});var Ey=g(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.skipLast=void 0;var kN=qe(),CN=j(),jN=F();function IN(e){return e<=0?kN.identity:CN.operate(function(t,r){var n=new Array(e),i=0;return t.subscribe(jN.createOperatorSubscriber(r,function(o){var a=i++;if(a<e)n[a]=o;else{var u=a%e,d=n[u];n[u]=o,r.next(d)}})),function(){n=null}})}Il.skipLast=IN});var My=g(Rl=>{"use strict";Object.defineProperty(Rl,"__esModule",{value:!0});Rl.skipUntil=void 0;var RN=j(),Oy=F(),FN=L(),LN=Pe();function DN(e){return RN.operate(function(t,r){var n=!1,i=Oy.createOperatorSubscriber(r,function(){i?.unsubscribe(),n=!0},LN.noop);FN.innerFrom(e).subscribe(i),t.subscribe(Oy.createOperatorSubscriber(r,function(o){return n&&r.next(o)}))})}Rl.skipUntil=DN});var Ay=g(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.skipWhile=void 0;var NN=j(),BN=F();function zN(e){return NN.operate(function(t,r){var n=!1,i=0;t.subscribe(BN.createOperatorSubscriber(r,function(o){return(n||(n=!e(o,i++)))&&r.next(o)}))})}Fl.skipWhile=zN});var qy=g(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.startWith=void 0;var Py=yo(),HN=Je(),VN=j();function WN(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=HN.popScheduler(e);return VN.operate(function(n,i){(r?Py.concat(e,n,r):Py.concat(e,n)).subscribe(i)})}Ll.startWith=WN});var Oo=g(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.switchMap=void 0;var UN=L(),GN=j(),Ty=F();function $N(e,t){return GN.operate(function(r,n){var i=null,o=0,a=!1,u=function(){return a&&!i&&n.complete()};r.subscribe(Ty.createOperatorSubscriber(n,function(d){i?.unsubscribe();var l=0,f=o++;UN.innerFrom(e(d,f)).subscribe(i=Ty.createOperatorSubscriber(n,function(s){return n.next(t?t(d,s,f,l++):s)},function(){i=null,u()}))},function(){a=!0,u()}))})}Dl.switchMap=$N});var ky=g(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.switchAll=void 0;var YN=Oo(),XN=qe();function ZN(){return YN.switchMap(XN.identity)}Nl.switchAll=ZN});var jy=g(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.switchMapTo=void 0;var Cy=Oo(),KN=K();function JN(e,t){return KN.isFunction(t)?Cy.switchMap(function(){return e},t):Cy.switchMap(function(){return e})}Bl.switchMapTo=JN});var Iy=g(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.switchScan=void 0;var QN=Oo(),e4=j();function t4(e,t){return e4.operate(function(r,n){var i=t;return QN.switchMap(function(o,a){return e(i,o,a)},function(o,a){return i=a,a})(r).subscribe(n),function(){i=null}})}zl.switchScan=t4});var Ry=g(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.takeUntil=void 0;var r4=j(),n4=F(),i4=L(),o4=Pe();function a4(e){return r4.operate(function(t,r){i4.innerFrom(e).subscribe(n4.createOperatorSubscriber(r,function(){return r.complete()},o4.noop)),!r.closed&&t.subscribe(r)})}Hl.takeUntil=a4});var Fy=g(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.takeWhile=void 0;var u4=j(),s4=F();function l4(e,t){return t===void 0&&(t=!1),u4.operate(function(r,n){var i=0;r.subscribe(s4.createOperatorSubscriber(n,function(o){var a=e(o,i++);(a||t)&&n.next(o),!a&&n.complete()}))})}Vl.takeWhile=l4});var Ly=g(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.tap=void 0;var c4=K(),f4=j(),d4=F(),p4=qe();function h4(e,t,r){var n=c4.isFunction(e)||t||r?{next:e,error:t,complete:r}:e;return n?f4.operate(function(i,o){var a;(a=n.subscribe)===null||a===void 0||a.call(n);var u=!0;i.subscribe(d4.createOperatorSubscriber(o,function(d){var l;(l=n.next)===null||l===void 0||l.call(n,d),o.next(d)},function(){var d;u=!1,(d=n.complete)===null||d===void 0||d.call(n),o.complete()},function(d){var l;u=!1,(l=n.error)===null||l===void 0||l.call(n,d),o.error(d)},function(){var d,l;u&&((d=n.unsubscribe)===null||d===void 0||d.call(n)),(l=n.finalize)===null||l===void 0||l.call(n)}))}):p4.identity}Wl.tap=h4});var wp=g(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.throttle=void 0;var m4=j(),Dy=F(),v4=L();function _4(e,t){return m4.operate(function(r,n){var i=t??{},o=i.leading,a=o===void 0?!0:o,u=i.trailing,d=u===void 0?!1:u,l=!1,f=null,s=null,c=!1,p=function(){s?.unsubscribe(),s=null,d&&(h(),c&&n.complete())},m=function(){s=null,c&&n.complete()},v=function(_){return s=v4.innerFrom(e(_)).subscribe(Dy.createOperatorSubscriber(n,p,m))},h=function(){if(l){l=!1;var _=f;f=null,n.next(_),!c&&v(_)}};r.subscribe(Dy.createOperatorSubscriber(n,function(_){l=!0,f=_,!(s&&!s.closed)&&(a?h():v(_))},function(){c=!0,!(d&&l&&s&&!s.closed)&&n.complete()}))})}Ul.throttle=_4});var Ny=g(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.throttleTime=void 0;var b4=Ke(),g4=wp(),y4=Ir();function w4(e,t,r){t===void 0&&(t=b4.asyncScheduler);var n=y4.timer(e,t);return g4.throttle(function(){return n},r)}Gl.throttleTime=w4});var zy=g(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.TimeInterval=Ei.timeInterval=void 0;var S4=Ke(),x4=j(),E4=F();function O4(e){return e===void 0&&(e=S4.asyncScheduler),x4.operate(function(t,r){var n=e.now();t.subscribe(E4.createOperatorSubscriber(r,function(i){var o=e.now(),a=o-n;n=o,r.next(new By(i,a))}))})}Ei.timeInterval=O4;var By=function(){function e(t,r){this.value=t,this.interval=r}return e}();Ei.TimeInterval=By});var Hy=g($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.timeoutWith=void 0;var M4=Ke(),A4=Vu(),P4=Wu();function q4(e,t,r){var n,i,o;if(r=r??M4.async,A4.isValidDate(e)?n=e:typeof e=="number"&&(i=e),t)o=function(){return t};else throw new TypeError("No observable provided to switch to");if(n==null&&i==null)throw new TypeError("No timeout provided.");return P4.timeout({first:n,each:i,scheduler:r,with:o})}$l.timeoutWith=q4});var Vy=g(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.timestamp=void 0;var T4=au(),k4=Tr();function C4(e){return e===void 0&&(e=T4.dateTimestampProvider),k4.map(function(t){return{value:t,timestamp:e.now()}})}Yl.timestamp=C4});var Gy=g(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.window=void 0;var Wy=Te(),j4=j(),Uy=F(),I4=Pe(),R4=L();function F4(e){return j4.operate(function(t,r){var n=new Wy.Subject;r.next(n.asObservable());var i=function(o){n.error(o),r.error(o)};return t.subscribe(Uy.createOperatorSubscriber(r,function(o){return n?.next(o)},function(){n.complete(),r.complete()},i)),R4.innerFrom(e).subscribe(Uy.createOperatorSubscriber(r,function(){n.complete(),r.next(n=new Wy.Subject)},I4.noop,i)),function(){n?.unsubscribe(),n=null}})}Xl.window=F4});var Yy=g(Oi=>{"use strict";var L4=Oi&&Oi.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.windowCount=void 0;var $y=Te(),D4=j(),N4=F();function B4(e,t){t===void 0&&(t=0);var r=t>0?t:e;return D4.operate(function(n,i){var o=[new $y.Subject],a=[],u=0;i.next(o[0].asObservable()),n.subscribe(N4.createOperatorSubscriber(i,function(d){var l,f;try{for(var s=L4(o),c=s.next();!c.done;c=s.next()){var p=c.value;p.next(d)}}catch(h){l={error:h}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(l)throw l.error}}var m=u-e+1;if(m>=0&&m%r===0&&o.shift().complete(),++u%r===0){var v=new $y.Subject;o.push(v),i.next(v.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(d){for(;o.length>0;)o.shift().error(d);i.error(d)},function(){a=null,o=null}))})}Oi.windowCount=B4});var Zy=g(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.windowTime=void 0;var z4=Te(),H4=Ke(),V4=nt(),W4=j(),U4=F(),G4=or(),$4=Je(),Xy=ar();function Y4(e){for(var t,r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=(t=$4.popScheduler(n))!==null&&t!==void 0?t:H4.asyncScheduler,a=(r=n[0])!==null&&r!==void 0?r:null,u=n[1]||1/0;return W4.operate(function(d,l){var f=[],s=!1,c=function(h){var _=h.window,y=h.subs;_.complete(),y.unsubscribe(),G4.arrRemove(f,h),s&&p()},p=function(){if(f){var h=new V4.Subscription;l.add(h);var _=new z4.Subject,y={window:_,subs:h,seen:0};f.push(y),l.next(_.asObservable()),Xy.executeSchedule(h,o,function(){return c(y)},e)}};a!==null&&a>=0?Xy.executeSchedule(l,o,p,a,!0):s=!0,p();var m=function(h){return f.slice().forEach(h)},v=function(h){m(function(_){var y=_.window;return h(y)}),h(l),l.unsubscribe()};return d.subscribe(U4.createOperatorSubscriber(l,function(h){m(function(_){_.window.next(h),u<=++_.seen&&c(_)})},function(){return v(function(h){return h.complete()})},function(h){return v(function(_){return _.error(h)})})),function(){f=null}})}Zl.windowTime=Y4});var Qy=g(Mi=>{"use strict";var X4=Mi&&Mi.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.windowToggle=void 0;var Z4=Te(),K4=nt(),J4=j(),Ky=L(),Sp=F(),Jy=Pe(),Q4=or();function e9(e,t){return J4.operate(function(r,n){var i=[],o=function(a){for(;0<i.length;)i.shift().error(a);n.error(a)};Ky.innerFrom(e).subscribe(Sp.createOperatorSubscriber(n,function(a){var u=new Z4.Subject;i.push(u);var d=new K4.Subscription,l=function(){Q4.arrRemove(i,u),u.complete(),d.unsubscribe()},f;try{f=Ky.innerFrom(t(a))}catch(s){o(s);return}n.next(u.asObservable()),d.add(f.subscribe(Sp.createOperatorSubscriber(n,l,Jy.noop,o)))},Jy.noop)),r.subscribe(Sp.createOperatorSubscriber(n,function(a){var u,d,l=i.slice();try{for(var f=X4(l),s=f.next();!s.done;s=f.next()){var c=s.value;c.next(a)}}catch(p){u={error:p}}finally{try{s&&!s.done&&(d=f.return)&&d.call(f)}finally{if(u)throw u.error}}},function(){for(;0<i.length;)i.shift().complete();n.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}Mi.windowToggle=e9});var t1=g(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.windowWhen=void 0;var t9=Te(),r9=j(),e1=F(),n9=L();function i9(e){return r9.operate(function(t,r){var n,i,o=function(u){n.error(u),r.error(u)},a=function(){i?.unsubscribe(),n?.complete(),n=new t9.Subject,r.next(n.asObservable());var u;try{u=n9.innerFrom(e())}catch(d){o(d);return}u.subscribe(i=e1.createOperatorSubscriber(r,a,a,o))};a(),t.subscribe(e1.createOperatorSubscriber(r,function(u){return n.next(u)},function(){n.complete(),r.complete()},o,function(){i?.unsubscribe(),n=null}))})}Kl.windowWhen=i9});var o1=g(Ur=>{"use strict";var r1=Ur&&Ur.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},n1=Ur&&Ur.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.withLatestFrom=void 0;var o9=j(),i1=F(),a9=L(),u9=qe(),s9=Pe(),l9=Je();function c9(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=l9.popResultSelector(e);return o9.operate(function(n,i){for(var o=e.length,a=new Array(o),u=e.map(function(){return!1}),d=!1,l=function(s){a9.innerFrom(e[s]).subscribe(i1.createOperatorSubscriber(i,function(c){a[s]=c,!d&&!u[s]&&(u[s]=!0,(d=u.every(u9.identity))&&(u=null))},s9.noop))},f=0;f<o;f++)l(f);n.subscribe(i1.createOperatorSubscriber(i,function(s){if(d){var c=n1([s],r1(a));i.next(r?r.apply(void 0,n1([],r1(c))):c)}}))})}Ur.withLatestFrom=c9});var a1=g(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.zipAll=void 0;var f9=ys(),d9=ap();function p9(e){return d9.joinAllInternals(f9.zip,e)}Jl.zipAll=p9});var u1=g(Gr=>{"use strict";var h9=Gr&&Gr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},m9=Gr&&Gr.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.zip=void 0;var v9=ys(),_9=j();function b9(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return _9.operate(function(r,n){v9.zip.apply(void 0,m9([r],h9(e))).subscribe(n)})}Gr.zip=b9});var s1=g($r=>{"use strict";var g9=$r&&$r.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){a={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},y9=$r&&$r.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty($r,"__esModule",{value:!0});$r.zipWith=void 0;var w9=u1();function S9(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w9.zip.apply(void 0,y9([],g9(e)))}$r.zipWith=S9});var m1=g(b=>{"use strict";var x9=b&&b.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),E9=b&&b.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&x9(t,e,r)};Object.defineProperty(b,"__esModule",{value:!0});b.interval=b.iif=b.generate=b.fromEventPattern=b.fromEvent=b.from=b.forkJoin=b.empty=b.defer=b.connectable=b.concat=b.combineLatest=b.bindNodeCallback=b.bindCallback=b.UnsubscriptionError=b.TimeoutError=b.SequenceError=b.ObjectUnsubscribedError=b.NotFoundError=b.EmptyError=b.ArgumentOutOfRangeError=b.firstValueFrom=b.lastValueFrom=b.isObservable=b.identity=b.noop=b.pipe=b.NotificationKind=b.Notification=b.Subscriber=b.Subscription=b.Scheduler=b.VirtualAction=b.VirtualTimeScheduler=b.animationFrameScheduler=b.animationFrame=b.queueScheduler=b.queue=b.asyncScheduler=b.async=b.asapScheduler=b.asap=b.AsyncSubject=b.ReplaySubject=b.BehaviorSubject=b.Subject=b.animationFrames=b.observable=b.ConnectableObservable=b.Observable=void 0;b.filter=b.expand=b.exhaustMap=b.exhaustAll=b.exhaust=b.every=b.endWith=b.elementAt=b.distinctUntilKeyChanged=b.distinctUntilChanged=b.distinct=b.dematerialize=b.delayWhen=b.delay=b.defaultIfEmpty=b.debounceTime=b.debounce=b.count=b.connect=b.concatWith=b.concatMapTo=b.concatMap=b.concatAll=b.combineLatestWith=b.combineLatestAll=b.combineAll=b.catchError=b.bufferWhen=b.bufferToggle=b.bufferTime=b.bufferCount=b.buffer=b.auditTime=b.audit=b.config=b.NEVER=b.EMPTY=b.scheduled=b.zip=b.using=b.timer=b.throwError=b.range=b.race=b.partition=b.pairs=b.onErrorResumeNext=b.of=b.never=b.merge=void 0;b.switchMap=b.switchAll=b.subscribeOn=b.startWith=b.skipWhile=b.skipUntil=b.skipLast=b.skip=b.single=b.shareReplay=b.share=b.sequenceEqual=b.scan=b.sampleTime=b.sample=b.refCount=b.retryWhen=b.retry=b.repeatWhen=b.repeat=b.reduce=b.raceWith=b.publishReplay=b.publishLast=b.publishBehavior=b.publish=b.pluck=b.pairwise=b.onErrorResumeNextWith=b.observeOn=b.multicast=b.min=b.mergeWith=b.mergeScan=b.mergeMapTo=b.mergeMap=b.flatMap=b.mergeAll=b.max=b.materialize=b.mapTo=b.map=b.last=b.isEmpty=b.ignoreElements=b.groupBy=b.first=b.findIndex=b.find=b.finalize=void 0;b.zipWith=b.zipAll=b.withLatestFrom=b.windowWhen=b.windowToggle=b.windowTime=b.windowCount=b.window=b.toArray=b.timestamp=b.timeoutWith=b.timeout=b.timeInterval=b.throwIfEmpty=b.throttleTime=b.throttle=b.tap=b.takeWhile=b.takeUntil=b.takeLast=b.take=b.switchScan=b.switchMapTo=void 0;var O9=Q();Object.defineProperty(b,"Observable",{enumerable:!0,get:function(){return O9.Observable}});var M9=po();Object.defineProperty(b,"ConnectableObservable",{enumerable:!0,get:function(){return M9.ConnectableObservable}});var A9=co();Object.defineProperty(b,"observable",{enumerable:!0,get:function(){return A9.observable}});var P9=p0();Object.defineProperty(b,"animationFrames",{enumerable:!0,get:function(){return P9.animationFrames}});var q9=Te();Object.defineProperty(b,"Subject",{enumerable:!0,get:function(){return q9.Subject}});var T9=Md();Object.defineProperty(b,"BehaviorSubject",{enumerable:!0,get:function(){return T9.BehaviorSubject}});var k9=uu();Object.defineProperty(b,"ReplaySubject",{enumerable:!0,get:function(){return k9.ReplaySubject}});var C9=su();Object.defineProperty(b,"AsyncSubject",{enumerable:!0,get:function(){return C9.AsyncSubject}});var l1=T0();Object.defineProperty(b,"asap",{enumerable:!0,get:function(){return l1.asap}});Object.defineProperty(b,"asapScheduler",{enumerable:!0,get:function(){return l1.asapScheduler}});var c1=Ke();Object.defineProperty(b,"async",{enumerable:!0,get:function(){return c1.async}});Object.defineProperty(b,"asyncScheduler",{enumerable:!0,get:function(){return c1.asyncScheduler}});var f1=j0();Object.defineProperty(b,"queue",{enumerable:!0,get:function(){return f1.queue}});Object.defineProperty(b,"queueScheduler",{enumerable:!0,get:function(){return f1.queueScheduler}});var d1=L0();Object.defineProperty(b,"animationFrame",{enumerable:!0,get:function(){return d1.animationFrame}});Object.defineProperty(b,"animationFrameScheduler",{enumerable:!0,get:function(){return d1.animationFrameScheduler}});var p1=B0();Object.defineProperty(b,"VirtualTimeScheduler",{enumerable:!0,get:function(){return p1.VirtualTimeScheduler}});Object.defineProperty(b,"VirtualAction",{enumerable:!0,get:function(){return p1.VirtualAction}});var j9=Pd();Object.defineProperty(b,"Scheduler",{enumerable:!0,get:function(){return j9.Scheduler}});var I9=nt();Object.defineProperty(b,"Subscription",{enumerable:!0,get:function(){return I9.Subscription}});var R9=Gn();Object.defineProperty(b,"Subscriber",{enumerable:!0,get:function(){return R9.Subscriber}});var h1=Iu();Object.defineProperty(b,"Notification",{enumerable:!0,get:function(){return h1.Notification}});Object.defineProperty(b,"NotificationKind",{enumerable:!0,get:function(){return h1.NotificationKind}});var F9=fo();Object.defineProperty(b,"pipe",{enumerable:!0,get:function(){return F9.pipe}});var L9=Pe();Object.defineProperty(b,"noop",{enumerable:!0,get:function(){return L9.noop}});var D9=qe();Object.defineProperty(b,"identity",{enumerable:!0,get:function(){return D9.identity}});var N9=nb();Object.defineProperty(b,"isObservable",{enumerable:!0,get:function(){return N9.isObservable}});var B9=ib();Object.defineProperty(b,"lastValueFrom",{enumerable:!0,get:function(){return B9.lastValueFrom}});var z9=ob();Object.defineProperty(b,"firstValueFrom",{enumerable:!0,get:function(){return z9.firstValueFrom}});var H9=Vd();Object.defineProperty(b,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return H9.ArgumentOutOfRangeError}});var V9=qr();Object.defineProperty(b,"EmptyError",{enumerable:!0,get:function(){return V9.EmptyError}});var W9=Wd();Object.defineProperty(b,"NotFoundError",{enumerable:!0,get:function(){return W9.NotFoundError}});var U9=Sd();Object.defineProperty(b,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return U9.ObjectUnsubscribedError}});var G9=Ud();Object.defineProperty(b,"SequenceError",{enumerable:!0,get:function(){return G9.SequenceError}});var $9=Wu();Object.defineProperty(b,"TimeoutError",{enumerable:!0,get:function(){return $9.TimeoutError}});var Y9=ld();Object.defineProperty(b,"UnsubscriptionError",{enumerable:!0,get:function(){return Y9.UnsubscriptionError}});var X9=ub();Object.defineProperty(b,"bindCallback",{enumerable:!0,get:function(){return X9.bindCallback}});var Z9=sb();Object.defineProperty(b,"bindNodeCallback",{enumerable:!0,get:function(){return Z9.bindNodeCallback}});var K9=Zu();Object.defineProperty(b,"combineLatest",{enumerable:!0,get:function(){return K9.combineLatest}});var J9=yo();Object.defineProperty(b,"concat",{enumerable:!0,get:function(){return J9.concat}});var Q9=vb();Object.defineProperty(b,"connectable",{enumerable:!0,get:function(){return Q9.connectable}});var e7=wo();Object.defineProperty(b,"defer",{enumerable:!0,get:function(){return e7.defer}});var t7=At();Object.defineProperty(b,"empty",{enumerable:!0,get:function(){return t7.empty}});var r7=_b();Object.defineProperty(b,"forkJoin",{enumerable:!0,get:function(){return r7.forkJoin}});var n7=ur();Object.defineProperty(b,"from",{enumerable:!0,get:function(){return n7.from}});var i7=gb();Object.defineProperty(b,"fromEvent",{enumerable:!0,get:function(){return i7.fromEvent}});var o7=wb();Object.defineProperty(b,"fromEventPattern",{enumerable:!0,get:function(){return o7.fromEventPattern}});var a7=xb();Object.defineProperty(b,"generate",{enumerable:!0,get:function(){return a7.generate}});var u7=Eb();Object.defineProperty(b,"iif",{enumerable:!0,get:function(){return u7.iif}});var s7=Kd();Object.defineProperty(b,"interval",{enumerable:!0,get:function(){return s7.interval}});var l7=Mb();Object.defineProperty(b,"merge",{enumerable:!0,get:function(){return l7.merge}});var c7=Jd();Object.defineProperty(b,"never",{enumerable:!0,get:function(){return c7.never}});var f7=Cu();Object.defineProperty(b,"of",{enumerable:!0,get:function(){return f7.of}});var d7=Qd();Object.defineProperty(b,"onErrorResumeNext",{enumerable:!0,get:function(){return d7.onErrorResumeNext}});var p7=Pb();Object.defineProperty(b,"pairs",{enumerable:!0,get:function(){return p7.pairs}});var h7=Cb();Object.defineProperty(b,"partition",{enumerable:!0,get:function(){return h7.partition}});var m7=ep();Object.defineProperty(b,"race",{enumerable:!0,get:function(){return m7.race}});var v7=Rb();Object.defineProperty(b,"range",{enumerable:!0,get:function(){return v7.range}});var _7=Hd();Object.defineProperty(b,"throwError",{enumerable:!0,get:function(){return _7.throwError}});var b7=Ir();Object.defineProperty(b,"timer",{enumerable:!0,get:function(){return b7.timer}});var g7=Fb();Object.defineProperty(b,"using",{enumerable:!0,get:function(){return g7.using}});var y7=ys();Object.defineProperty(b,"zip",{enumerable:!0,get:function(){return y7.zip}});var w7=zd();Object.defineProperty(b,"scheduled",{enumerable:!0,get:function(){return w7.scheduled}});var S7=At();Object.defineProperty(b,"EMPTY",{enumerable:!0,get:function(){return S7.EMPTY}});var x7=Jd();Object.defineProperty(b,"NEVER",{enumerable:!0,get:function(){return x7.NEVER}});E9(Db(),b);var E7=Wn();Object.defineProperty(b,"config",{enumerable:!0,get:function(){return E7.config}});var O7=tp();Object.defineProperty(b,"audit",{enumerable:!0,get:function(){return O7.audit}});var M7=Bb();Object.defineProperty(b,"auditTime",{enumerable:!0,get:function(){return M7.auditTime}});var A7=Hb();Object.defineProperty(b,"buffer",{enumerable:!0,get:function(){return A7.buffer}});var P7=Vb();Object.defineProperty(b,"bufferCount",{enumerable:!0,get:function(){return P7.bufferCount}});var q7=Ub();Object.defineProperty(b,"bufferTime",{enumerable:!0,get:function(){return q7.bufferTime}});var T7=Yb();Object.defineProperty(b,"bufferToggle",{enumerable:!0,get:function(){return T7.bufferToggle}});var k7=Zb();Object.defineProperty(b,"bufferWhen",{enumerable:!0,get:function(){return k7.bufferWhen}});var C7=Jb();Object.defineProperty(b,"catchError",{enumerable:!0,get:function(){return C7.catchError}});var j7=Qb();Object.defineProperty(b,"combineAll",{enumerable:!0,get:function(){return j7.combineAll}});var I7=up();Object.defineProperty(b,"combineLatestAll",{enumerable:!0,get:function(){return I7.combineLatestAll}});var R7=ig();Object.defineProperty(b,"combineLatestWith",{enumerable:!0,get:function(){return R7.combineLatestWith}});var F7=rs();Object.defineProperty(b,"concatAll",{enumerable:!0,get:function(){return F7.concatAll}});var L7=sp();Object.defineProperty(b,"concatMap",{enumerable:!0,get:function(){return L7.concatMap}});var D7=ug();Object.defineProperty(b,"concatMapTo",{enumerable:!0,get:function(){return D7.concatMapTo}});var N7=lg();Object.defineProperty(b,"concatWith",{enumerable:!0,get:function(){return N7.concatWith}});var B7=Fs();Object.defineProperty(b,"connect",{enumerable:!0,get:function(){return B7.connect}});var z7=fg();Object.defineProperty(b,"count",{enumerable:!0,get:function(){return z7.count}});var H7=pg();Object.defineProperty(b,"debounce",{enumerable:!0,get:function(){return H7.debounce}});var V7=hg();Object.defineProperty(b,"debounceTime",{enumerable:!0,get:function(){return V7.debounceTime}});var W7=So();Object.defineProperty(b,"defaultIfEmpty",{enumerable:!0,get:function(){return W7.defaultIfEmpty}});var U7=_g();Object.defineProperty(b,"delay",{enumerable:!0,get:function(){return U7.delay}});var G7=fp();Object.defineProperty(b,"delayWhen",{enumerable:!0,get:function(){return G7.delayWhen}});var $7=bg();Object.defineProperty(b,"dematerialize",{enumerable:!0,get:function(){return $7.dematerialize}});var Y7=yg();Object.defineProperty(b,"distinct",{enumerable:!0,get:function(){return Y7.distinct}});var X7=dp();Object.defineProperty(b,"distinctUntilChanged",{enumerable:!0,get:function(){return X7.distinctUntilChanged}});var Z7=wg();Object.defineProperty(b,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Z7.distinctUntilKeyChanged}});var K7=xg();Object.defineProperty(b,"elementAt",{enumerable:!0,get:function(){return K7.elementAt}});var J7=Eg();Object.defineProperty(b,"endWith",{enumerable:!0,get:function(){return J7.endWith}});var Q7=Og();Object.defineProperty(b,"every",{enumerable:!0,get:function(){return Q7.every}});var eB=qg();Object.defineProperty(b,"exhaust",{enumerable:!0,get:function(){return eB.exhaust}});var tB=hp();Object.defineProperty(b,"exhaustAll",{enumerable:!0,get:function(){return tB.exhaustAll}});var rB=pp();Object.defineProperty(b,"exhaustMap",{enumerable:!0,get:function(){return rB.exhaustMap}});var nB=Tg();Object.defineProperty(b,"expand",{enumerable:!0,get:function(){return nB.expand}});var iB=wn();Object.defineProperty(b,"filter",{enumerable:!0,get:function(){return iB.filter}});var oB=kg();Object.defineProperty(b,"finalize",{enumerable:!0,get:function(){return oB.finalize}});var aB=mp();Object.defineProperty(b,"find",{enumerable:!0,get:function(){return aB.find}});var uB=jg();Object.defineProperty(b,"findIndex",{enumerable:!0,get:function(){return uB.findIndex}});var sB=Ig();Object.defineProperty(b,"first",{enumerable:!0,get:function(){return sB.first}});var lB=Fg();Object.defineProperty(b,"groupBy",{enumerable:!0,get:function(){return lB.groupBy}});var cB=lp();Object.defineProperty(b,"ignoreElements",{enumerable:!0,get:function(){return cB.ignoreElements}});var fB=Lg();Object.defineProperty(b,"isEmpty",{enumerable:!0,get:function(){return fB.isEmpty}});var dB=Dg();Object.defineProperty(b,"last",{enumerable:!0,get:function(){return dB.last}});var pB=Tr();Object.defineProperty(b,"map",{enumerable:!0,get:function(){return pB.map}});var hB=cp();Object.defineProperty(b,"mapTo",{enumerable:!0,get:function(){return hB.mapTo}});var mB=Ng();Object.defineProperty(b,"materialize",{enumerable:!0,get:function(){return mB.materialize}});var vB=Bg();Object.defineProperty(b,"max",{enumerable:!0,get:function(){return vB.max}});var _B=go();Object.defineProperty(b,"mergeAll",{enumerable:!0,get:function(){return _B.mergeAll}});var bB=zg();Object.defineProperty(b,"flatMap",{enumerable:!0,get:function(){return bB.flatMap}});var gB=lr();Object.defineProperty(b,"mergeMap",{enumerable:!0,get:function(){return gB.mergeMap}});var yB=Vg();Object.defineProperty(b,"mergeMapTo",{enumerable:!0,get:function(){return yB.mergeMapTo}});var wB=Wg();Object.defineProperty(b,"mergeScan",{enumerable:!0,get:function(){return wB.mergeScan}});var SB=$g();Object.defineProperty(b,"mergeWith",{enumerable:!0,get:function(){return SB.mergeWith}});var xB=Yg();Object.defineProperty(b,"min",{enumerable:!0,get:function(){return xB.min}});var EB=vl();Object.defineProperty(b,"multicast",{enumerable:!0,get:function(){return EB.multicast}});var OB=_o();Object.defineProperty(b,"observeOn",{enumerable:!0,get:function(){return OB.observeOn}});var MB=Kg();Object.defineProperty(b,"onErrorResumeNextWith",{enumerable:!0,get:function(){return MB.onErrorResumeNextWith}});var AB=Jg();Object.defineProperty(b,"pairwise",{enumerable:!0,get:function(){return AB.pairwise}});var PB=Qg();Object.defineProperty(b,"pluck",{enumerable:!0,get:function(){return PB.pluck}});var qB=ey();Object.defineProperty(b,"publish",{enumerable:!0,get:function(){return qB.publish}});var TB=ty();Object.defineProperty(b,"publishBehavior",{enumerable:!0,get:function(){return TB.publishBehavior}});var kB=ry();Object.defineProperty(b,"publishLast",{enumerable:!0,get:function(){return kB.publishLast}});var CB=iy();Object.defineProperty(b,"publishReplay",{enumerable:!0,get:function(){return CB.publishReplay}});var jB=oy();Object.defineProperty(b,"raceWith",{enumerable:!0,get:function(){return jB.raceWith}});var IB=wi();Object.defineProperty(b,"reduce",{enumerable:!0,get:function(){return IB.reduce}});var RB=uy();Object.defineProperty(b,"repeat",{enumerable:!0,get:function(){return RB.repeat}});var FB=ly();Object.defineProperty(b,"repeatWhen",{enumerable:!0,get:function(){return FB.repeatWhen}});var LB=fy();Object.defineProperty(b,"retry",{enumerable:!0,get:function(){return LB.retry}});var DB=py();Object.defineProperty(b,"retryWhen",{enumerable:!0,get:function(){return DB.retryWhen}});var NB=yd();Object.defineProperty(b,"refCount",{enumerable:!0,get:function(){return NB.refCount}});var BB=bp();Object.defineProperty(b,"sample",{enumerable:!0,get:function(){return BB.sample}});var zB=my();Object.defineProperty(b,"sampleTime",{enumerable:!0,get:function(){return zB.sampleTime}});var HB=vy();Object.defineProperty(b,"scan",{enumerable:!0,get:function(){return HB.scan}});var VB=by();Object.defineProperty(b,"sequenceEqual",{enumerable:!0,get:function(){return VB.sequenceEqual}});var WB=yp();Object.defineProperty(b,"share",{enumerable:!0,get:function(){return WB.share}});var UB=wy();Object.defineProperty(b,"shareReplay",{enumerable:!0,get:function(){return UB.shareReplay}});var GB=Sy();Object.defineProperty(b,"single",{enumerable:!0,get:function(){return GB.single}});var $B=xy();Object.defineProperty(b,"skip",{enumerable:!0,get:function(){return $B.skip}});var YB=Ey();Object.defineProperty(b,"skipLast",{enumerable:!0,get:function(){return YB.skipLast}});var XB=My();Object.defineProperty(b,"skipUntil",{enumerable:!0,get:function(){return XB.skipUntil}});var ZB=Ay();Object.defineProperty(b,"skipWhile",{enumerable:!0,get:function(){return ZB.skipWhile}});var KB=qy();Object.defineProperty(b,"startWith",{enumerable:!0,get:function(){return KB.startWith}});var JB=bo();Object.defineProperty(b,"subscribeOn",{enumerable:!0,get:function(){return JB.subscribeOn}});var QB=ky();Object.defineProperty(b,"switchAll",{enumerable:!0,get:function(){return QB.switchAll}});var ez=Oo();Object.defineProperty(b,"switchMap",{enumerable:!0,get:function(){return ez.switchMap}});var tz=jy();Object.defineProperty(b,"switchMapTo",{enumerable:!0,get:function(){return tz.switchMapTo}});var rz=Iy();Object.defineProperty(b,"switchScan",{enumerable:!0,get:function(){return rz.switchScan}});var nz=xo();Object.defineProperty(b,"take",{enumerable:!0,get:function(){return nz.take}});var iz=vp();Object.defineProperty(b,"takeLast",{enumerable:!0,get:function(){return iz.takeLast}});var oz=Ry();Object.defineProperty(b,"takeUntil",{enumerable:!0,get:function(){return oz.takeUntil}});var az=Fy();Object.defineProperty(b,"takeWhile",{enumerable:!0,get:function(){return az.takeWhile}});var uz=Ly();Object.defineProperty(b,"tap",{enumerable:!0,get:function(){return uz.tap}});var sz=wp();Object.defineProperty(b,"throttle",{enumerable:!0,get:function(){return sz.throttle}});var lz=Ny();Object.defineProperty(b,"throttleTime",{enumerable:!0,get:function(){return lz.throttleTime}});var cz=Eo();Object.defineProperty(b,"throwIfEmpty",{enumerable:!0,get:function(){return cz.throwIfEmpty}});var fz=zy();Object.defineProperty(b,"timeInterval",{enumerable:!0,get:function(){return fz.timeInterval}});var dz=Wu();Object.defineProperty(b,"timeout",{enumerable:!0,get:function(){return dz.timeout}});var pz=Hy();Object.defineProperty(b,"timeoutWith",{enumerable:!0,get:function(){return pz.timeoutWith}});var hz=Vy();Object.defineProperty(b,"timestamp",{enumerable:!0,get:function(){return hz.timestamp}});var mz=op();Object.defineProperty(b,"toArray",{enumerable:!0,get:function(){return mz.toArray}});var vz=Gy();Object.defineProperty(b,"window",{enumerable:!0,get:function(){return vz.window}});var _z=Yy();Object.defineProperty(b,"windowCount",{enumerable:!0,get:function(){return _z.windowCount}});var bz=Zy();Object.defineProperty(b,"windowTime",{enumerable:!0,get:function(){return bz.windowTime}});var gz=Qy();Object.defineProperty(b,"windowToggle",{enumerable:!0,get:function(){return gz.windowToggle}});var yz=t1();Object.defineProperty(b,"windowWhen",{enumerable:!0,get:function(){return yz.windowWhen}});var wz=o1();Object.defineProperty(b,"withLatestFrom",{enumerable:!0,get:function(){return wz.withLatestFrom}});var Sz=a1();Object.defineProperty(b,"zipAll",{enumerable:!0,get:function(){return Sz.zipAll}});var xz=s1();Object.defineProperty(b,"zipWith",{enumerable:!0,get:function(){return xz.zipWith}})});var Ql=g(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.checkAbortSignal=_1;Sn.abortBreakPoint=Oz;Sn.makeAbortError=b1;Sn.observeAbortSignal=Mz;Sn.isAbortException=Az;var v1=m1(),xp=class extends Error{};function _1(e){if(e){if(!(e instanceof AbortSignal))throw new TypeError("must pass an AbortSignal");if(e.aborted)throw b1()}}function Ez(e){return new Promise(t=>setTimeout(t,e))}async function Oz(e){await Ez(1),_1(e)}function b1(){if(typeof DOMException<"u")return new DOMException("aborted","AbortError");let e=new xp("aborted");return e.code="ERR_ABORTED",e}function Mz(e){return e?(0,v1.fromEvent)(e,"abort"):v1.Observable.create()}function Az(e){return e instanceof Error&&(e.name==="AbortError"||e.code==="ERR_ABORTED"||!!/\b(aborted|aborterror)\b/i.test(e.message))}});var Pp=g(xn=>{Object.defineProperty(xn,"__esModule",{value:!0});var Pz={grad:.9,turn:360,rad:360/(2*Math.PI)},cr=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},xe=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},mt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},M1=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},g1=function(e){return{r:mt(e.r,0,255),g:mt(e.g,0,255),b:mt(e.b,0,255),a:mt(e.a)}},Ep=function(e){return{r:xe(e.r),g:xe(e.g),b:xe(e.b),a:xe(e.a,3)}},qz=/^#([0-9a-f]{3,8})$/i,ec=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},A1=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=Math.max(t,r,n),a=o-Math.min(t,r,n),u=a?o===t?(r-n)/a:o===r?2+(n-t)/a:4+(t-r)/a:0;return{h:60*(u<0?u+6:u),s:o?a/o*100:0,v:o/255*100,a:i}},P1=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),a=n*(1-r),u=n*(1-(t-o)*r),d=n*(1-(1-t+o)*r),l=o%6;return{r:255*[n,u,a,a,d,n][l],g:255*[d,n,n,u,a,a][l],b:255*[a,a,d,n,n,u][l],a:i}},y1=function(e){return{h:M1(e.h),s:mt(e.s,0,100),l:mt(e.l,0,100),a:mt(e.a)}},w1=function(e){return{h:xe(e.h),s:xe(e.s),l:xe(e.l),a:xe(e.a,3)}},S1=function(e){return P1((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},Mo=function(e){return{h:(t=A1(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},Tz=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kz=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Cz=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jz=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ap={string:[[function(e){var t=qz.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?xe(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?xe(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Cz.exec(e)||jz.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:g1({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Tz.exec(e)||kz.exec(e);if(!t)return null;var r,n,i=y1({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(Pz[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return S1(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=i===void 0?1:i;return cr(t)&&cr(r)&&cr(n)?g1({r:Number(t),g:Number(r),b:Number(n),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,o=i===void 0?1:i;if(!cr(t)||!cr(r)||!cr(n))return null;var a=y1({h:Number(t),s:Number(r),l:Number(n),a:Number(o)});return S1(a)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,o=i===void 0?1:i;if(!cr(t)||!cr(r)||!cr(n))return null;var a=function(u){return{h:M1(u.h),s:mt(u.s,0,100),v:mt(u.v,0,100),a:mt(u.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(o)});return P1(a)},"hsv"]]},x1=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},q1=function(e){return typeof e=="string"?x1(e.trim(),Ap.string):typeof e=="object"&&e!==null?x1(e,Ap.object):[null,void 0]},Op=function(e,t){var r=Mo(e);return{h:r.h,s:mt(r.s+100*t,0,100),l:r.l,a:r.a}},Mp=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},E1=function(e,t){var r=Mo(e);return{h:r.h,s:r.s,l:mt(r.l+100*t,0,100),a:r.a}},Ao=function(){function e(t){this.parsed=q1(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return xe(Mp(this.rgba),2)},e.prototype.isDark=function(){return Mp(this.rgba)<.5},e.prototype.isLight=function(){return Mp(this.rgba)>=.5},e.prototype.toHex=function(){return t=Ep(this.rgba),r=t.r,n=t.g,i=t.b,a=(o=t.a)<1?ec(xe(255*o)):"","#"+ec(r)+ec(n)+ec(i)+a;var t,r,n,i,o,a},e.prototype.toRgb=function(){return Ep(this.rgba)},e.prototype.toRgbString=function(){return t=Ep(this.rgba),r=t.r,n=t.g,i=t.b,(o=t.a)<1?"rgba("+r+", "+n+", "+i+", "+o+")":"rgb("+r+", "+n+", "+i+")";var t,r,n,i,o},e.prototype.toHsl=function(){return w1(Mo(this.rgba))},e.prototype.toHslString=function(){return t=w1(Mo(this.rgba)),r=t.h,n=t.s,i=t.l,(o=t.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+o+")":"hsl("+r+", "+n+"%, "+i+"%)";var t,r,n,i,o},e.prototype.toHsv=function(){return t=A1(this.rgba),{h:xe(t.h),s:xe(t.s),v:xe(t.v),a:xe(t.a,3)};var t},e.prototype.invert=function(){return Ht({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Ht(Op(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Ht(Op(this.rgba,-t))},e.prototype.grayscale=function(){return Ht(Op(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Ht(E1(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Ht(E1(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Ht({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):xe(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=Mo(this.rgba);return typeof t=="number"?Ht({h:t,s:r.s,l:r.l,a:r.a}):xe(r.h)},e.prototype.isEqual=function(t){return this.toHex()===Ht(t).toHex()},e}(),Ht=function(e){return e instanceof Ao?e:new Ao(e)},O1=[];xn.Colord=Ao,xn.colord=Ht,xn.extend=function(e){e.forEach(function(t){O1.indexOf(t)<0&&(t(Ao,Ap),O1.push(t))})},xn.getFormat=function(e){return q1(e)[1]},xn.random=function(){return new Ao({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})}});var C1=g((Pre,k1)=>{var Vt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},qp=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},Tp=function(e){return 255*(e>.0031308?1.055*Math.pow(e,.4166666666666667)-.055:12.92*e)},kp=96.422,Cp=100,jp=82.521,Iz=function(e){var t,r,n={x:.9555766*(t=e).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return r={r:Tp(.032404542*n.x-.015371385*n.y-.004985314*n.z),g:Tp(-.00969266*n.x+.018760108*n.y+41556e-8*n.z),b:Tp(556434e-9*n.x-.002040259*n.y+.010572252*n.z),a:e.a},{r:Vt(r.r,0,255),g:Vt(r.g,0,255),b:Vt(r.b,0,255),a:Vt(r.a)}},Rz=function(e){var t=qp(e.r),r=qp(e.g),n=qp(e.b);return function(i){return{x:Vt(i.x,0,kp),y:Vt(i.y,0,Cp),z:Vt(i.z,0,jp),a:Vt(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*r+.1804375*n),y:100*(.2126729*t+.7151522*r+.072175*n),z:100*(.0193339*t+.119192*r+.9503041*n),a:e.a}))},Po=216/24389,Ai=24389/27,T1=function(e){var t=Rz(e),r=t.x/kp,n=t.y/Cp,i=t.z/jp;return r=r>Po?Math.cbrt(r):(Ai*r+16)/116,{l:116*(n=n>Po?Math.cbrt(n):(Ai*n+16)/116)-16,a:500*(r-n),b:200*(n-(i=i>Po?Math.cbrt(i):(Ai*i+16)/116)),alpha:t.a}},Fz=function(e,t,r){var n,i=T1(e),o=T1(t);return function(a){var u=(a.l+16)/116,d=a.a/500+u,l=u-a.b/200;return Iz({x:(Math.pow(d,3)>Po?Math.pow(d,3):(116*d-16)/Ai)*kp,y:(a.l>8?Math.pow((a.l+16)/116,3):a.l/Ai)*Cp,z:(Math.pow(l,3)>Po?Math.pow(l,3):(116*l-16)/Ai)*jp,a:a.alpha})}({l:Vt((n={l:i.l*(1-r)+o.l*r,a:i.a*(1-r)+o.a*r,b:i.b*(1-r)+o.b*r,alpha:i.alpha*(1-r)+o.alpha*r}).l,0,400),a:n.a,b:n.b,alpha:Vt(n.alpha)})};k1.exports=function(e){function t(r,n,i){i===void 0&&(i=5);for(var o=[],a=1/(i-1),u=0;u<=i-1;u++)o.push(r.mix(n,a*u));return o}e.prototype.mix=function(r,n){n===void 0&&(n=.5);var i=r instanceof e?r:new e(r),o=Fz(this.toRgb(),i.toRgb(),n);return new e(o)},e.prototype.tints=function(r){return t(this,"#fff",r)},e.prototype.shades=function(r){return t(this,"#000",r)},e.prototype.tones=function(r){return t(this,"#808080",r)}}});var I1=g((qre,j1)=>{j1.exports=function(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var o={};e.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,d,l=n[this.toHex()];if(l)return l;if(a?.closest){var f=this.toRgb(),s=1/0,c="black";if(!o.length)for(var p in r)o[p]=new e(r[p]).toRgb();for(var m in r){var v=(u=f,d=o[m],Math.pow(u.r-d.r,2)+Math.pow(u.g-d.g,2)+Math.pow(u.b-d.b,2));v<s&&(s=v,c=m)}return c}},t.string.push([function(a){var u=a.toLowerCase(),d=u==="transparent"?"#0000":r[u];return d?new e(d).toRgb():null},"name"])}});var L1=g(Yr=>{"use strict";var R1=Yr&&Yr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.colord=Yr.Colord=void 0;var Lz=Pp(),Dz=R1(C1()),Nz=R1(I1());(0,Lz.extend)([Dz.default,Nz.default]);var F1=Pp();Object.defineProperty(Yr,"Colord",{enumerable:!0,get:function(){return F1.Colord}});Object.defineProperty(Yr,"colord",{enumerable:!0,get:function(){return F1.colord}})});var Ip=g((kre,D1)=>{D1.exports=JBrowseExports["react-dom"]});var B1=g(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.when=N1;tc.whenPresent=Hz;var Bz=tr(),zz=Ql();function N1(e,{timeout:t,signal:r,name:n}={}){return new Promise((i,o)=>{let a=!1,u=(0,Bz.when)(e),d,l=()=>{};t&&(d=setTimeout(()=>{a||(a=!0,u.cancel(),o(new Error(`timed out waiting for ${n||"whenPresent"}`)))},t),l=()=>{d&&clearTimeout(d)}),r&&r.addEventListener("abort",()=>{a||(a=!0,u.cancel(),l(),o((0,zz.makeAbortError)()))}),u.then(()=>{a||(a=!0,l(),i(!0))}).catch(f=>{a||(a=!0,l(),o(f))})})}async function Hz(e,t={}){return await N1(()=>{let r=e();return r!=null},t),e()}});var z1=g(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.intersection2=Vz;qo.doesIntersect2=Wz;qo.isContainedWithin=Uz;function Vz(e,t,r,n){return t>r&&e<n&&n-r&&t-e?e>r?t<n?[e,t]:[e,n]:t<n?[r,t]:[r,n]:[]}function Wz(e,t,r,n){return t>r&&e<n}function Uz(e,t,r,n){return r<=e&&n>=t}});var H1=g(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.dedupe=Gz;function Gz(e,t=JSON.stringify){let r=[],n=new Set;for(let i of e){let o=t(i);n.has(o)||(r.push(i),n.add(o))}return r}});var W1=g((Rre,V1)=>{V1.exports=!1});var Np=g((Fre,Y1)=>{"use strict";var rc={},oc={},To={METHOD:"method",PROPERTY:"property"},nc=class{constructor(t,r){this.inst=t,this.args=r}},Fp=class extends nc{constructor(t,r){super(t,r),this.type=To.METHOD}execute(t){t[this.inst](...this.args)}},Lp=class extends nc{constructor(t,r){super(t,r),this.type=To.PROPERTY}execute(t){t[this.inst]=this.args[0]}},$z={[To.METHOD]:Fp,[To.PROPERTY]:Lp},ic=class{constructor(t,r,n){return new $z[t](r,n)}};Object.entries(To).forEach(([e,t])=>{Object.defineProperty(ic,e,{value:t,configurable:!1,enumerable:!0,writable:!1})});oc=ic;var G1=Object.freeze({METHODS:["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearHitRegions","clearRect","clip","closePath","drawFocusIfNeeded","drawImage","ellipse","fill","fillRect","fillText","lineTo","moveTo","putImageData","quadraticCurveTo","rect","removeHitRegion","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],PROPERTIES:["direction","fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"]}),Wt=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push"),fromJSON:Symbol.for("fromJSON")}),ko=class{constructor(t=null){this[Wt.sequence]=[],t&&this[Wt.fromJSON](t)}[Wt.fromJSON](t={sequence:[]}){t.sequence.forEach(({type:r,inst:n,args:i})=>{this[Wt.push](r,n,i)})}[Wt.push](t,r,n){this[Wt.sequence].push(new oc(t,r,n))}execute(t){t.save(),this[Wt.sequence].forEach(r=>r.execute(t)),t.restore()}toJSON(){return{sequence:this[Wt.sequence]}}};G1.METHODS.forEach(e=>{Object.defineProperty(ko.prototype,e,{value:function(...r){this[Wt.push](oc.METHOD,e,r)},writable:!1,enumerable:!0,configurable:!1})});G1.PROPERTIES.forEach(e=>{Object.defineProperty(ko.prototype,e,{get(){throw`Invalid canvas sequencer interaction, cannot get ${e}.`},set(t){this[Wt.push](oc.PROPERTY,e,[t])},enumerable:!0,configurable:!1})});rc=ko;var $1={},U1=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push")});function Yz(e,t){let r=e.replace(/^\{|\}$/gu,"");return r!==e?t.hasOwnProperty(r)?t[r]:r:e}var Dp=class extends rc{build(t={}){let r=new rc;return this[U1.sequence].forEach(({type:n,inst:i,args:o})=>{let a=o.map(u=>typeof u=="string"?Yz(u,t):u);r[U1.push](n,i,a)}),r}execute(){throw new TypeError("Cannot execute a blueprint.")}};$1=Dp;Y1.exports={CanvasSequence:rc,CanvasBlueprint:$1}});var Bp=g(Le=>{"use strict";var Xz=Le&&Le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Le,"__esModule",{value:!0});Le.ImageBitmapType=Le.createImageBitmap=Le.createCanvas=void 0;Le.drawImageOntoCanvasContext=Kz;var Zz=Xz(W1()),Z1=Np();function Kz(e,t){e.serializedCommands?new Z1.CanvasSequence(e.serializedCommands).execute(t):t.drawImage(e,0,0)}var X1={realOffscreenCanvas:typeof OffscreenCanvas=="function",node:Zz.default};X1.realOffscreenCanvas?(Le.createCanvas=(e,t)=>new OffscreenCanvas(e,t),Le.createImageBitmap=window.createImageBitmap||self.createImageBitmap,Le.ImageBitmapType=window.ImageBitmap||self.ImageBitmap):X1.node?(Le.createCanvas=(...e)=>nodeCreateCanvas(...e),Le.createImageBitmap=async e=>{let t=e.toDataURL(),r=new nodeImage;return new Promise((n,i)=>{r.onload=()=>{n(r)},r.onerror=i,r.src=t})}):(Le.createCanvas=(e,t)=>{let r=new Z1.CanvasSequence;return{width:e,height:t,getContext(){return r}}},Le.createImageBitmap=async e=>{let t=e.getContext("2d");return{height:e.height,width:e.width,serializedCommands:t.toJSON(),containsNoTransferables:!0}},Le.ImageBitmapType=String)});var Hp=g(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.blobToDataURL=Jz;function Jz(e){let t=new FileReader;return new Promise((r,n)=>{t.onload=i=>{i.target?r(i.target.result):n(new Error("unknown result reading blob from canvas"))},t.readAsDataURL(e)})}});var K1=g((Nre,ac)=>{(function(){"use strict";var e,t,r,n,i;function o(s,c){var p=Object.keys(c),m;for(m=0;m<p.length;m++)s=s.replace(new RegExp("\\{"+p[m]+"\\}","gi"),c[p[m]]);return s}function a(s){var c,p,m;if(!s)throw new Error("cannot create a random attribute name for an undefined object");c="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="";do for(p="",m=0;m<12;m++)p+=c[Math.floor(Math.random()*c.length)];while(s[p]);return p}function u(s,c){var p,m,v={},h,_;for(s=s.split(","),c=c||10,p=0;p<s.length;p+=2)m="&"+s[p+1]+";",h=parseInt(s[p],c),v[m]="&#"+h+";";return v["\\xa0"]="&#160;",v}function d(s){var c={left:"start",right:"end",center:"middle",start:"start",end:"end"};return c[s]||c.start}function l(s){var c={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return c[s]||c.alphabetic}i=u("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"}},r=function(s,c){this.__root=s,this.__ctx=c},r.prototype.addColorStop=function(s,c){var p=this.__ctx.__createElement("stop"),m,v;p.setAttribute("offset",s),c.indexOf("rgba")!==-1?(m=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,v=m.exec(c),p.setAttribute("stop-color",o("rgb({r},{g},{b})",{r:v[1],g:v[2],b:v[3]})),p.setAttribute("stop-opacity",v[4])):p.setAttribute("stop-color",c),this.__root.appendChild(p)},n=function(s,c){this.__root=s,this.__ctx=c},t=function(s){var c={width:500,height:500,enableMirroring:!1},p;if(arguments.length>1?(p=c,p.width=arguments[0],p.height=arguments[1]):s?p=s:p=c,!(this instanceof t))return new t(p);this.width=p.width||c.width,this.height=p.height||c.height,this.enableMirroring=p.enableMirroring!==void 0?p.enableMirroring:c.enableMirroring,this.canvas=this,this.__document=p.document||document,this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d"),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)},t.prototype.__createElement=function(s,c,p){typeof c>"u"&&(c={});var m=this.__document.createElementNS("http://www.w3.org/2000/svg",s),v=Object.keys(c),h,_;for(p&&(m.setAttribute("fill","none"),m.setAttribute("stroke","none")),h=0;h<v.length;h++)_=v[h],m.setAttribute(_,c[_]);return m},t.prototype.__setDefaultStyles=function(){var s=Object.keys(e),c,p;for(c=0;c<s.length;c++)p=s[c],this[p]=e[p].canvas},t.prototype.__applyStyleState=function(s){var c=Object.keys(s),p,m;for(p=0;p<c.length;p++)m=c[p],this[m]=s[m]},t.prototype.__getStyleState=function(){var s,c={},p=Object.keys(e),m;for(s=0;s<p.length;s++)m=p[s],c[m]=this[m];return c},t.prototype.__applyStyleToCurrentElement=function(s){var c=Object.keys(e),p,m,v,h,_,y;for(p=0;p<c.length;p++)if(m=e[c[p]],v=this[c[p]],m.apply)if(m.apply.indexOf("fill")!==-1&&v instanceof n){if(v.__ctx)for(;v.__ctx.__defs.childNodes.length;)h=v.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[h]=h,this.__defs.appendChild(v.__ctx.__defs.childNodes[0]);this.__currentElement.setAttribute("fill",o("url(#{id})",{id:v.__root.getAttribute("id")}))}else m.apply.indexOf("fill")!==-1&&v instanceof r?this.__currentElement.setAttribute("fill",o("url(#{id})",{id:v.__root.getAttribute("id")})):m.apply.indexOf(s)!==-1&&m.svg!==v&&((m.svgAttr==="stroke"||m.svgAttr==="fill")&&v.indexOf("rgba")!==-1?(_=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,y=_.exec(v),this.__currentElement.setAttribute(m.svgAttr,o("rgb({r},{g},{b})",{r:y[1],g:y[2],b:y[3]})),this.__currentElement.setAttribute(m.svgAttr+"-opacity",y[4])):this.__currentElement.setAttribute(m.svgAttr,v))},t.prototype.__closestGroupOrSvg=function(s){return s=s||this.__currentElement,s.nodeName==="g"||s.nodeName==="svg"?s:this.__closestGroupOrSvg(s.parentNode)},t.prototype.getSerializedSvg=function(s){var c=new XMLSerializer().serializeToString(this.__root),p,m,v,h,_,y;if(y=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,y.test(c)&&(c=c.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),s)for(p=Object.keys(i),m=0;m<p.length;m++)v=p[m],h=i[v],_=new RegExp(v,"gi"),_.test(c)&&(c=c.replace(_,h));return c},t.prototype.getSvg=function(){return this.__root},t.prototype.save=function(){var s=this.__createElement("g"),c=this.__closestGroupOrSvg();this.__groupStack.push(c),c.appendChild(s),this.__currentElement=s,this.__stack.push(this.__getStyleState())},t.prototype.restore=function(){this.__currentElement=this.__groupStack.pop();var s=this.__stack.pop();this.__applyStyleState(s)},t.prototype.__addTransform=function(s){var c=this.__closestGroupOrSvg();if(c.childNodes.length>0){var p=this.__createElement("g");c.appendChild(p),this.__currentElement=p}var m=this.__currentElement.getAttribute("transform");m?m+=" ":m="",m+=s,this.__currentElement.setAttribute("transform",m)},t.prototype.scale=function(s,c){c===void 0&&(c=s),this.__addTransform(o("scale({x},{y})",{x:s,y:c}))},t.prototype.rotate=function(s){var c=s*180/Math.PI;this.__addTransform(o("rotate({angle},{cx},{cy})",{angle:c,cx:0,cy:0}))},t.prototype.translate=function(s,c){this.__addTransform(o("translate({x},{y})",{x:s,y:c}))},t.prototype.transform=function(s,c,p,m,v,h){this.__addTransform(o("matrix({a},{b},{c},{d},{e},{f})",{a:s,b:c,c:p,d:m,e:v,f:h}))},t.prototype.beginPath=function(){var s,c;this.__currentDefaultPath="",this.__currentPosition={},s=this.__createElement("path",{},!0),c=this.__closestGroupOrSvg(),c.appendChild(s),this.__currentElement=s},t.prototype.__applyCurrentDefaultPath=function(){if(this.__currentElement.nodeName==="path"){var s=this.__currentDefaultPath;this.__currentElement.setAttribute("d",s)}else throw new Error("Attempted to apply path command to node "+this.__currentElement.nodeName)},t.prototype.__addPathCommand=function(s){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=s},t.prototype.moveTo=function(s,c){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:s,y:c},this.__addPathCommand(o("M {x} {y}",{x:s,y:c}))},t.prototype.closePath=function(){this.__addPathCommand("Z")},t.prototype.lineTo=function(s,c){this.__currentPosition={x:s,y:c},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(o("L {x} {y}",{x:s,y:c})):this.__addPathCommand(o("M {x} {y}",{x:s,y:c}))},t.prototype.bezierCurveTo=function(s,c,p,m,v,h){this.__currentPosition={x:v,y:h},this.__addPathCommand(o("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:s,cp1y:c,cp2x:p,cp2y:m,x:v,y:h}))},t.prototype.quadraticCurveTo=function(s,c,p,m){this.__currentPosition={x:p,y:m},this.__addPathCommand(o("Q {cpx} {cpy} {x} {y}",{cpx:s,cpy:c,x:p,y:m}))};var f=function(s){var c=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return[s[0]/c,s[1]/c]};t.prototype.arcTo=function(s,c,p,m,v){var h=this.__currentPosition&&this.__currentPosition.x,_=this.__currentPosition&&this.__currentPosition.y;if(!(typeof h>"u"||typeof _>"u")){if(v<0)throw new Error("IndexSizeError: The radius provided ("+v+") is negative.");if(h===s&&_===c||s===p&&c===m||v===0){this.lineTo(s,c);return}var y=f([h-s,_-c]),S=f([p-s,m-c]);if(y[0]*S[1]===y[1]*S[0]){this.lineTo(s,c);return}var E=y[0]*S[0]+y[1]*S[1],M=Math.acos(Math.abs(E)),O=f([y[0]+S[0],y[1]+S[1]]),w=v/Math.sin(M/2),A=s+w*O[0],q=c+w*O[1],P=[-y[1],y[0]],T=[S[1],-S[0]],I=function(re){var ze=re[0],Bn=re[1];return Bn>=0?Math.acos(ze):-Math.acos(ze)},z=I(P),Y=I(T);this.lineTo(A+P[0]*v,q+P[1]*v),this.arc(A,q,v,z,Y)}},t.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},t.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},t.prototype.rect=function(s,c,p,m){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(s,c),this.lineTo(s+p,c),this.lineTo(s+p,c+m),this.lineTo(s,c+m),this.lineTo(s,c),this.closePath()},t.prototype.fillRect=function(s,c,p,m){var v,h;v=this.__createElement("rect",{x:s,y:c,width:p,height:m},!0),h=this.__closestGroupOrSvg(),h.appendChild(v),this.__currentElement=v,this.__applyStyleToCurrentElement("fill")},t.prototype.strokeRect=function(s,c,p,m){var v,h;v=this.__createElement("rect",{x:s,y:c,width:p,height:m},!0),h=this.__closestGroupOrSvg(),h.appendChild(v),this.__currentElement=v,this.__applyStyleToCurrentElement("stroke")},t.prototype.clearRect=function(s,c,p,m){var v,h=this.__closestGroupOrSvg();v=this.__createElement("rect",{x:s,y:c,width:p,height:m,fill:"#FFFFFF"},!0),h.appendChild(v)},t.prototype.createLinearGradient=function(s,c,p,m){var v=this.__createElement("linearGradient",{id:a(this.__ids),x1:s+"px",x2:p+"px",y1:c+"px",y2:m+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(v),new r(v,this)},t.prototype.createRadialGradient=function(s,c,p,m,v,h){var _=this.__createElement("radialGradient",{id:a(this.__ids),cx:m+"px",cy:v+"px",r:h+"px",fx:s+"px",fy:c+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(_),new r(_,this)},t.prototype.__parseFont=function(){var s=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i,c=s.exec(this.font),p={style:c[1]||"normal",size:c[4]||"10px",family:c[6]||"sans-serif",weight:c[3]||"normal",decoration:c[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(p.decoration="underline"),this.__fontHref&&(p.href=this.__fontHref),p},t.prototype.__wrapTextLink=function(s,c){if(s.href){var p=this.__createElement("a");return p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.href),p.appendChild(c),p}return c},t.prototype.__applyText=function(s,c,p,m){var v=this.__parseFont(),h=this.__closestGroupOrSvg(),_=this.__createElement("text",{"font-family":v.family,"font-size":v.size,"font-style":v.style,"font-weight":v.weight,"text-decoration":v.decoration,x:c,y:p,"text-anchor":d(this.textAlign),"dominant-baseline":l(this.textBaseline)},!0);_.appendChild(this.__document.createTextNode(s)),this.__currentElement=_,this.__applyStyleToCurrentElement(m),h.appendChild(this.__wrapTextLink(v,_))},t.prototype.fillText=function(s,c,p){this.__applyText(s,c,p,"fill")},t.prototype.strokeText=function(s,c,p){this.__applyText(s,c,p,"stroke")},t.prototype.measureText=function(s){return this.__ctx.font=this.font,this.__ctx.measureText(s)},t.prototype.arc=function(s,c,p,m,v,h){if(m!==v){m=m%(2*Math.PI),v=v%(2*Math.PI),m===v&&(v=(v+2*Math.PI-.001*(h?-1:1))%(2*Math.PI));var _=s+p*Math.cos(v),y=c+p*Math.sin(v),S=s+p*Math.cos(m),E=c+p*Math.sin(m),M=h?0:1,O=0,w=v-m;w<0&&(w+=2*Math.PI),h?O=w>Math.PI?0:1:O=w>Math.PI?1:0,this.lineTo(S,E),this.__addPathCommand(o("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:p,ry:p,xAxisRotation:0,largeArcFlag:O,sweepFlag:M,endX:_,endY:y})),this.__currentPosition={x:_,y}}},t.prototype.clip=function(){var s=this.__closestGroupOrSvg(),c=this.__createElement("clipPath"),p=a(this.__ids),m=this.__createElement("g");s.removeChild(this.__currentElement),c.setAttribute("id",p),c.appendChild(this.__currentElement),this.__defs.appendChild(c),s.setAttribute("clip-path",o("url(#{id})",{id:p})),s.appendChild(m),this.__currentElement=m},t.prototype.drawImage=function(){var s=Array.prototype.slice.call(arguments),c=s[0],p,m,v,h,_=0,y=0,S,E,M,O,w,A,q,P,T,I,z;if(s.length===3)p=s[1],m=s[2],S=c.width,E=c.height,v=S,h=E;else if(s.length===5)p=s[1],m=s[2],v=s[3],h=s[4],S=c.width,E=c.height;else if(s.length===9)_=s[1],y=s[2],S=s[3],E=s[4],p=s[5],m=s[6],v=s[7],h=s[8];else throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);if(M=this.__closestGroupOrSvg(),q=this.__currentElement,c instanceof t){for(O=c.getSvg(),w=O.childNodes[0];w.childNodes.length;)z=w.childNodes[0].getAttribute("id"),this.__ids[z]=z,this.__defs.appendChild(w.childNodes[0]);A=O.childNodes[1],M.appendChild(A),this.__currentElement=A,this.translate(p,m),this.__currentElement=q}else(c.nodeName==="CANVAS"||c.nodeName==="IMG")&&(P=this.__createElement("image"),P.setAttribute("width",v),P.setAttribute("height",h),P.setAttribute("preserveAspectRatio","none"),(_||y||S!==c.width||E!==c.height)&&(T=this.__document.createElement("canvas"),T.width=v,T.height=h,I=T.getContext("2d"),I.drawImage(c,_,y,S,E,0,0,v,h),c=T),P.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.nodeName==="CANVAS"?c.toDataURL():c.getAttribute("src")),M.appendChild(P),this.__currentElement=P,this.translate(p,m),this.__currentElement=q)},t.prototype.createPattern=function(s,c){var p=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),m=a(this.__ids),v;return p.setAttribute("id",m),p.setAttribute("width",s.width),p.setAttribute("height",s.height),s.nodeName==="CANVAS"||s.nodeName==="IMG"?(v=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),v.setAttribute("width",s.width),v.setAttribute("height",s.height),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.nodeName==="CANVAS"?s.toDataURL():s.getAttribute("src")),p.appendChild(v),this.__defs.appendChild(p)):s instanceof t&&(p.appendChild(s.__root.childNodes[1]),this.__defs.appendChild(p)),new n(p,this)},t.prototype.drawFocusRing=function(){},t.prototype.createImageData=function(){},t.prototype.getImageData=function(){},t.prototype.putImageData=function(){},t.prototype.globalCompositeOperation=function(){},t.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=t),typeof ac=="object"&&typeof ac.exports=="object"&&(ac.exports=t)})()});var Q1=g(it=>{"use strict";var Qz=it&&it.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),eH=it&&it.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tH=it&&it.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Qz(t,e,r);return eH(t,e),t},rH=it&&it.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(it,"__esModule",{value:!0});it.renderToAbstractCanvas=iH;it.getSerializedSvg=oH;it.ReactRendering=aH;var Wp=rH(R()),J1=Np(),Vp=Bp(),nH=Hp();async function iH(e,t,r,n){let{exportSVG:i,highResolutionScaling:o=1}=r;if(i)if(i.rasterizeLayers){let a=i.scale||o,u=(0,Vp.createCanvas)(Math.ceil(e*a),t*a),d=u.getContext("2d");if(!d)throw new Error("2d canvas rendering not supported on this platform");return d.scale(a,a),{...await n(d),reactElement:Wp.default.createElement("image",{width:e,height:t,xlinkHref:"convertToBlob"in u?await(0,nH.blobToDataURL)(await u.convertToBlob({type:"image/png"})):u.toDataURL("image/png")})}}else{let a=new J1.CanvasSequence;return{...await n(a),canvasRecordedData:a.toJSON()}}else{let a=o,u=(0,Vp.createCanvas)(Math.ceil(e*a),t*a),d=u.getContext("2d");if(!d)throw new Error("2d canvas rendering not supported on this platform");return d.scale(a,a),{...await n(d),imageData:await(0,Vp.createImageBitmap)(u)}}}async function oH(e){let{width:t,height:r,canvasRecordedData:n}=e,i=await Promise.resolve().then(()=>tH(K1())),o=new i.default(t,r);return new J1.CanvasSequence(n).execute(o),o.getSvg().innerHTML}function aH({rendering:e}){return Wp.default.isValidElement(e.reactElement)?e.reactElement:Wp.default.createElement("g",{dangerouslySetInnerHTML:{__html:e.html||""}})}});var tw=g(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.isFeature=uH;function uH(e){return typeof e=="object"&&e!==null&&typeof e.get=="function"&&typeof e.id=="function"}function ew(e){return"uniqueId"in e&&typeof e.data!="object"}var Up=class e{constructor(t){var r;ew(t)?this.data=t:(this.data=t.data,this.parentHandle=t.parent);let n=ew(t)?t.uniqueId:t.id;if(n==null)throw new Error("SimpleFeature requires a unique `id` or `data.uniqueId` attribute");if(this.uniqueId=String(n),!(this.data.aliases||this.data.end-this.data.start>=0))throw new Error(`invalid feature data, end less than start. end: ${this.data.end} start: ${this.data.start}`);this.data.subfeatures&&(this.subfeatures=(r=this.data.subfeatures)===null||r===void 0?void 0:r.map((i,o)=>typeof i.get!="function"?new e({id:i.uniqueId||`${n}-${o}`,data:{strand:this.data.strand,...i},parent:this}):i))}get(t){return t==="subfeatures"?this.subfeatures:t==="parent"?this.parent():this.data[t]}set(t,r){this.data[t]=r}tags(){return Object.keys(this.data)}id(){return this.uniqueId}parent(){return this.parentHandle}children(){return this.get("subfeatures")}toJSON(){let t={...this.data,uniqueId:this.id()},r=this.parent();r&&(t.parentId=r.id());let n=this.children();return n&&(t.subfeatures=n.map(i=>i.toJSON())),t}static fromJSON(t){return new e({...t})}};uc.default=Up});var rd=g(k=>{"use strict";var sH=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),On=k&&k.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&sH(t,e,r)},Yp=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(k,"__esModule",{value:!0});k.blobToDataURL=k.isFeature=k.SimpleFeature=k.defaultCodonTable=k.defaultStops=k.defaultStarts=k.rIC=k.complement=k.isElectron=void 0;k.useDebounce=pH;k.useWidthSetter=hH;k.useDebouncedCallback=mH;k.findParentThat=iw;k.springAnimate=vH;k.findParentThatIs=Co;k.getSession=_H;k.getContainingView=ow;k.getContainingTrack=bH;k.getContainingDisplay=gH;k.assembleLocString=yH;k.assembleLocStringFast=aw;k.parseLocStringOneBased=uw;k.parseLocString=Gp;k.compareLocs=sw;k.compareLocStrings=wH;k.clamp=SH;k.bpToPx=$p;k.radToDeg=MH;k.degToRad=AH;k.polarToCartesian=PH;k.cartesianToPolar=qH;k.featureSpanPx=TH;k.bpSpanPx=lw;k.iterMap=kH;k.findLastIndex=CH;k.findLast=jH;k.makeAbortableReaction=IH;k.renameRegionIfNeeded=cw;k.renameRegionsIfNeeded=RH;k.minmax=FH;k.shorten=fw;k.stringify=LH;k.revcom=DH;k.reverse=dw;k.measureText=pw;k.getFrame=BH;k.generateCodonTable=zH;k.updateStatus=HH;k.hashCode=hw;k.objectHash=VH;k.bytesForRegions=WH;k.isSupportedIndexingAdapter=UH;k.getBpDisplayStr=GH;k.toLocale=Pi;k.getTickDisplayStr=$H;k.getViewParams=YH;k.getLayoutId=XH;k.useLocalStorage=ZH;k.getUriLink=mw;k.getStr=vw;k.coarseStripHTML=_w;k.linkify=KH;k.measureGridWidth=JH;k.getEnv=QH;k.localStorageGetItem=eV;k.localStorageSetItem=tV;k.max=bw;k.min=rV;k.sum=gw;k.avg=nV;k.groupBy=iV;k.notEmpty=oV;k.mergeIntervals=yw;k.gatherOverlaps=aV;k.stripAlpha=uV;k.getStrokeProps=sV;k.getFillProps=lV;k.renderToStaticMarkup=cV;k.isGzip=fV;var En=R(),lH=Yp(Wv()),De=Ge(),cH=tr(),sc=Va(),rw=Ql(),fH=Va(),dH=Yp(Hf()),Xp=L1(),nw=Ip();On(Va(),k);On(Ql(),k);On(B1(),k);On(z1(),k);On(H1(),k);On(Bp(),k);On(Q1(),k);function pH(e,t){let[r,n]=(0,En.useState)(e);return(0,En.useEffect)(()=>{let i=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(i)}},[e,t]),r}function hH(e,t){let[r,{width:n}]=(0,dH.default)();return(0,En.useEffect)(()=>{n&&(0,De.isAlive)(e)&&requestAnimationFrame(()=>{e.setWidth(n-Number.parseInt(t,10)*2)})},[t,e,n]),r}function mH(e,t=400){let r=(0,En.useRef)(),n=(0,En.useRef)();return(0,En.useEffect)(()=>{n.current&&clearTimeout(n.current)},[]),function(...o){r.current=o,n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{r.current&&e(...r.current)},t)}}function iw(e,t){if(!(0,De.hasParent)(e))throw new Error("node does not have parent");let r=(0,De.getParent)(e);for(;r&&(0,De.isAlive)(r);){if(t(r))return r;if((0,De.hasParent)(r))r=(0,De.getParent)(r);else break}throw new Error("no matching node found")}function vH(e,t,r,n=()=>{},i=0,o=400,a=20,u=!0){i||(i=Math.abs(t-e)/1e3);let l;function f(s){let c=Date.now(),p=s.lastPosition,m=s.lastTime||c,v=s.lastVelocity||0;c>m+64&&(m=c);let h=Math.floor(c-m);for(let M=0;M<h;++M){let O=-o*(p-t),w=-a*v,A=(O+w)/1;v+=A*1/1e3,p+=v*1/1e3}let _=Math.abs(v)<=i,y=o!==0?Math.abs(t-p)<=i:!0;(u&&o!==0?e<t?p>t:p<t:!1)||_&&y?(r(t),n()):(r(p),l=requestAnimationFrame(()=>{f({lastPosition:p,lastTime:c,lastVelocity:v})}))}return[()=>{f({lastPosition:e})},()=>{cancelAnimationFrame(l)}]}function Co(e,t){return iw(e,t)}function _H(e){try{return Co(e,sc.isSessionModel)}catch{throw new Error("no session model found!")}}function ow(e){try{return Co(e,sc.isViewModel)}catch{throw new Error("no containing view found")}}function bH(e){try{return Co(e,sc.isTrackModel)}catch{throw new Error("no containing track found")}}function gH(e){try{return Co(e,sc.isDisplayModel)}catch{throw new Error("no containing display found")}}function yH(e){return aw(e,Pi)}function aw(e,t=r=>r){let{assemblyName:r,refName:n,start:i,end:o,reversed:a}=e,u=r?`{${r}}`:"",d;i!==void 0?d=`:${t(i+1)}`:o!==void 0?d=":1":d="";let l;o!==void 0?l=i!==void 0&&i+1===o?"":`..${t(o)}`:l=i!==void 0?"..":"";let f="";return a&&(f="[rev]"),`${u}${n}${d}${l}${f}`}function uw(e,t){if(!e)throw new Error("no location string provided, could not parse");let r=!1;e.endsWith("[rev]")&&(r=!0,e=e.replace(/\[rev]$/,"")),e=e.replace(/\s/,"");let n=/({(.+)})?(.+)/.exec(e);if(!n)throw new Error(`invalid location string: "${e}"`);let[,,i,o]=n,a=i,u=o;if(!a&&u.startsWith("{}"))throw new Error(`no assembly name was provided in location "${u}"`);let d=u.lastIndexOf(":");if(d===-1){if(t(u,a))return{assemblyName:a,refName:u,reversed:r};throw new Error(`Unknown reference sequence "${u}"`)}let l=u.slice(0,d),f=u.slice(d+1);if(t(l,a)&&t(u,a))throw new Error(`ambiguous location string: "${e}"`);if(t(l,a))if(f){let s=/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)(-?(\d+|\d{1,3}(,\d{3})*))$/.exec(f),c=/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)?$/.exec(f);if(s){let[,p,,,,m]=s;if(p!==void 0&&m!==void 0)return{assemblyName:a,refName:l,start:+p.replaceAll(",",""),end:+m.replaceAll(",",""),reversed:r}}else if(c){let[,p,,,m]=c;if(p!==void 0)return m?{assemblyName:a,refName:l,start:+p.replaceAll(",",""),reversed:r}:{assemblyName:a,refName:l,start:+p.replaceAll(",",""),end:+p.replaceAll(",",""),reversed:r}}else throw new Error(`could not parse range "${f}" on location "${e}"`)}else return{assemblyName:a,refName:l,reversed:r};else if(t(u,a))return{assemblyName:a,refName:u,reversed:r};throw new Error(`unknown reference sequence name in location "${e}"`)}function Gp(e,t){let r=uw(e,t);return typeof r.start=="number"&&(r.start-=1),r}function sw(e,t){let r=e.assemblyName||t.assemblyName?(e.assemblyName||"").localeCompare(t.assemblyName||""):0;if(r)return r;let n=e.refName||t.refName?(e.refName||"").localeCompare(t.refName||""):0;if(n)return n;if(e.start!==void 0&&t.start!==void 0){let i=e.start-t.start;if(i)return i}if(e.end!==void 0&&t.end!==void 0){let i=e.end-t.end;if(i)return i}return 0}function wH(e,t,r){let n=Gp(e,r),i=Gp(t,r);return sw(n,i)}function SH(e,t,r){return e<t?t:e>r?r:e}function xH(e){return Math.round(e*10)/10}function $p(e,{reversed:t,end:r=0,start:n=0},i){return xH((t?r-e:e-n)/i)}var EH=180/Math.PI,OH=Math.PI/180;function MH(e){return e*EH%360}function AH(e){return e*OH%(2*Math.PI)}function PH(e,t){return[e*Math.cos(t),e*Math.sin(t)]}function qH(e,t){let r=Math.sqrt(e*e+t*t),n=Math.atan(t/e);return[r,n]}function TH(e,t,r){return lw(e.get("start"),e.get("end"),t,r)}function lw(e,t,r,n){let i=$p(e,r,n),o=$p(t,r,n);return r.reversed?[o,i]:[i,o]}function kH(e,t,r){let n=Array.from({length:r||0}),i=0;for(let o of e)n[i]=t(o),i+=1;return n}function CH(e,t){let r=e.length;for(;r--;)if(t(e[r],r,e))return r;return-1}function jH(e,t){let r=e.length;for(;r--;)if(t(e[r],r,e))return e[r]}function IH(e,t,r,n,i,o,a){let u;function d(l){(0,rw.isAbortException)(l)||((0,De.isAlive)(e)?a(l):console.error(l))}(0,De.addDisposer)(e,(0,cH.reaction)(()=>{try{return t(e)}catch(l){d(l);return}},async(l,f)=>{if(u&&!u.signal.aborted&&u.abort(),!(0,De.isAlive)(e))return;u=new AbortController;let s=u;i(s);try{let c=await r(l,s.signal,e,f);(0,rw.checkAbortSignal)(s.signal),(0,De.isAlive)(e)&&o(c)}catch(c){s.signal.aborted||s.abort(),d(c)}},n)),(0,De.addDisposer)(e,()=>{u&&!u.signal.aborted&&u.abort()})}function cw(e,t){if((0,De.isStateTreeNode)(t)&&!(0,De.isAlive)(t))return t;if(e?.[t.refName]){t=(0,De.isStateTreeNode)(t)?{...(0,De.getSnapshot)(t)}:{...t};let r=e[t.refName];if(r)return{...t,refName:r,originalRefName:t.refName}}return t}async function RH(e,t){let{regions:r=[],adapterConfig:n}=t;if(!t.sessionId)throw new Error("sessionId is required");let i=r.map(a=>a.assemblyName),o=Object.fromEntries(await Promise.all([...new Set(i)].map(async a=>[a,await e.getRefNameMapForAdapter(n,a,t)])));return{...t,regions:r.map((a,u)=>cw(o[i[u]],a))}}function FH(e,t){return[Math.min(e,t),Math.max(e,t)]}function fw(e,t=70,r=30){return e.length>t?`${e.slice(0,r)}...${e.slice(-r)}`:e}function LH({refName:e,coord:t,assemblyName:r,oob:n},i){return[r&&i?`{${r}}`:"",e?`${fw(e)}:${Pi(t)}${n?" (out of bounds)":""}`:""].join("")}k.isElectron=/electron/i.test(typeof navigator<"u"?navigator.userAgent:"");function DH(e){return dw((0,k.complement)(e))}function dw(e){return e.split("").reverse().join("")}k.complement=(()=>{let e=/[ACGT]/gi,t={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"};return r=>r.replaceAll(e,n=>t[n]||"")})();k.rIC=typeof jest>"u"?typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:e=>setTimeout(()=>{e()},1):e=>{e()};var NH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625];function pw(e,t=10){var r;let n=.5279276315789471,i=String(e),o=0;for(let a=0;a<i.length;a++){let u=i.charCodeAt(a);o+=(r=NH[u])!==null&&r!==void 0?r:n}return o*t}function BH(e,t,r,n){return r===1?(e+n)%3+1:-1*((t-n)%3)-1}k.defaultStarts=["ATG"];k.defaultStops=["TAA","TAG","TGA"];k.defaultCodonTable={TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"};function zH(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r],i=[];for(let o=0;o<3;o++){let a=r.charAt(o);i[o]=[],i[o][0]=a.toUpperCase(),i[o][1]=a.toLowerCase()}for(let o=0;o<2;o++){let a=i[0][o];for(let u=0;u<2;u++){let d=i[1][u];for(let l=0;l<2;l++){let f=i[2][l],s=a+d+f;t[s]=n}}}}),t}async function HH(e,t,r){t(e);let n=await r();return t(""),n}function hw(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t=(t<<5)-t+n,t|=0}return t}function VH(e){return`${hw(JSON.stringify(e))}`}async function WH(e,t){return(await Promise.all(e.map(n=>t.blocksForRange(n.refName,n.start,n.end)))).flat().map(n=>({start:n.minv.blockPosition,end:n.maxv.blockPosition+65535})).reduce((n,i)=>n+i.end-i.start,0)}function UH(e=""){return["Gff3TabixAdapter","VcfTabixAdapter","Gff3Adapter","VcfAdapter"].includes(e)}function GH(e){return Math.floor(e/1e6)>0?`${Number.parseFloat((e/1e6).toPrecision(3))}Mbp`:Math.floor(e/1e3)>0?`${Number.parseFloat((e/1e3).toPrecision(3))}Kbp`:`${Pi(Math.floor(e))}bp`}function Pi(e){return e.toLocaleString("en-US")}function $H(e,t){return Math.floor(t/1e3)>0?`${Pi(Number.parseFloat((e/1e6).toFixed(2)))}M`:Pi(Math.floor(e))}function YH(e,t){let{dynamicBlocks:r,staticBlocks:n,offsetPx:i}=ow(e),o=r?.contentBlocks[0]||{},a=n?.contentBlocks[0]||{},u=n?.contentBlocks[1]||{};return{offsetPx:t?0:i-a.offsetPx,offsetPx1:t?0:i-u.offsetPx,start:o.start,end:o.end}}function XH({sessionId:e,layoutId:t}){return`${e}-${t}`}function ZH(e,t){let[r,n]=(0,En.useState)(()=>{if(typeof window>"u")return t;try{let o=window.localStorage.getItem(e);return o?JSON.parse(o):t}catch(o){return console.error(o),t}});return[r,o=>{try{let a=o instanceof Function?o(r):o;n(a),typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(a))}catch(a){console.error(a)}}]}function mw(e){let{uri:t,baseUri:r=""}=e,n;try{n=new URL(t,r).href}catch{n=t}return n}function vw(e){return(0,lH.default)(e)?(0,fH.isUriLocation)(e)?mw(e):JSON.stringify(e):String(e)}function _w(e){return e.replaceAll(/(<([^>]+)>)/gi,"")}function KH(e){let t=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi;return e.replaceAll(t,`$1<a href='$2' target="_blank">$2</a>`)}function JH(e,t){let{padding:r=30,minWidth:n=80,fontSize:i=12,maxWidth:o=1e3,stripHTML:a=!1}=t||{};return bw(e.map(u=>vw(u)).map(u=>a?_w(u):u).map(u=>pw(u,i)).map(u=>Math.min(Math.max(u+r,n),o)))}function QH(e){return(0,De.getEnv)(e)}function eV(e){return typeof localStorage<"u"?localStorage.getItem(e):void 0}function tV(e,t){typeof localStorage<"u"&&localStorage.setItem(e,t)}function bw(e,t=Number.NEGATIVE_INFINITY){let r=t;for(let n of e)r=n>r?n:r;return r}function rV(e,t=Number.POSITIVE_INFINITY){let r=t;for(let n of e)r=n<r?n:r;return r}function gw(e){let t=0;for(let r of e)t+=r;return t}function nV(e){return gw(e)/e.length}function iV(e,t){let r={};for(let n of e){let i=t(n);r[i]||(r[i]=[]),r[i].push(n)}return r}function oV(e){return e!=null}function yw(e,t=5e3){if(e.length<=1)return e;let r=[],n=null;e=e.sort((i,o)=>i.start-o.start),r.push(e[0]);for(let i=1;i<e.length;i++)n=r.at(-1),n.end+t<e[i].start-t?r.push(e[i]):n.end<e[i].end&&(n.end=Math.max(n.end,e[i].end),r.pop(),r.push(n));return r}function aV(e){let t={};for(let r of e)t[r.refName]||(t[r.refName]=[]),t[r.refName].push(r);return Object.values(t).flatMap(r=>yw(r.sort((n,i)=>n.start-i.start)))}function uV(e){return(0,Xp.colord)(e).alpha(1).toHex()}function sV(e){let t=(0,Xp.colord)(e);return{strokeOpacity:t.alpha(),stroke:t.alpha(1).toHex()}}function lV(e){let t=(0,Xp.colord)(e);return{fillOpacity:t.alpha(),fill:t.alpha(1).toHex()}}function cV(e,t){let r=document.createElement("div");return(0,nw.flushSync)(()=>{t?t(r).render(e):(0,nw.render)(e,r)}),r.innerHTML.replaceAll(/\brgba\((.+?),[^,]+?\)/g,"rgb($1)")}function fV(e){return e[0]===31&&e[1]===139&&e[2]===8}var ww=tw();Object.defineProperty(k,"SimpleFeature",{enumerable:!0,get:function(){return Yp(ww).default}});Object.defineProperty(k,"isFeature",{enumerable:!0,get:function(){return ww.isFeature}});var dV=Hp();Object.defineProperty(k,"blobToDataURL",{enumerable:!0,get:function(){return dV.blobToDataURL}})});var Ow=g(vt=>{"use strict";var pV=vt&&vt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hV=vt&&vt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mV=vt&&vt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&pV(t,e,r);return hV(t,e),t},jo=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.MenuItemEndDecoration=Zp;var Z=mV(R()),Xr=B(),vV=It(),_V=jo(Dv()),bV=jo(Nv()),gV=jo(Bv()),yV=jo(zv()),wV=jo(Hv()),SV=rd(),Sw=(0,vV.makeStyles)()({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function Zp(e){let{classes:t}=Sw(),{type:r}=e,n,i;"checked"in e&&({checked:n,disabled:i}=e);let o;switch(r){case"subMenu":{o=Z.default.createElement(_V.default,{color:"action"});break}case"checkbox":{if(n){let a=i?"inherit":void 0;o=Z.default.createElement(bV.default,{color:a})}else o=Z.default.createElement(gV.default,{color:"action"});break}case"radio":{if(n){let a=i?"inherit":void 0;o=Z.default.createElement(yV.default,{color:a})}else o=Z.default.createElement(wV.default,{color:"action"});break}}return Z.default.createElement("div",{className:t.menuItemEndDecoration},o)}function xw(e){return e.type!=="divider"&&e.type!=="subHeader"&&!e.disabled}function xV(e,t){let r=e.slice(t+1).findIndex(xw);return r===-1?r:t+1+r}function EV(e,t){return(0,SV.findLastIndex)(e.slice(0,t),xw)}function Ew(e){let[t,r]=(0,Z.useState)(),[n,i]=(0,Z.useState)(),[o,a]=(0,Z.useState)(!1),[u,d]=(0,Z.useState)(),[l,f]=(0,Z.useState)(),s=(0,Z.useRef)(null),{classes:c}=Sw(),{menuItems:p,onMenuItemClick:m,open:v,onClose:h,anchorEl:_,top:y=!1}=e;(0,Z.useEffect)(()=>{v||(r(void 0),i(void 0))},[v]),(0,Z.useEffect)(()=>{let w=v&&!!t,A;return w&&!o?A=setTimeout(()=>{a(!0)},300):!w&&o&&(A=setTimeout(()=>{a(!1)},300)),()=>{clearTimeout(A)}},[o,v,t]),(0,Z.useEffect)(()=>{if(_){let w=_.getBoundingClientRect();l?(w.top!==l.top||w.left+w.width!==l.left)&&f({top:w.top,left:w.left+w.width}):f({top:w.top,left:w.left+w.width})}else l||f({})},[l,_]);let S=p.some(w=>"icon"in w&&w.icon),E={};function M(w){return A=>{m(A,w)}}let O=Z.default.createElement(Z.default.Fragment,null,Z.default.createElement(Xr.MenuList,{autoFocusItem:v&&!o,dense:!0},p.sort((w,A)=>(A.priority||0)-(w.priority||0)).map((w,A)=>{if(w.type==="divider")return Z.default.createElement(Xr.Divider,{key:`divider-${JSON.stringify(w)}-${A}`,component:"li"});if(w.type==="subHeader")return Z.default.createElement(Xr.ListSubheader,{key:`subHeader-${w.label}-${A}`},w.label);let q=null,P=null;if(w.icon){let I=w.icon;q=Z.default.createElement(Xr.ListItemIcon,null,Z.default.createElement(I,null))}"subMenu"in w?P=Z.default.createElement(Zp,{type:"subMenu"}):(w.type==="checkbox"||w.type==="radio")&&(P=Z.default.createElement(Zp,{type:w.type,checked:w.checked,disabled:w.disabled}));let T="onClick"in w?M(w.onClick):void 0;return Z.default.createElement(Xr.MenuItem,{key:w.id||String(w.label),style:E,selected:A===u,onClick:T,onMouseMove:I=>{I.currentTarget!==document.activeElement&&(I.currentTarget.focus(),d(A)),"subMenu"in w?n!==A&&(r(I.currentTarget),i(A)):(r(void 0),i(void 0))},onKeyDown:I=>{switch(I.key){case"ArrowLeft":case"Escape":{h?.(I,"escapeKeyDown");break}case"ArrowUp":{d(EV(p,A));break}case"ArrowDown":{let z=xV(p,A);d(z);break}default:"subMenu"in w&&(I.key==="ArrowRight"||I.key==="Enter")&&(r(I.currentTarget),i(A),a(!0))}},disabled:!!w.disabled},q,Z.default.createElement(Xr.ListItemText,{primary:w.label,secondary:w.subLabel,inset:S&&!w.icon}),P)})),p.map((w,A)=>{let q=null;return"subMenu"in w&&(q=Z.default.createElement(Ew,{key:w.id||String(w.label),anchorEl:t,open:o&&n===A,onClose:()=>{a(!1),r(void 0)},onMenuItemClick:m,menuItems:w.subMenu})),q}));return y?O:Z.default.createElement(Xr.Paper,{elevation:8,ref:s,className:c.paper,style:{...l}},O)}function OV(e){let{open:t,onClose:r,menuItems:n,onMenuItemClick:i,...o}=e;return Z.default.createElement(Xr.Popover,{open:t,onClose:r,BackdropProps:{invisible:!0},anchorOrigin:{vertical:"bottom",horizontal:"right",...o.anchorOrigin},transformOrigin:{vertical:"top",horizontal:"left",...o.transformOrigin},...o},Z.default.createElement(Ew,{open:t,onClose:r,menuItems:n,onMenuItemClick:i,top:!0}))}vt.default=OV});var Mw=g((Wre,Io)=>{function MV(e){if(Array.isArray(e))return e}Io.exports=MV,Io.exports.__esModule=!0,Io.exports.default=Io.exports});var Aw=g((Ure,Ro)=>{function AV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,o,a,u=[],d=!0,l=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(f){l=!0,i=f}finally{try{if(!d&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}Ro.exports=AV,Ro.exports.__esModule=!0,Ro.exports.default=Ro.exports});var Pw=g((Gre,Fo)=>{function PV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Fo.exports=PV,Fo.exports.__esModule=!0,Fo.exports.default=Fo.exports});var qw=g(($re,Lo)=>{var qV=Mw(),TV=Aw(),kV=Xf(),CV=Pw();function jV(e,t){return qV(e)||TV(e,t)||kV(e,t)||CV()}Lo.exports=jV,Lo.exports.__esModule=!0,Lo.exports.default=Lo.exports});var kw=g(Jp=>{"use strict";var IV=zn();Object.defineProperty(Jp,"__esModule",{value:!0});Jp.useEvent=FV;var Kp=RV(R());function Tw(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Tw=function(i){return i?r:t})(e)}function RV(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||IV(e)!="object"&&typeof e!="function")return{default:e};var r=Tw(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function FV(e){if(typeof window>"u")return e;var t=Kp.useRef(null);return Kp.useLayoutEffect(function(){t.current=e}),Kp.useCallback(function(){for(var r,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];(r=t.current)===null||r===void 0||r.call.apply(r,[t].concat(i))},[])}});var eh=g(Ne=>{"use strict";var Fw=G(),LV=zn();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.anchorRef=WV;Ne.bindContextMenu=GV;Ne.bindDialog=eW;Ne.bindDoubleClick=ZV;Ne.bindFocus=XV;Ne.bindHover=YV;Ne.bindMenu=JV;Ne.bindPopover=KV;Ne.bindPopper=QV;Ne.bindToggle=$V;Ne.bindTrigger=UV;Ne.initCoreState=void 0;Ne.usePopupState=VV;var lc=Fw(Ba()),DV=Fw(qw()),Zr=NV(R()),Cw=Zr,Do=kw();function Lw(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Lw=function(i){return i?r:t})(e)}function NV(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||LV(e)!="object"&&typeof e!="function")return{default:e};var r=Lw(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(r),!0).forEach(function(n){(0,lc.default)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var Iw={};function BV(e,t){Iw[e]||(Iw[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}var zV=Ne.initCoreState={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1},HV="useId"in Cw?function(){return Cw.useId()}:function(){};function VV(e){var t=e.parentPopupState,r=e.popupId,n=r===void 0?HV():r,i=e.variant,o=e.disableAutoFocus,a=(0,Zr.useRef)(!0);(0,Zr.useEffect)(function(){return a.current=!0,function(){a.current=!1}},[]);var u=(0,Zr.useState)(zV),d=(0,DV.default)(u,2),l=d[0],f=d[1],s=(0,Zr.useCallback)(function(O){a.current&&f(O)},[]),c=(0,Zr.useCallback)(function(O){return s(function(w){return W(W({},w),{},{setAnchorElUsed:!0,anchorEl:O??void 0})})},[]),p=(0,Do.useEvent)(function(O){return l.isOpen?h(O):m(O),l}),m=(0,Do.useEvent)(function(O){var w=O instanceof Element?void 0:O,A=O instanceof Element?O:O?.currentTarget instanceof Element?O.currentTarget:void 0;if(w?.type==="touchstart"){s(function(z){return W(W({},z),{},{_deferNextOpen:!0})});return}var q=w?.clientX,P=w?.clientY,T=typeof q=="number"&&typeof P=="number"?{left:q,top:P}:void 0,I=function(Y){if(!O&&!Y.setAnchorElUsed&&i!=="dialog"&&BV("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),t){if(!t.isOpen)return Y;setTimeout(function(){return t._setChildPopupState(M)})}var re=W(W({},Y),{},{isOpen:!0,anchorPosition:T,hovered:w?.type==="mouseover"||Y.hovered,focused:w?.type==="focus"||Y.focused,_openEventType:w?.type});return Y.setAnchorElUsed||(w!=null&&w.currentTarget?re.anchorEl=w?.currentTarget:A&&(re.anchorEl=A)),re};s(function(z){return z._deferNextOpen?(setTimeout(function(){return s(I)},0),W(W({},z),{},{_deferNextOpen:!1})):I(z)})}),v=function(w){var A=w._childPopupState;return setTimeout(function(){A?.close(),t?._setChildPopupState(null)}),W(W({},w),{},{isOpen:!1,hovered:!1,focused:!1})},h=(0,Do.useEvent)(function(O){var w=O instanceof Element?void 0:O;if(w?.type==="touchstart"){s(function(A){return W(W({},A),{},{_deferNextClose:!0})});return}s(function(A){return A._deferNextClose?(setTimeout(function(){return s(v)},0),W(W({},A),{},{_deferNextClose:!1})):v(A)})}),_=(0,Zr.useCallback)(function(O,w){O?m(w):h(w)},[]),y=(0,Do.useEvent)(function(O){var w=O.relatedTarget;s(function(A){return A.hovered&&!(w instanceof Element&&Qp(w,M))?A.focused?W(W({},A),{},{hovered:!1}):v(A):A})}),S=(0,Do.useEvent)(function(O){if(O){var w=O.relatedTarget;s(function(A){return A.focused&&!(w instanceof Element&&Qp(w,M))?A.hovered?W(W({},A),{},{focused:!1}):v(A):A})}}),E=(0,Zr.useCallback)(function(O){return s(function(w){return W(W({},w),{},{_childPopupState:O})})},[]),M=W(W({},l),{},{setAnchorEl:c,popupId:n??void 0,variant:i,open:m,close:h,toggle:p,setOpen:_,onBlur:S,onMouseLeave:y,disableAutoFocus:o??!!(l.hovered||l.focused),_setChildPopupState:E});return M}function WV(e){var t=e.setAnchorEl;return t}function No(e){var t=e.isOpen,r=e.popupId,n=e.variant;return W({},n==="popover"?{"aria-haspopup":!0,"aria-controls":t?r:void 0}:n==="popper"?{"aria-describedby":t?r:void 0}:void 0)}function UV(e){return W(W({},No(e)),{},{onClick:e.open,onTouchStart:e.open})}function GV(e){return W(W({},No(e)),{},{onContextMenu:function(r){r.preventDefault(),e.open(r)}})}function $V(e){return W(W({},No(e)),{},{onClick:e.toggle,onTouchStart:e.toggle})}function YV(e){var t=e.open,r=e.onMouseLeave;return W(W({},No(e)),{},{onTouchStart:t,onMouseOver:t,onMouseLeave:r})}function XV(e){var t=e.open,r=e.onBlur;return W(W({},No(e)),{},{onFocus:t,onBlur:r})}function ZV(e){var t=e.isOpen,r=e.open,n=e.popupId,i=e.variant;return(0,lc.default)((0,lc.default)((0,lc.default)({},i==="popover"?"aria-controls":"aria-describedby",t?n:null),"aria-haspopup",i==="popover"?!0:void 0),"onDoubleClick",r)}function KV(e){var t=e.isOpen,r=e.anchorEl,n=e.anchorPosition,i=e.close,o=e.popupId,a=e.onMouseLeave,u=e.disableAutoFocus,d=e._openEventType,l=d==="contextmenu";return W({id:o,anchorEl:r,anchorPosition:n,anchorReference:l?"anchorPosition":"anchorEl",open:t,onClose:i,onMouseLeave:a},u&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0})}function JV(e){var t=e.isOpen,r=e.anchorEl,n=e.anchorPosition,i=e.close,o=e.popupId,a=e.onMouseLeave,u=e.disableAutoFocus,d=e._openEventType,l=d==="contextmenu";return W({id:o,anchorEl:r,anchorPosition:n,anchorReference:l?"anchorPosition":"anchorEl",open:t,onClose:i,onMouseLeave:a},u&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0})}function QV(e){var t=e.isOpen,r=e.anchorEl,n=e.popupId,i=e.onMouseLeave;return{id:n,anchorEl:r,open:t,onMouseLeave:i}}function eW(e){var t=e.isOpen,r=e.close;return{open:t,onClose:r}}function tW(e,t){var r=t.popupId;if(!r)return null;var n=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof n.getElementById=="function"?n.getElementById(r):null}function Qp(e,t){var r=t.anchorEl,n=t._childPopupState;return Rw(r,e)||Rw(tW(e,t),e)||n!=null&&Qp(e,n)}function Rw(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}});var Dw=g((Zre,fr)=>{function th(){return fr.exports=th=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fr.exports.__esModule=!0,fr.exports.default=fr.exports,th.apply(null,arguments)}fr.exports=th,fr.exports.__esModule=!0,fr.exports.default=fr.exports});var Nw=g(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.interopRequireDefault=rW;function rW(e){var t=e;return t.__esModule?t.default:e}});var Ww=g((Bo,Vw)=>{"use strict";var zw=G(),nW=zn();Object.defineProperty(Bo,"__esModule",{value:!0});Bo.default=void 0;var iW=zw(Dw()),oW=zw(Ba()),nh=sW(R()),aW=B(),uW=Nw();function Hw(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Hw=function(i){return i?r:t})(e)}function sW(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||nW(e)!="object"&&typeof e!="function")return{default:e};var r=Hw(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(o!=="default"&&{}.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function Bw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bw(Object(r),!0).forEach(function(n){(0,oW.default)(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var lW=(0,uW.interopRequireDefault)(aW.Menu),cW=nh.forwardRef(function(t,r){var n,i,o=nh.useMemo(function(){var a,u=(a=t.slotProps)===null||a===void 0?void 0:a.paper;return u instanceof Function?function(d){var l=u(d);return _t(_t({},l),{},{style:_t({pointerEvents:"auto"},l?.style)})}:_t(_t({},u),{},{style:_t({pointerEvents:"auto"},u?.style)})},[(n=t.slotProps)===null||n===void 0?void 0:n.paper]);return nh.createElement(lW,(0,iW.default)({},t,{ref:r,style:_t({pointerEvents:"none"},t.style),PaperProps:_t(_t({},t.PaperProps),{},{style:_t({pointerEvents:"auto"},(i=t.PaperProps)===null||i===void 0?void 0:i.style)}),slotProps:_t(_t({},t.slotProps),{},{paper:o})}))}),Jre=Bo.default=cW;Vw.exports=Bo.default});var Uw=g(cc=>{"use strict";"use client";var fW=G();Object.defineProperty(cc,"__esModule",{value:!0});cc.default=void 0;var dW=fW(ne()),pW=ie(),Qre=cc.default=(0,dW.default)((0,pW.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")});var Xw=g(Pt=>{"use strict";var hW=Pt&&Pt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mW=Pt&&Pt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),vW=Pt&&Pt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&hW(t,e,r);return mW(t,e),t},$w=Pt&&Pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pt,"__esModule",{value:!0});var V=vW(R()),dr=B(),Gw=Ow(),zo=eh(),_W=$w(Ww()),bW=$w(Uw()),qi=V.default.createContext({parentPopupState:null,rootPopupState:null});function gW({onClick:e,closeAfterItemClick:t,...r}){let{rootPopupState:n}=(0,V.useContext)(qi);if(!n)throw new Error("must be used inside a CascadingMenu");return V.default.createElement(dr.MenuItem,{...r,onClick:i=>{t&&n.close(),e?.(i)}})}function yW({title:e,Icon:t,inset:r,popupId:n,...i}){let{parentPopupState:o}=(0,V.useContext)(qi),a=(0,zo.usePopupState)({popupId:n,variant:"popover",parentPopupState:o});return V.default.createElement(V.default.Fragment,null,V.default.createElement(dr.MenuItem,{...(0,zo.bindHover)(a),...(0,zo.bindFocus)(a)},t?V.default.createElement(dr.ListItemIcon,null,V.default.createElement(t,null)):null,V.default.createElement(dr.ListItemText,{primary:e,inset:r}),V.default.createElement(bW.default,null)),V.default.createElement(wW,{...i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},popupState:a}))}function wW({popupState:e,onMenuItemClick:t,menuItems:r,classes:n,...i}){let{rootPopupState:o}=(0,V.useContext)(qi),a=(0,V.useMemo)(()=>({rootPopupState:o||e,parentPopupState:e}),[o,e]);return V.default.createElement(qi.Provider,{value:a},V.default.createElement(_W.default,{...i,...(0,zo.bindMenu)(e)}))}function SW({popupState:e,onMenuItemClick:t,menuItems:r,...n}){let{rootPopupState:i}=(0,V.useContext)(qi),o=(0,V.useMemo)(()=>({rootPopupState:i||e,parentPopupState:e}),[i,e]);return V.default.createElement(qi.Provider,{value:o},V.default.createElement(dr.Menu,{...n,...(0,zo.bindMenu)(e)}))}function xW({item:e}){return"subMenu"in e?V.default.createElement(Gw.MenuItemEndDecoration,{type:"subMenu"}):e.type==="checkbox"||e.type==="radio"?V.default.createElement(Gw.MenuItemEndDecoration,{type:e.type,checked:e.checked,disabled:e.disabled}):null}function Yw({onMenuItemClick:e,closeAfterItemClick:t,menuItems:r,...n}){function i(a){return u=>{e(u,a)}}let o=r.some(a=>"icon"in a&&a.icon);return V.default.createElement(V.default.Fragment,null,r.map((a,u)=>"subMenu"in a?V.default.createElement(yW,{key:`subMenu-${a.label}-${u}`,popupId:`subMenu-${a.label}`,title:a.label,Icon:a.icon,inset:o&&!a.icon,onMenuItemClick:e,menuItems:a.subMenu},V.default.createElement(Yw,{...n,closeAfterItemClick:t,onMenuItemClick:e,menuItems:a.subMenu})):a.type==="divider"?V.default.createElement(dr.Divider,{key:`divider-${JSON.stringify(a)}-${u}`,component:"li"}):a.type==="subHeader"?V.default.createElement(dr.ListSubheader,{key:`subHeader-${a.label}-${u}`},a.label):V.default.createElement(gW,{key:`${a.label}-${u}`,closeAfterItemClick:t,onClick:"onClick"in a?i(a.onClick):void 0,disabled:!!a.disabled},a.icon?V.default.createElement(dr.ListItemIcon,null,V.default.createElement(a.icon,null)):null," ",V.default.createElement(dr.ListItemText,{primary:a.label,secondary:a.subLabel,inset:o&&!a.icon}),V.default.createElement("div",{style:{flexGrow:1,minWidth:10}}),V.default.createElement(xW,{item:a}))))}function EW(e){let{closeAfterItemClick:t=!0,...r}=e;return V.default.createElement(SW,{...r},V.default.createElement(Yw,{...r,closeAfterItemClick:t}))}Pt.default=EW});var oh=g(qt=>{"use strict";var OW=qt&&qt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),MW=qt&&qt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),AW=qt&&qt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&OW(t,e,r);return MW(t,e),t},PW=qt&&qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qt,"__esModule",{value:!0});var Ho=AW(R()),qW=PW(Xw()),TW=B(),kW=D(),ih=eh(),CW=(0,kW.observer)(function({children:t,menuItems:r,closeAfterItemClick:n=!0,stopPropagation:i,setOpen:o,onClick:a,...u}){let d=(0,ih.usePopupState)({popupId:"viewMenu",variant:"popover"}),{onClick:l,onTouchStart:f,...s}=(0,ih.bindTrigger)(d),{isOpen:c}=d;return(0,Ho.useEffect)(()=>{o?.(c)},[c,o]),Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(TW.IconButton,{onClick:p=>{i&&p.stopPropagation(),l(p),a?.()},onTouchStart:p=>{i&&p.stopPropagation(),f(p),a?.()},...s,...u,disabled:r.length===0},t),Ho.default.createElement(qW.default,{...(0,ih.bindPopover)(d),onMenuItemClick:(p,m)=>{m()},menuItems:r,closeAfterItemClick:n,popupState:d}))});qt.default=CW});var Kw=g(fc=>{"use strict";"use client";var jW=G();Object.defineProperty(fc,"__esModule",{value:!0});fc.default=void 0;var IW=jW(ne()),Zw=ie(),nne=fc.default=(0,IW.default)([(0,Zw.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,Zw.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn")});var Jw=g(dc=>{"use strict";"use client";var RW=G();Object.defineProperty(dc,"__esModule",{value:!0});dc.default=void 0;var FW=RW(ne()),LW=ie(),one=dc.default=(0,FW.default)((0,LW.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut")});var Qw=g(pc=>{"use strict";"use client";var DW=G();Object.defineProperty(pc,"__esModule",{value:!0});pc.default=void 0;var NW=DW(ne()),BW=ie(),une=pc.default=(0,NW.default)((0,BW.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")});var eS=g(hc=>{"use strict";"use client";var zW=G();Object.defineProperty(hc,"__esModule",{value:!0});hc.default=void 0;var HW=zW(ne()),VW=ie(),lne=hc.default=(0,HW.default)((0,VW.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt")});var pr,ah,tS,rS,nS,iS,oS,aS,WW,uS,sS=C(()=>{pr=x(R()),ah=x(B()),tS=x(D()),rS=x(oh()),nS=x(Kw()),iS=x(Jw()),oS=x(Qw()),aS=x(eS()),WW=(0,tS.observer)(function({model:t}){return pr.default.createElement(pr.default.Fragment,null,pr.default.createElement(ah.IconButton,{onClick:()=>{t.zoomIn()}},pr.default.createElement(nS.default,null)),pr.default.createElement(ah.IconButton,{onClick:()=>{t.zoomOut()}},pr.default.createElement(iS.default,null)),pr.default.createElement(rS.default,{menuItems:[{label:"Zoom in horizontal",onClick:()=>{t.zoomInHorizontal()}},{label:"Zoom in vertical",onClick:()=>{t.zoomInVertical()}},{label:"Zoom out horizontal",onClick:()=>{t.zoomOutHorizontal()}},{label:"Zoom out vertical",onClick:()=>{t.zoomOutVertical()}},{label:"Reset zoom to default",icon:aS.default,onClick:()=>{t.setColWidth(16),t.setRowHeight(20)}}]},pr.default.createElement(oS.default,null)))}),uS=WW});var uh,lS,cS,UW,fS,dS=C(()=>{uh=x(R()),lS=x(D()),cS=x(B()),UW=(0,lS.observer)(function({model:e}){let{currentAlignment:t,alignmentNames:r}=e;return r.length>0?uh.default.createElement(cS.Select,{native:!0,value:t,size:"small",onChange:n=>{e.setCurrentAlignment(+n.target.value),e.setScrollX(0),e.setScrollY(0)}},r.map((n,i)=>uh.default.createElement("option",{key:`${n}-${i}`,value:i},n))):null}),fS=UW});var pS,hS,mS,vS,GW,$W,_S,bS=C(()=>{pS=x(R()),hS=x(B()),mS=x(D()),vS=x(It()),GW=(0,vS.makeStyles)()({margin:{margin:"auto",marginLeft:10}}),$W=(0,mS.observer)(function({model:e}){let{mouseOverRowName:t,mouseCol:r}=e,{classes:n}=GW();return t&&r!==void 0?pS.default.createElement(hS.Typography,{className:n.margin},t,":",e.mouseOverCoordToGapRemovedRowCoord(t,r)," (",e.mouseOverCoordToRowLetter(t,r),")"):null}),_S=$W});var mc,gS,yS,wS,SS,YW,XW,xS,ES=C(()=>{mc=x(R()),gS=x(B()),yS=x(D()),wS=x(It()),SS=x(Ae()),YW=(0,wS.makeStyles)()({margin:{margin:"auto",marginLeft:10}}),XW=(0,yS.observer)(({model:e})=>{let{status:t}=e,{classes:r}=YW();return t?mc.default.createElement(gS.Typography,{className:r.margin},mc.default.createElement(SS.LoadingEllipses,{message:t.msg,component:"span"})," ",t.url?mc.default.createElement("a",{href:t.url,target:"_blank",rel:"noreferrer"},"(status)"):null):null}),xS=XW});var OS=g(vc=>{"use strict";"use client";var ZW=G();Object.defineProperty(vc,"__esModule",{value:!0});vc.default=void 0;var KW=ZW(ne()),JW=ie(),mne=vc.default=(0,KW.default)((0,JW.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")});var MS=g(_c=>{"use strict";"use client";var QW=G();Object.defineProperty(_c,"__esModule",{value:!0});_c.default=void 0;var eU=QW(ne()),tU=ie(),_ne=_c.default=(0,eU.default)((0,tU.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort")});var AS=g(bc=>{"use strict";"use client";var rU=G();Object.defineProperty(bc,"__esModule",{value:!0});bc.default=void 0;var nU=rU(ne()),iU=ie(),gne=bc.default=(0,nU.default)((0,iU.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")});var PS=g(gc=>{"use strict";"use client";var oU=G();Object.defineProperty(gc,"__esModule",{value:!0});gc.default=void 0;var aU=oU(ne()),uU=ie(),wne=gc.default=(0,aU.default)((0,uU.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")});var qS=g(yc=>{"use strict";"use client";var sU=G();Object.defineProperty(yc,"__esModule",{value:!0});yc.default=void 0;var lU=sU(ne()),cU=ie(),xne=yc.default=(0,lU.default)((0,cU.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")});var kS=g(wc=>{"use strict";"use client";var fU=G();Object.defineProperty(wc,"__esModule",{value:!0});wc.default=void 0;var dU=fU(ne()),TS=ie(),One=wc.default=(0,dU.default)([(0,TS.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,TS.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera")});var CS=g(Sc=>{"use strict";"use client";var pU=G();Object.defineProperty(Sc,"__esModule",{value:!0});Sc.default=void 0;var hU=pU(ne()),mU=ie(),Ane=Sc.default=(0,hU.default)((0,mU.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")});var jS=g(xc=>{"use strict";"use client";var vU=G();Object.defineProperty(xc,"__esModule",{value:!0});xc.default=void 0;var _U=vU(ne()),bU=ie(),qne=xc.default=(0,_U.default)((0,bU.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")});var IS=g(Ec=>{"use strict";"use client";var gU=G();Object.defineProperty(Ec,"__esModule",{value:!0});Ec.default=void 0;var yU=gU(ne()),wU=ie(),kne=Ec.default=(0,yU.default)((0,wU.jsx)("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List")});var RS=g(Oc=>{"use strict";"use client";var SU=G();Object.defineProperty(Oc,"__esModule",{value:!0});Oc.default=void 0;var xU=SU(ne()),EU=ie(),jne=Oc.default=(0,xU.default)((0,EU.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen")});var OU,hr,Ee,bt,VS,FS,sh,MU,Mc,WS,US,LS,DS,NS,Vo,AU,PU,qU,TU,fh,BS,kU,lh,ch,zS,dh,He,HS,Ac,Pc=C(()=>{OU={grad:.9,turn:360,rad:360/(2*Math.PI)},hr=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Ee=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},bt=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},VS=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},FS=function(e){return{r:bt(e.r,0,255),g:bt(e.g,0,255),b:bt(e.b,0,255),a:bt(e.a)}},sh=function(e){return{r:Ee(e.r),g:Ee(e.g),b:Ee(e.b),a:Ee(e.a,3)}},MU=/^#([0-9a-f]{3,8})$/i,Mc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},WS=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=Math.max(t,r,n),a=o-Math.min(t,r,n),u=a?o===t?(r-n)/a:o===r?2+(n-t)/a:4+(t-r)/a:0;return{h:60*(u<0?u+6:u),s:o?a/o*100:0,v:o/255*100,a:i}},US=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var o=Math.floor(t),a=n*(1-r),u=n*(1-(t-o)*r),d=n*(1-(1-t+o)*r),l=o%6;return{r:255*[n,u,a,a,d,n][l],g:255*[d,n,n,u,a,a][l],b:255*[a,a,d,n,n,u][l],a:i}},LS=function(e){return{h:VS(e.h),s:bt(e.s,0,100),l:bt(e.l,0,100),a:bt(e.a)}},DS=function(e){return{h:Ee(e.h),s:Ee(e.s),l:Ee(e.l),a:Ee(e.a,3)}},NS=function(e){return US((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},Vo=function(e){return{h:(t=WS(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},AU=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,PU=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qU=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,TU=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fh={string:[[function(e){var t=MU.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Ee(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Ee(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=qU.exec(e)||TU.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:FS({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=AU.exec(e)||PU.exec(e);if(!t)return null;var r,n,i=LS({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(OU[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return NS(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,o=i===void 0?1:i;return hr(t)&&hr(r)&&hr(n)?FS({r:Number(t),g:Number(r),b:Number(n),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,o=i===void 0?1:i;if(!hr(t)||!hr(r)||!hr(n))return null;var a=LS({h:Number(t),s:Number(r),l:Number(n),a:Number(o)});return NS(a)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,o=i===void 0?1:i;if(!hr(t)||!hr(r)||!hr(n))return null;var a=function(u){return{h:VS(u.h),s:bt(u.s,0,100),v:bt(u.v,0,100),a:bt(u.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(o)});return US(a)},"hsv"]]},BS=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},kU=function(e){return typeof e=="string"?BS(e.trim(),fh.string):typeof e=="object"&&e!==null?BS(e,fh.object):[null,void 0]},lh=function(e,t){var r=Vo(e);return{h:r.h,s:bt(r.s+100*t,0,100),l:r.l,a:r.a}},ch=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},zS=function(e,t){var r=Vo(e);return{h:r.h,s:r.s,l:bt(r.l+100*t,0,100),a:r.a}},dh=function(){function e(t){this.parsed=kU(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Ee(ch(this.rgba),2)},e.prototype.isDark=function(){return ch(this.rgba)<.5},e.prototype.isLight=function(){return ch(this.rgba)>=.5},e.prototype.toHex=function(){return t=sh(this.rgba),r=t.r,n=t.g,i=t.b,a=(o=t.a)<1?Mc(Ee(255*o)):"","#"+Mc(r)+Mc(n)+Mc(i)+a;var t,r,n,i,o,a},e.prototype.toRgb=function(){return sh(this.rgba)},e.prototype.toRgbString=function(){return t=sh(this.rgba),r=t.r,n=t.g,i=t.b,(o=t.a)<1?"rgba("+r+", "+n+", "+i+", "+o+")":"rgb("+r+", "+n+", "+i+")";var t,r,n,i,o},e.prototype.toHsl=function(){return DS(Vo(this.rgba))},e.prototype.toHslString=function(){return t=DS(Vo(this.rgba)),r=t.h,n=t.s,i=t.l,(o=t.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+o+")":"hsl("+r+", "+n+"%, "+i+"%)";var t,r,n,i,o},e.prototype.toHsv=function(){return t=WS(this.rgba),{h:Ee(t.h),s:Ee(t.s),v:Ee(t.v),a:Ee(t.a,3)};var t},e.prototype.invert=function(){return He({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),He(lh(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),He(lh(this.rgba,-t))},e.prototype.grayscale=function(){return He(lh(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),He(zS(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),He(zS(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?He({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):Ee(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=Vo(this.rgba);return typeof t=="number"?He({h:t,s:r.s,l:r.l,a:r.a}):Ee(r.h)},e.prototype.isEqual=function(t){return this.toHex()===He(t).toHex()},e}(),He=function(e){return e instanceof dh?e:new dh(e)},HS=[],Ac=function(e){e.forEach(function(t){HS.indexOf(t)<0&&(t(dh,fh),HS.push(t))})}});function qc(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var o={};e.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var u,d,l=n[this.toHex()];if(l)return l;if(a?.closest){var f=this.toRgb(),s=1/0,c="black";if(!o.length)for(var p in r)o[p]=new e(r[p]).toRgb();for(var m in r){var v=(u=f,d=o[m],Math.pow(u.r-d.r,2)+Math.pow(u.g-d.g,2)+Math.pow(u.b-d.b,2));v<s&&(s=v,c=m)}return c}},t.string.push([function(a){var u=a.toLowerCase(),d=u==="transparent"?"#0000":r[u];return d?new e(d).toRgb():null},"name"])}var ph=C(()=>{});function Tc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}var GS=C(()=>{});function kc(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}var $S=C(()=>{});var hh=C(()=>{GS();$S()});function Cc(e,t){return Object.fromEntries(Object.entries(e).map(t))}function Wo(e,t="node",r=0){let n=`${t}-${r}`;return{...e,id:n,name:e.name||n,children:e.children?.map((i,o)=>Wo(i,`${n}-${o}`,r+1))||[]}}function Ti(e,t){return Cc(e,([r,n])=>[r,t.palette.getContrastText(He(n).toHex())])}function mh(e,t){let r="",n=0;for(let i=0;i<t.length;i++)i===e[n]?n++:r+=t[i];return r}function vh(e,t,r){e.len=(t+=Math.max(e.data.length||0,0))*r,e.children&&e.children.forEach(n=>{vh(n,t,r)})}function _h(e){return(e.data.length||0)+(e.children&&kc(e.children,_h)||0)}function YS(e){e.children&&(e._children=e.children,e.children=null)}function Ut(e,t,r){return Math.min(Math.max(t,e),r)}function bh(e){return e.end-e.start}var Kr=C(()=>{hh();Pc();ph();Ac([qc])});function XS(e,t,r,n,i){let o=r.columns[n][i],{W:a=0,L:u=0,V:d=0,I:l=0,M:f=0,A:s=0,F:c=0,C:p=0,H:m=0,P:v=0,R:h=0,K:_=0,Q:y=0,E:S=0,D:E=0,T:M=0,S:O=0,G:w=0,Y:A=0,N:q=0}=e,P=a+u+d+l+f+s+c+p+m+v+A,T=_+h,I=y+S,z=S+E,Y=M+O;if(P/t>.6&&(o==="W"||o==="L"||o==="V"||o==="A"||o==="I"||o==="M"||o==="F"||o==="C"))return"rgb(128,179,230)";if((o==="K"||o==="R")&&(T/t>.6||_/t>.8||h/t>.8||y/t>.8))return"#d88";if(o==="E"&&(T/t>.6||I/t>.5||S/t>.8||y/t>.8||E/t>.8))return"rgb(192, 72, 192)";if(o==="D"&&(T/t>.6||z/t>.5||_/t>.8||h/t>.8||y/t>.8))return"rgb(204, 77, 204)";if(o==="N"&&(q/t>.5||A/t>.85)||o==="Q"&&(T/t>.6||I/t>.6||y/t>.85||S/t>.85||_/t>.85||h/t>.85))return"#8f8";if((o==="S"||o==="T")&&(P/t>.6||Y/t>.5||O/t>.85||M/t>.85))return"rgb(26,204,26)";if(o==="C"&&p/t>.85)return"rgb(240, 128, 128)";if(o==="G"&&w/t>0)return"rgb(240, 144, 72)";if(o==="P"&&v/t>0)return"rgb(204, 204, 0)";if((o==="H"||o==="Y")&&(P/t>.6||a>.85||A>.85||s>.85||p>.85||v>.85||y>.85||c>.85||m>.85||l>.85||u>.85||f>.85||d>.85))return"rgb(26, 179, 179)"}function ZS(e,t,r,n,i){let o=r.columns[n][i],a=Object.entries(e),u=0,d="";for(let s of a)s[1]>u&&s[0]!=="-"&&(d=s[0],u=s[1]);let l=u/t,f=`hsl(240, 30%, ${100*Math.max(1-u/t/3,.3)}%)`;if(l>.4&&o===d)return f}var CU,jc,Ic=C(()=>{Pc();ph();Kr();Ac([qc]);CU={none:{},clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},percent_identity_dynamic:{},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_protein_dynamic:{},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},jc=Cc(CU,([e,t])=>[e,Cc(t,([r,n])=>[r,He(n).toHex()])])});function jU(e){return Uo.default.createElement("div",null,Uo.default.createElement(Rc.FormControlLabel,{...e}))}function ke({checked:e,label:t,disabled:r,onChange:n}){return Uo.default.createElement(jU,{control:Uo.default.createElement(Rc.Checkbox,{disabled:r,checked:e,onChange:n}),label:t})}var Uo,Rc,Fc=C(()=>{Uo=x(R()),Rc=x(B())});var QS={};dt(QS,{default:()=>DU});var N,Go,KS,JS,_e,gh,IU,RU,FU,LU,DU,ex=C(()=>{N=x(R()),Go=x(D()),KS=x(It()),JS=x(Ae()),_e=x(B());Ic();Fc();gh=(0,KS.makeStyles)()(e=>({field:{margin:e.spacing(4)},flex:{display:"flex"},minw:{width:"80em"}})),IU=(0,Go.observer)(function({model:e}){return N.default.createElement(N.default.Fragment,null,N.default.createElement(RU,{model:e}),N.default.createElement(FU,{model:e}))}),RU=(0,Go.observer)(function({model:t}){let{classes:r}=gh(),{drawTree:n,drawLabels:i,drawNodeBubbles:o,labelsAlignRight:a,noTree:u,showBranchLen:d,treeWidthMatchesArea:l,treeWidth:f}=t;return N.default.createElement("div",null,N.default.createElement("h1",null,"Tree options"),N.default.createElement(ke,{checked:d,onChange:()=>{t.setShowBranchLen(!d)},label:"Show branch length?"}),N.default.createElement(ke,{checked:o,onChange:()=>{t.setDrawNodeBubbles(!o)},label:"Draw clickable bubbles on tree branches?"}),N.default.createElement(ke,{checked:n,onChange:()=>{t.setDrawTree(!n)},label:"Show tree?"}),N.default.createElement(ke,{checked:a,onChange:()=>{t.setLabelsAlignRight(!a)},label:"Tree labels align right?"}),N.default.createElement(ke,{checked:i,onChange:()=>{t.setDrawLabels(!i)},label:"Draw labels"}),u?null:N.default.createElement("div",null,N.default.createElement(ke,{checked:l,onChange:()=>{t.setTreeWidthMatchesArea(!l)},label:"Make tree width fit to tree area?"}),l?null:N.default.createElement("div",{className:r.flex},N.default.createElement(_e.Typography,null,"Tree width (",f,"px)"),N.default.createElement(_e.Slider,{className:r.field,min:50,max:600,value:f,onChange:(s,c)=>{t.setTreeWidth(c)}}))))}),FU=(0,Go.observer)(function({model:t}){let{classes:r}=gh(),{bgColor:n,contrastLettering:i,colWidth:o,allowedGappyness:a,drawMsaLetters:u,colorSchemeName:d,hideGaps:l,rowHeight:f}=t;return N.default.createElement("div",null,N.default.createElement("h1",null,"MSA options"),N.default.createElement(ke,{checked:u,onChange:()=>{t.setDrawMsaLetters(!u)},label:"Draw letters"}),N.default.createElement(ke,{checked:n,onChange:()=>{t.setBgColor(!n)},label:"Color background tiles of MSA?"}),N.default.createElement(ke,{checked:i,onChange:()=>{t.setContrastLettering(!i)},label:"Use contrast lettering"}),N.default.createElement(ke,{checked:l,onChange:()=>{t.setHideGaps(!l)},label:`Hide columns that are ${a}% gaps`}),l?N.default.createElement("div",{className:r.flex},N.default.createElement(_e.Typography,null,"Allowed gappyness (",100-a,"%)"),N.default.createElement(_e.Slider,{className:r.field,min:1,max:100,value:a,onChange:(s,c)=>{t.setAllowedGappyness(c)}})):null,N.default.createElement("div",{className:r.flex},N.default.createElement(_e.Typography,null,"Column width (",o,"px)"),N.default.createElement(_e.Slider,{className:r.field,min:1,max:50,value:o,onChange:(s,c)=>{t.setColWidth(c)}})),N.default.createElement("div",{className:r.flex},N.default.createElement(_e.Typography,null,"Row height (",f,"px)"),N.default.createElement(_e.Slider,{className:r.field,min:1,max:50,value:f,onChange:(s,c)=>{t.setRowHeight(c)}})),N.default.createElement(_e.TextField,{select:!0,label:"Color scheme",value:d,onChange:s=>{t.setColorSchemeName(s.target.value)}},Object.keys(jc).map(s=>N.default.createElement(_e.MenuItem,{key:s,value:s},s))))}),LU=(0,Go.observer)(function({model:e,onClose:t}){let{classes:r}=gh();return N.default.createElement(JS.Dialog,{open:!0,onClose:()=>{t()},title:"Settings",maxWidth:"xl"},N.default.createElement(_e.DialogContent,{className:r.minw},N.default.createElement(IU,{model:e}),N.default.createElement(_e.DialogActions,null,N.default.createElement(_e.Button,{onClick:()=>{t()},variant:"contained",color:"primary"},"Submit"))))}),DU=LU});var yh=g((Qne,tx)=>{tx.exports=JBrowseExports["@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail"]});var nx=g((eie,rx)=>{rx.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(i){e.addRange(i)}),t&&t.focus()}}});var ax=g((tie,ox)=>{"use strict";var NU=nx(),ix={"text/plain":"Text","text/html":"Url",default:"Text"},BU="Copy to clipboard: #{key}, Enter";function zU(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function HU(e,t){var r,n,i,o,a,u,d=!1;t||(t={}),r=t.debug||!1;try{i=NU(),o=document.createRange(),a=document.getSelection(),u=document.createElement("span"),u.textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(f){if(f.stopPropagation(),t.format)if(f.preventDefault(),typeof f.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=ix[t.format]||ix.default;window.clipboardData.setData(s,e)}else f.clipboardData.clearData(),f.clipboardData.setData(t.format,e);t.onCopy&&(f.preventDefault(),t.onCopy(f.clipboardData))}),document.body.appendChild(u),o.selectNodeContents(u),a.addRange(o);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");d=!0}catch(f){r&&console.error("unable to copy using execCommand: ",f),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(s){r&&console.error("unable to copy using clipboardData: ",s),r&&console.error("falling back to prompt"),n=zU("message"in t?t.message:BU),window.prompt(n,e)}}finally{a&&(typeof a.removeRange=="function"?a.removeRange(o):a.removeAllRanges()),u&&document.body.removeChild(u),i()}return d}ox.exports=HU});function $o({str:e}){let{classes:t}=VU(),[r,n]=(0,Tt.useState)(!1),[i,o]=(0,Tt.useState)(!1),[a,u]=(0,Tt.useState)(!1),d=e.map(([l,f])=>[l,i?f:f.replaceAll("-","")]).filter(l=>a?!0:!!l[1]).map(([l,f])=>`>${l}
${i?f:f.replaceAll("-","")}`).join(`
`);return Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement(Lc.Button,{color:"primary",variant:"contained",onClick:()=>{(0,sx.default)(d),n(!0),setTimeout(()=>{n(!1)},500)}},r?"Copied!":"Copy to clipboard"),Tt.default.createElement(ke,{label:"Show gaps",checked:i,onChange:()=>{o(!i)}}),Tt.default.createElement(ke,{label:"Show empty",checked:a,onChange:()=>{u(!a)}}),Tt.default.createElement(Lc.TextField,{variant:"outlined",multiline:!0,className:t.dialogContent,minRows:5,maxRows:10,fullWidth:!0,value:d,InputProps:{readOnly:!0,classes:{input:t.textAreaFont}}}))}var Tt,Lc,ux,sx,VU,wh=C(()=>{Tt=x(R()),Lc=x(B()),ux=x(It()),sx=x(ax());Fc();VU=(0,ux.makeStyles)()({textAreaFont:{fontFamily:"Courier New",wordWrap:"break-word"},dialogContent:{background:"lightgrey",margin:4,minWidth:"80em"}})});var dx={};dt(dx,{default:()=>UU});var ki,lx,cx,fx,Dc,WU,UU,px=C(()=>{ki=x(R()),lx=x(B()),cx=x(D()),fx=x(Ae()),Dc=x(yh());wh();WU=(0,cx.observer)(function({model:e,onClose:t}){let{header:r}=e;return ki.default.createElement(fx.Dialog,{onClose:()=>{t()},open:!0,title:"Metadata",maxWidth:"xl"},ki.default.createElement(lx.DialogContent,null,ki.default.createElement(Dc.Attributes,{attributes:r}),ki.default.createElement(Dc.BaseCard,{title:"sequence"},ki.default.createElement($o,{str:e.rows}))))}),UU=WU});var vx={};dt(vx,{default:()=>$U});var mr,hx,Qe,mx,GU,$U,_x=C(()=>{mr=x(R()),hx=x(Ae()),Qe=x(B()),mx=x(D()),GU=(0,mx.observer)(function({model:e,onClose:t}){let{tracks:r}=e;return mr.default.createElement(hx.Dialog,{onClose:()=>{t()},open:!0,title:"Add track"},mr.default.createElement(Qe.DialogContent,null,mr.default.createElement(Qe.Typography,null,"Open relevant per-alignment tracks e.g. protein domains"),mr.default.createElement(Qe.FormGroup,null,r.map(n=>mr.default.createElement(Qe.FormControlLabel,{key:n.model.id,control:mr.default.createElement(Qe.Checkbox,{checked:!e.turnedOffTracks.has(n.model.id),onChange:()=>{e.toggleTrack(n.model.id)}}),label:n.model.name}))),mr.default.createElement(Qe.DialogActions,null,mr.default.createElement(Qe.Button,{onClick:()=>{t()},variant:"contained",color:"primary"},"Close"))))}),$U=GU});var gx={};dt(gx,{default:()=>bx});function bx({model:e,onClose:t}){let[r,n]=(0,ve.useState)(!0),[i,o]=(0,ve.useState)("viewport"),[a,u]=(0,ve.useState)(),d=(0,le.useTheme)();return ve.default.createElement(Nc.Dialog,{onClose:()=>{t()},open:!0,title:"Export SVG"},ve.default.createElement(le.DialogContent,null,a?ve.default.createElement(Nc.ErrorMessage,{error:a}):null,ve.default.createElement(le.Typography,null,"Settings:"),ve.default.createElement(ke,{label:"Include minimap?",disabled:i==="entire",checked:r,onChange:()=>{n(!r)}}),ve.default.createElement("div",null,ve.default.createElement(le.FormControl,null,ve.default.createElement(le.FormLabel,null,"Export type"),ve.default.createElement(le.RadioGroup,{value:i,onChange:l=>{o(l.target.value)}},ve.default.createElement(le.FormControlLabel,{value:"entire",control:ve.default.createElement(le.Radio,null),label:"Entire MSA"}),ve.default.createElement(le.FormControlLabel,{value:"viewport",control:ve.default.createElement(le.Radio,null),label:"Current viewport only"}))))),ve.default.createElement(le.DialogActions,null,ve.default.createElement(le.Button,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{await e.exportSVG({theme:d,includeMinimap:i==="entire"?!1:r,exportType:i})}catch(l){console.error(l),u(l)}t()})()}},"Submit"),ve.default.createElement(le.Button,{variant:"contained",color:"secondary",onClick:()=>{t()}},"Cancel")))}var ve,Nc,le,yx=C(()=>{ve=x(R()),Nc=x(Ae()),le=x(B());Fc()});function wx(e){return Sh[Math.min(e,Sh.length-1)]}var Sh,xh,Eh=C(()=>{Sh=[["#F8766D"],["#F8766D","#00BFC4"],["#F8766D","#00BA38","#619CFF"],["#F8766D","#7CAE00","#00BFC4","#C77CFF"],["#F8766D","#A3A500","#00BF7D","#00B0F6","#E76BF3"],["#F8766D","#B79F00","#00BA38","#00BFC4","#619CFF","#F564E3"],["#F8766D","#C49A00","#53B400","#00C094","#00B6EB","#A58AFF","#FB61D7"],["#F8766D","#CD9600","#7CAE00","#00BE67","#00BFC4","#00A9FF","#C77CFF","#FF61CC"]];xh=Sh});var xx={};dt(xx,{default:()=>KU});var ee,Bc,Sx,Yo,YU,XU,ZU,KU,Ex=C(()=>{ee=x(R()),Bc=x(D()),Sx=x(Ae()),Yo=x(B());Eh();YU=(0,Bc.observer)(function({model:e}){let{featureFilters:t}=e;return ee.default.createElement("div",null,ee.default.createElement(Yo.Button,{onClick:()=>{for(let r of t.keys())e.setFilter(r,!0)}},"Toggle all on"),ee.default.createElement(Yo.Button,{onClick:()=>{for(let r of t.keys())e.setFilter(r,!1)}},"Toggle all off"))}),XU=(0,Bc.observer)(function({model:e}){let{tidyInterProAnnotationTypes:t,featureFilters:r}=e,n=[...t.values()],i=wx(n.length-1);return ee.default.createElement(ee.default.Fragment,null,ee.default.createElement(YU,{model:e}),ee.default.createElement("table",null,ee.default.createElement("thead",null,ee.default.createElement("tr",null,ee.default.createElement("td",null),ee.default.createElement("td",null,"accession"),ee.default.createElement("td",null,"name"),ee.default.createElement("td",null,"description"))),ee.default.createElement("tbody",null,n.map(({accession:o,name:a,description:u},d)=>ee.default.createElement("tr",{key:o},ee.default.createElement("td",null,ee.default.createElement("input",{type:"checkbox",checked:r.get(o)??!1,onChange:()=>{e.setFilter(o,!e.featureFilters.get(o))}})),ee.default.createElement("td",null,o),ee.default.createElement("td",null,a),ee.default.createElement("td",null,u),ee.default.createElement("td",null,ee.default.createElement("div",{style:{width:20,height:20,background:i[d]||"black"}})))))))}),ZU=(0,Bc.observer)(function({onClose:e,model:t}){return ee.default.createElement(Sx.Dialog,{onClose:()=>{e()},open:!0,title:"Feature filters",maxWidth:"xl"},ee.default.createElement(Yo.DialogContent,null,ee.default.createElement(XU,{model:t})))}),KU=ZU});async function Ox(e,t){let r=await fetch(e,t);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${e} ${await r.text()}`);return r}async function Oh(e,t){return(await Ox(e,t)).text()}async function zc(e,t){return(await Ox(e,t)).json()}function Mx(e){return new Promise(t=>setTimeout(t,e))}var Mh=C(()=>{});var qx={};dt(qx,{default:()=>QU});var te,Ax,ce,Ah,Px,JU,QU,Tx=C(()=>{te=x(R()),Ax=x(D()),ce=x(B()),Ah=x(Me()),Px=x(Ae());Mh();JU=(0,Ax.observer)(function({handleClose:e,model:t}){let[r,n]=(0,te.useState)(),[i,o]=(0,te.useState)("file"),[a,u]=(0,te.useState)("");return te.default.createElement(Px.Dialog,{maxWidth:"xl",title:"Open protein domains from file",onClose:()=>{e()},open:!0},te.default.createElement(ce.DialogContent,null,te.default.createElement("div",null,te.default.createElement(ce.Typography,null,"Open a JSON file of InterProScan results that you run remotely on EBI servers or locally"),te.default.createElement("div",{style:{display:"flex",margin:30}},te.default.createElement(ce.FormControl,{component:"fieldset"},te.default.createElement(ce.RadioGroup,{value:i,onChange:d=>{o(d.target.value)}},te.default.createElement(ce.FormControlLabel,{value:"url",control:te.default.createElement(ce.Radio,null),label:"URL"}),te.default.createElement(ce.FormControlLabel,{value:"file",control:te.default.createElement(ce.Radio,null),label:"File"}))),i==="url"?te.default.createElement("div",null,te.default.createElement(ce.Typography,null,"Open a InterProScan JSON file remote URL"),te.default.createElement(ce.TextField,{label:"URL",value:a,onChange:d=>{u(d.target.value)}})):null,i==="file"?te.default.createElement("div",{style:{paddingTop:20}},te.default.createElement(ce.Typography,null,"Open a InterProScan JSON file file from your local drive"),te.default.createElement(ce.Button,{variant:"outlined",component:"label"},"Choose File",te.default.createElement("input",{type:"file",hidden:!0,onChange:({target:d})=>{let l=d.files?.[0];l&&n(l)}}))):null))),te.default.createElement(ce.DialogActions,null,te.default.createElement(ce.Button,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{let d=r?JSON.parse(await r.text()):await zc(a);t.setInterProAnnotations(Object.fromEntries(d.results.map(l=>[l.xref[0].id,l]))),t.setShowDomains(!0),(0,Ah.getSession)(t).notify("Loaded interproscan results","success")}catch(d){console.error(d),(0,Ah.getSession)(t).notifyError(`${d}`,d)}finally{t.setStatus()}})(),e()}},"Open results")))}),QU=JU});async function eG({seq:e,onProgress:t,onJobId:r,programs:n,model:i}){let o=await Oh(`${qh}/iprscan5/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",sequence:e,programs:n.join(",")})});r?.(o),await rG({jobId:o,onProgress:t}),await nG({jobId:o,model:i})}function tG(e){return zc(`${qh}/iprscan5/result/${e}/json`)}async function rG({onProgress:e,jobId:t}){let r=`${qh}/iprscan5/status/${t}`;try{for(;;){for(let i=0;i<10;i++)await Mx(1e3),e({msg:`Checking status ${10-i}`,url:r});let n=await Oh(r);if(n.includes("FINISHED"))break;if(n.includes("FAILURE"))throw new Error(`Failed to run: jobId ${t}`)}}finally{e()}}async function kx({algorithm:e,seq:t,programs:r,onJobId:n,onProgress:i,model:o}){try{throw i({msg:`Launching ${e} MSA`}),e==="interproscan"&&await eG({seq:t,onJobId:n,onProgress:i,programs:r,model:o}),new Error("unknown algorithm")}finally{i()}}async function nG({jobId:e,model:t}){try{t.setStatus({msg:`Downloading results of ${e} (for larger sequences this can be slow, click status to download and upload in the manual tab)`,url:`https://www.ebi.ac.uk/Tools/services/rest/iprscan5/result/${e}/json`});let r=await tG(e);t.setInterProAnnotations(Object.fromEntries(r.results.map(n=>[n.xref[0].id,n]))),t.setShowDomains(!0),(0,Ph.getSession)(t).notify(`Loaded interproscan ${e} results`,"success")}catch(r){console.error(r),(0,Ph.getSession)(t).notifyError(`${r}`,r)}finally{t.setStatus()}}var Ph,qh,Cx=C(()=>{Ph=x(Me());Mh();qh="https://www.ebi.ac.uk/Tools/services/rest"});var Fx={};dt(Fx,{default:()=>oG});var fe,jx,ot,Ix,Rx,iG,oG,Lx=C(()=>{fe=x(R()),jx=x(D()),ot=x(B()),Ix=x(Me());Cx();Rx=x(Ae()),iG=(0,jx.observer)(function({handleClose:e,model:t}){let[r,n]=(0,fe.useState)([{name:"NCBIfam",description:"NCBI RefSeq FAMs including TIGRFAMs",category:"Families, domains, sites & repeats",checked:!0},{name:"SFLD",description:"Structure function linkage database",category:"Families, domains, sites & repeats",checked:!0},{name:"Phobius",checked:!0,description:"A combined transmembrane topology and signal peptide predictor",category:"Other sequence features"},{name:"SignalP",checked:!0,category:"Other sequence features"},{name:"SignalP_EUK",category:"Other category",checked:!0},{name:"SignalP_GRAM_POSITIVE",category:"Other category",checked:!0},{name:"SignalP_GRAM_NEGATIVE",checked:!0,category:"Other category"},{name:"SUPERFAMILY",category:"Structural domains",checked:!0},{name:"PANTHER",category:"Families, domains, sites & repeats",checked:!0},{name:"Gene3D",category:"Structural domains",checked:!0},{name:"Hamap",category:"Families, domains, sites & repeats",checked:!0},{name:"ProSiteProfiles",category:"Families, domains, sites & repeats",checked:!0},{name:"ProSitePatterns",category:"Families, domains, sites & repeats",checked:!0},{name:"Coils",category:"Other sequence features",checked:!0},{name:"SMART",category:"Families, domains, sites & repeats",checked:!0},{name:"CDD",description:"Conserved Domains Database",category:"Families, domains, sites & repeats",checked:!0},{name:"PRINTS",category:"Families, domains, sites & repeats",checked:!0},{name:"Pfam",category:"Families, domains, sites & repeats",checked:!0},{name:"MobiDBLite",checked:!0,category:"Other sequence features"},{name:"PIRSF",checked:!0,category:"Other category"},{name:"TMHMM",checked:!0,category:"Other sequence features"},{name:"AntiFam",checked:!0,category:"Other category"},{name:"FunFam",checked:!0,category:"Other category"},{name:"PIRSR",checked:!0,category:"Families, domains, sites & repeats"}]),i=r.filter(u=>u.checked).map(u=>u.name),[o,a]=(0,fe.useState)(!1);return fe.default.createElement(Rx.Dialog,{maxWidth:"xl",title:"Query InterProScan API for domains",onClose:()=>{e()},open:!0},fe.default.createElement(ot.DialogContent,null,fe.default.createElement(ot.Typography,null,"This will run InterProScan via the InterProScan API on all rows of the current MSA"),fe.default.createElement(ot.Button,{onClick:()=>{a(!o)}},o?"Hide":"Show"," advanced options"),o?fe.default.createElement("div",null,fe.default.createElement(ot.Typography,null,"Select algorithms for InterProScan to run"),fe.default.createElement("div",null,fe.default.createElement(ot.Button,{variant:"contained",color:"secondary",onClick:()=>{n(r.map(u=>({...u,checked:!1})))}},"Select none"),fe.default.createElement(ot.Button,{variant:"contained",color:"primary",onClick:()=>{n(r.map(u=>({...u,checked:!0})))}},"Select all")),fe.default.createElement("table",null,fe.default.createElement("tbody",null,r.sort((u,d)=>u.category.localeCompare(d.category)).map(({name:u,checked:d,category:l})=>fe.default.createElement("tr",{key:u},fe.default.createElement("td",null,fe.default.createElement("input",{type:"checkbox",key:u,checked:d,onChange:()=>{n(r.map(f=>f.name===u?{...f,checked:!f.checked}:f))}})),fe.default.createElement("td",null,u),fe.default.createElement("td",null,l)))))):null),fe.default.createElement(ot.DialogActions,null,fe.default.createElement(ot.Button,{variant:"contained",color:"secondary",onClick:()=>{e()}},"Cancel"),fe.default.createElement(ot.Button,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{let{rows:u}=t;if(u.length>140)throw new Error("Too many sequences, please run InterProScan offline");await kx({algorithm:"interproscan",programs:i,seq:u.map(d=>[d[0],d[1].replaceAll("-","")]).filter(d=>!!d[1]).map(d=>`>${d[0]}
${d[1]}`).join(`
`),onProgress:d=>{t.setStatus(d)},model:t})}catch(u){console.error(u),(0,Ix.getSession)(t).notifyError(`${u}`,u)}finally{t.setStatus()}})(),e()}},"Send sequences to InterProScan")))}),oG=iG});var kt,Dx,Nx,Bx,zx,Hx,Vx,Wx,Ux,Gx,$x,Yx,Th,aG,uG,sG,lG,cG,fG,dG,pG,Xx,Zx=C(()=>{kt=x(R()),Dx=x(D()),Nx=x(oh()),Bx=x(OS()),zx=x(MS()),Hx=x(AS()),Vx=x(PS()),Wx=x(qS()),Ux=x(kS()),Gx=x(CS()),$x=x(jS()),Yx=x(IS()),Th=x(RS()),aG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(ex(),QS))),uG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(px(),dx))),sG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(_x(),vx))),lG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(yx(),gx))),cG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(Ex(),xx))),fG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(Tx(),qx))),dG=(0,kt.lazy)(()=>Promise.resolve().then(()=>(Lx(),Fx))),pG=(0,Dx.observer)(({model:e})=>{let{showDomains:t,actuallyShowDomains:r,subFeatureRows:n,noDomains:i}=e;return kt.default.createElement(Nx.default,{menuItems:[{label:"Return to import form",icon:Th.default,onClick:()=>{e.reset()}},{label:"Settings",onClick:()=>{e.queueDialog(o=>[aG,{model:e,onClose:o}])},icon:Gx.default},{label:"Metadata",onClick:()=>{e.queueDialog(o=>[uG,{model:e,onClose:o}])},icon:$x.default},{label:"Extra tracks",onClick:()=>{e.queueDialog(o=>[sG,{model:e,onClose:o}])},icon:Yx.default},{label:"Export SVG",icon:Ux.default,onClick:()=>{e.queueDialog(o=>[lG,{onClose:o,model:e}])}},{label:"Features/protein domains",type:"subMenu",subMenu:[{label:"Open domains...",icon:Th.default,onClick:()=>{e.queueDialog(o=>[fG,{handleClose:o,model:e}])}},{label:"Query InterProScan for domains...",icon:Wx.default,onClick:()=>{e.queueDialog(o=>[dG,{handleClose:o,model:e}])}},{label:`Show domains${i?" (no domains loaded)":""}`,disabled:i,icon:Hx.default,checked:r?t:!1,type:"checkbox",onClick:()=>{e.setShowDomains(!t)}},{label:`Use sub-row layout${i?" (no domains loaded)":""}`,disabled:i,checked:r?n:!1,icon:zx.default,type:"checkbox",onClick:()=>{e.setSubFeatureRows(!n)}},{label:`Filter domains${i?" (no domains loaded)":""}`,icon:Vx.default,disabled:i,onClick:()=>{e.queueDialog(o=>[cG,{onClose:o,model:e}])}}]},...e.extraViewMenuItems()]},kt.default.createElement(Bx.default,null))}),Xx=pG});var Kx,Jx=C(()=>{Kx="3.2.2"});var tE={};dt(tE,{default:()=>eE});function eE({onClose:e}){return we.default.createElement(Qx.Dialog,{onClose:()=>{e()},open:!0,title:"About this plugin"},we.default.createElement(Ve.DialogContent,null,we.default.createElement(Ve.Typography,null,"MSAView ",Kx," (",we.default.createElement(Ve.Link,{href:"https://github.com/gmod/jbrowse-plugin-msaview"},"Github"),")"),we.default.createElement("ul",null,we.default.createElement("li",null,we.default.createElement(Ve.Typography,null,"We use some color schemes from the"," ",we.default.createElement(Ve.Link,{href:"https://github.com/biotite-dev/biotite"},"biotite")," ","project, and their license is reproduced"," ",we.default.createElement(Ve.Link,{href:"https://github.com/biotite-dev/biotite/blob/master/LICENSE.rst"},"here"))),we.default.createElement("li",null,we.default.createElement(Ve.Typography,null,"See this page for some information on jalview colorings"," ",we.default.createElement(Ve.Link,{href:"https://www.jalview.org/help/html/colourSchemes/"},"here"))),we.default.createElement("li",null,we.default.createElement(Ve.Typography,null,"See this page for some info on the clustal, cinema, maeditor, and lesk color schemes"," ",we.default.createElement(Ve.Link,{href:"http://www.bioinformatics.nl/~berndb/aacolour.html"},"here"))),we.default.createElement("li",null,we.default.createElement(Ve.Typography,null,"See this paper about the flower color scheme"," ",we.default.createElement(Ve.Link,{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7245768/"},"here"))))))}var we,Qx,Ve,rE=C(()=>{we=x(R()),Qx=x(Ae()),Ve=x(B());Jx()});function vG(){return We.default.createElement("div",{style:{flex:1}})}var We,nE,iE,oE,aE,hG,mG,uE,sE=C(()=>{We=x(R()),nE=x(B()),iE=x(D()),oE=x(Hf()),aE=x(Fv());sS();dS();bS();ES();Zx();hG=(0,We.lazy)(()=>Promise.resolve().then(()=>(rE(),tE))),mG=(0,iE.observer)(function({model:e}){let[t,{height:r}]=(0,oE.default)();return(0,We.useEffect)(()=>{e.setHeaderHeight(r||0)},[e,r]),We.default.createElement("div",{ref:t,style:{display:"flex"}},We.default.createElement(Xx,{model:e}),We.default.createElement(uS,{model:e}),We.default.createElement(fS,{model:e}),We.default.createElement(_S,{model:e}),We.default.createElement(vG,null),We.default.createElement(xS,{model:e}),We.default.createElement(nE.IconButton,{onClick:()=>{e.queueDialog(n=>[hG,{onClose:n}])}},We.default.createElement(aE.default,null)))});uE=mG});function Hc({model:e,offsetX:t,offsetY:r,contrastScheme:n,ctx:i,theme:o,highResScaleFactorOverride:a,blockSizeXOverride:u,blockSizeYOverride:d}){let{colWidth:l,blockSize:f,rowHeight:s,fontSize:c,highResScaleFactor:p,actuallyShowDomains:m,leaves:v}=e,h=a||p,_=u||f,y=d||f;i.resetTransform(),i.scale(h,h),i.translate(-t,s/2-r),i.textAlign="center",i.font=i.font.replace(/\d+px/,`${c}px`);let S=Math.max(0,Math.floor((r-s)/s)),E=Math.max(0,Math.ceil((r+y+s)/s)),M=Math.max(0,Math.floor(t/l)),O=Math.max(0,Math.ceil((t+_)/l)),w=v.slice(S,E);m||_G({model:e,ctx:i,theme:o,offsetX:t,offsetY:r,xStart:M,xEnd:O,visibleLeaves:w}),bG({model:e,ctx:i,offsetX:t,contrastScheme:n,theme:o,xStart:M,xEnd:O,visibleLeaves:w}),i.resetTransform()}function _G({model:e,offsetX:t,ctx:r,visibleLeaves:n,theme:i,xStart:o,xEnd:a}){let{bgColor:u,colorSchemeName:d,colorScheme:l,colStats:f,colStatsSums:s,columns:c,colWidth:p,rowHeight:m}=e;for(let v of n){let{data:{name:h}}=v,_=v.x,y=c[h]?.slice(o,a);if(y)for(let S=0;S<y.length;S++){let E=y[S],M=d==="clustalx_protein_dynamic"?XS(f[o+S],s[o+S],e,h,o+S):d==="percent_identity_dynamic"?ZS(f[o+S],s[o+S],e,h,o+S):l[E.toUpperCase()];u&&(r.fillStyle=M||i.palette.background.default,r.fillRect(S*p+t-t%p,_-m,p,m))}}}function bG({model:e,offsetX:t,contrastScheme:r,ctx:n,visibleLeaves:i,xStart:o,xEnd:a}){let{bgColor:u,actuallyShowDomains:d,showMsaLetters:l,colorScheme:f,columns:s,colWidth:c,contrastLettering:p,rowHeight:m}=e;if(l)for(let v of i){let{data:{name:h}}=v,_=v.x,y=s[h]?.slice(o,a);if(y)for(let S=0;S<y.length;S++){let E=y[S],M=f[E.toUpperCase()],O=p&&r[E.toUpperCase()]||"black",w=S*c+t-t%c;n.fillStyle=d?"black":u?O:M||"black",n.fillText(E,w+c/2,_-m/4)}}}var kh=C(()=>{Ic()});function Vc({model:e,offsetX:t,offsetY:r,ctx:n,highResScaleFactorOverride:i,blockSizeYOverride:o}){let{leaves:a,blockSize:u,rowHeight:d,highResScaleFactor:l,showDomains:f}=e;if(f){let s=i||l,c=o||u;n.resetTransform(),n.scale(s,s),n.translate(-t,d/2-r);let p=Math.max(0,Math.floor((r-d)/d)),m=Math.max(0,Math.ceil((r+c+d)/d)),v=a.slice(p,m);gG({model:e,ctx:n,visibleLeaves:v})}}function gG({model:e,ctx:t,visibleLeaves:r}){let{subFeatureRows:n,colWidth:i,rowHeight:o,fillPalette:a,strokePalette:u,tidyFilteredGatheredInterProAnnotations:d}=e;for(let l of r){let{x:f,data:{name:s}}=l,c=f,p=d[s],m=0;if(p)for(let{start:v,end:h,accession:_}of p){let y=e.seqCoordToRowSpecificGlobalCoord(s,v-1),S=e.seqCoordToRowSpecificGlobalCoord(s,h),E=y*i;t.fillStyle=a[_],t.strokeStyle=u[_];let M=n?4:o,O=c-o+(n?m*M:0),w=i*(S-y);t.fillRect(E,O,w,M),t.strokeRect(E,O,w,M),m++}}}var Ch=C(()=>{});var Jr,lE,cE,fE,yG,dE,pE=C(()=>{Jr=x(R()),lE=x(B()),cE=x(tr()),fE=x(D());kh();Kr();Ch();yG=(0,fE.observer)(function({model:e,offsetX:t,offsetY:r}){let{colWidth:n,rowHeight:i,scrollY:o,scrollX:a,colorScheme:u,blockSize:d,mouseClickCol:l,mouseClickRow:f,highResScaleFactor:s}=e,c=(0,lE.useTheme)(),p=(0,Jr.useMemo)(()=>Ti(u,c),[u,c]),m=(0,Jr.useRef)(null);return(0,Jr.useEffect)(()=>{let v=m.current?.getContext("2d");if(v)return(0,cE.autorun)(()=>{v.resetTransform(),v.clearRect(0,0,d,d);let{actuallyShowDomains:h}=e;h&&Vc({ctx:v,offsetX:t,offsetY:r,model:e}),Hc({ctx:v,theme:c,offsetX:t,offsetY:r,contrastScheme:p,model:e})})},[e,t,r,c,d,p]),Jr.default.createElement("canvas",{ref:m,onMouseMove:v=>{if(!m.current)return;let{left:h,top:_}=m.current.getBoundingClientRect(),y=v.clientX-h+t,S=v.clientY-_+r,E=Math.floor(y/n),M=Math.floor(S/i);e.setMousePos(E,M)},onClick:v=>{if(!m.current)return;let{left:h,top:_}=m.current.getBoundingClientRect(),y=v.clientX-h+t,S=v.clientY-_+r,E=Math.floor(y/n),M=Math.floor(S/i);E===l&&M===f?e.setMouseClickPos(void 0,void 0):e.setMouseClickPos(E,M)},onMouseLeave:()=>{e.setMousePos()},width:d*s,height:d*s,style:{position:"absolute",top:o+r,left:a+t,width:d,height:d}})}),dE=yG});function jh(){return Wc.default.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},Wc.default.createElement(Uc.CircularProgress,null),Wc.default.createElement(Uc.Typography,null,"Loading..."))}var Uc,Wc,hE=C(()=>{Uc=x(B()),Wc=x(R())});var Be,mE,wG,vE,_E=C(()=>{Be=x(R()),mE=x(D());pE();hE();wG=(0,mE.observer)(function({model:e}){let{MSA:t,verticalScrollbarWidth:r,msaFilehandle:n,height:i,msaAreaWidth:o,blocks2d:a}=e,u=(0,Be.useRef)(null),d=(0,Be.useRef)(!1),l=(0,Be.useRef)(0),f=(0,Be.useRef)(0),s=(0,Be.useRef)(0),c=(0,Be.useRef)(0),[p,m]=(0,Be.useState)(!1);return(0,Be.useEffect)(()=>{let v=u.current;if(!v)return;function h(_){l.current+=_.deltaX,f.current+=_.deltaY,d.current||(d.current=!0,requestAnimationFrame(()=>{e.doScrollX(-l.current),e.doScrollY(-f.current),l.current=0,f.current=0,d.current=!1})),_.preventDefault(),_.stopPropagation()}return v.addEventListener("wheel",h,{passive:!1}),()=>{v.removeEventListener("wheel",h)}},[e]),(0,Be.useEffect)(()=>{let v=()=>{};function h(y){y.preventDefault();let S=y.clientX,E=y.clientY,M=S-s.current,O=E-c.current;(M||O)&&(d.current||(d.current=!0,window.requestAnimationFrame(()=>{e.doScrollX(M),e.doScrollY(O),d.current=!1,s.current=y.clientX,c.current=y.clientY})))}function _(){s.current=0,p&&m(!1)}return p&&(window.addEventListener("mousemove",h,!0),window.addEventListener("mouseup",_,!0),v=()=>{window.removeEventListener("mousemove",h,!0),window.removeEventListener("mouseup",_,!0)}),v},[e,p]),Be.default.createElement("div",{ref:u,onMouseDown:v=>{let h=v.target;h.draggable||h.dataset.resizer||v.button===0&&(s.current=v.clientX,c.current=v.clientY,m(!0))},onMouseUp:v=>{v.preventDefault(),m(!1)},onMouseLeave:v=>{v.preventDefault()},style:{position:"relative",height:i,width:o-r,overflow:"hidden"}},!t&&!n?null:t?a.map(([v,h])=>Be.default.createElement(dE,{key:`${v}_${h}`,model:e,offsetX:v,offsetY:h})):Be.default.createElement(jh,null))}),vE=wG});function gE({ctx:e,model:t}){let{mouseCol:r,colWidth:n,width:i,height:o,rowHeight:a,scrollX:u,scrollY:d,mouseRow:l,mouseCol2:f,mouseClickRow:s,mouseClickCol:c}=t;e.resetTransform(),e.clearRect(0,0,i,o),r!==void 0&&(e.fillStyle=bE,e.fillRect(r*n+u,0,n,o)),l!==void 0&&(e.fillStyle=bE,e.fillRect(0,l*a+d,i,a)),c!==void 0&&(e.fillStyle=Ih,e.fillRect(c*n+u,0,n,o)),s!==void 0&&(e.fillStyle=Ih,e.fillRect(0,s*a+d,i,a)),f!==void 0&&(e.fillStyle=Ih,e.fillRect(f*n+u,0,n,o))}var bE,Ih,yE=C(()=>{bE="rgba(0,0,0,0.15)",Ih="rgba(128,128,0,0.2)"});var Ci,wE,SE,SG,xE,EE=C(()=>{Ci=x(R()),wE=x(D()),SE=x(tr());yE();SG=(0,wE.observer)(function({model:e}){let t=(0,Ci.useRef)(null),{height:r,width:n}=e;return(0,Ci.useEffect)(()=>{let i=t.current?.getContext("2d");return i?(0,SE.autorun)(()=>{gE({ctx:i,model:e})}):void 0},[e]),Ci.default.createElement("canvas",{ref:t,id:"mouseover",width:n,height:r,style:{position:"absolute",top:0,left:0,width:n,height:r,zIndex:1e3,pointerEvents:"none"}})}),xE=SG});var Gc,OE,xG,ME,AE=C(()=>{Gc=x(R()),OE=x(D());_E();EE();xG=(0,OE.observer)(function({model:e}){return Gc.default.createElement("div",{style:{position:"relative"}},Gc.default.createElement(vE,{model:e}),Gc.default.createElement(xE,{model:e}))}),ME=xG});var PE=g((Rh,Fh)=>{(function(e,t){typeof Rh=="object"&&typeof Fh<"u"?Fh.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self).RBush=t()})(Rh,function(){"use strict";function e(h,_,y,S,E){(function M(O,w,A,q,P){for(;q>A;){if(q-A>600){var T=q-A+1,I=w-A+1,z=Math.log(T),Y=.5*Math.exp(2*z/3),re=.5*Math.sqrt(z*Y*(T-Y)/T)*(I-T/2<0?-1:1),ze=Math.max(A,Math.floor(w-I*Y/T+re)),Bn=Math.min(q,Math.floor(w+(T-I)*Y/T+re));M(O,w,ze,Bn,P)}var un=O[w],sn=A,xt=q;for(t(O,A,w),P(O[q],un)>0&&t(O,A,q);sn<xt;){for(t(O,sn,xt),sn++,xt--;P(O[sn],un)<0;)sn++;for(;P(O[xt],un)>0;)xt--}P(O[A],un)===0?t(O,A,xt):t(O,++xt,q),xt<=w&&(A=xt+1),w<=xt&&(q=xt-1)}})(h,_,y||0,S||h.length-1,E||r)}function t(h,_,y){var S=h[_];h[_]=h[y],h[y]=S}function r(h,_){return h<_?-1:h>_?1:0}var n=function(h){h===void 0&&(h=9),this._maxEntries=Math.max(4,h),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(h,_,y){if(!y)return _.indexOf(h);for(var S=0;S<_.length;S++)if(y(h,_[S]))return S;return-1}function o(h,_){a(h,0,h.children.length,_,h)}function a(h,_,y,S,E){E||(E=m(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var M=_;M<y;M++){var O=h.children[M];u(E,h.leaf?S(O):O)}return E}function u(h,_){return h.minX=Math.min(h.minX,_.minX),h.minY=Math.min(h.minY,_.minY),h.maxX=Math.max(h.maxX,_.maxX),h.maxY=Math.max(h.maxY,_.maxY),h}function d(h,_){return h.minX-_.minX}function l(h,_){return h.minY-_.minY}function f(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}function s(h){return h.maxX-h.minX+(h.maxY-h.minY)}function c(h,_){return h.minX<=_.minX&&h.minY<=_.minY&&_.maxX<=h.maxX&&_.maxY<=h.maxY}function p(h,_){return _.minX<=h.maxX&&_.minY<=h.maxY&&_.maxX>=h.minX&&_.maxY>=h.minY}function m(h){return{children:h,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(h,_,y,S,E){for(var M=[_,y];M.length;)if(!((y=M.pop())-(_=M.pop())<=S)){var O=_+Math.ceil((y-_)/S/2)*S;e(h,O,_,y,E),M.push(_,O,O,y)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(h){var _=this.data,y=[];if(!p(h,_))return y;for(var S=this.toBBox,E=[];_;){for(var M=0;M<_.children.length;M++){var O=_.children[M],w=_.leaf?S(O):O;p(h,w)&&(_.leaf?y.push(O):c(h,w)?this._all(O,y):E.push(O))}_=E.pop()}return y},n.prototype.collides=function(h){var _=this.data;if(!p(h,_))return!1;for(var y=[];_;){for(var S=0;S<_.children.length;S++){var E=_.children[S],M=_.leaf?this.toBBox(E):E;if(p(h,M)){if(_.leaf||c(h,M))return!0;y.push(E)}}_=y.pop()}return!1},n.prototype.load=function(h){if(!h||!h.length)return this;if(h.length<this._minEntries){for(var _=0;_<h.length;_++)this.insert(h[_]);return this}var y=this._build(h.slice(),0,h.length-1,0);if(this.data.children.length)if(this.data.height===y.height)this._splitRoot(this.data,y);else{if(this.data.height<y.height){var S=this.data;this.data=y,y=S}this._insert(y,this.data.height-y.height-1,!0)}else this.data=y;return this},n.prototype.insert=function(h){return h&&this._insert(h,this.data.height-1),this},n.prototype.clear=function(){return this.data=m([]),this},n.prototype.remove=function(h,_){if(!h)return this;for(var y,S,E,M=this.data,O=this.toBBox(h),w=[],A=[];M||w.length;){if(M||(M=w.pop(),S=w[w.length-1],y=A.pop(),E=!0),M.leaf){var q=i(h,M.children,_);if(q!==-1)return M.children.splice(q,1),w.push(M),this._condense(w),this}E||M.leaf||!c(M,O)?S?(y++,M=S.children[y],E=!1):M=null:(w.push(M),A.push(y),y=0,S=M,M=M.children[0])}return this},n.prototype.toBBox=function(h){return h},n.prototype.compareMinX=function(h,_){return h.minX-_.minX},n.prototype.compareMinY=function(h,_){return h.minY-_.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(h){return this.data=h,this},n.prototype._all=function(h,_){for(var y=[];h;)h.leaf?_.push.apply(_,h.children):y.push.apply(y,h.children),h=y.pop();return _},n.prototype._build=function(h,_,y,S){var E,M=y-_+1,O=this._maxEntries;if(M<=O)return o(E=m(h.slice(_,y+1)),this.toBBox),E;S||(S=Math.ceil(Math.log(M)/Math.log(O)),O=Math.ceil(M/Math.pow(O,S-1))),(E=m([])).leaf=!1,E.height=S;var w=Math.ceil(M/O),A=w*Math.ceil(Math.sqrt(O));v(h,_,y,A,this.compareMinX);for(var q=_;q<=y;q+=A){var P=Math.min(q+A-1,y);v(h,q,P,w,this.compareMinY);for(var T=q;T<=P;T+=w){var I=Math.min(T+w-1,P);E.children.push(this._build(h,T,I,S-1))}}return o(E,this.toBBox),E},n.prototype._chooseSubtree=function(h,_,y,S){for(;S.push(_),!_.leaf&&S.length-1!==y;){for(var E=1/0,M=1/0,O=void 0,w=0;w<_.children.length;w++){var A=_.children[w],q=f(A),P=(T=h,I=A,(Math.max(I.maxX,T.maxX)-Math.min(I.minX,T.minX))*(Math.max(I.maxY,T.maxY)-Math.min(I.minY,T.minY))-q);P<M?(M=P,E=q<E?q:E,O=A):P===M&&q<E&&(E=q,O=A)}_=O||_.children[0]}var T,I;return _},n.prototype._insert=function(h,_,y){var S=y?h:this.toBBox(h),E=[],M=this._chooseSubtree(S,this.data,_,E);for(M.children.push(h),u(M,S);_>=0&&E[_].children.length>this._maxEntries;)this._split(E,_),_--;this._adjustParentBBoxes(S,E,_)},n.prototype._split=function(h,_){var y=h[_],S=y.children.length,E=this._minEntries;this._chooseSplitAxis(y,E,S);var M=this._chooseSplitIndex(y,E,S),O=m(y.children.splice(M,y.children.length-M));O.height=y.height,O.leaf=y.leaf,o(y,this.toBBox),o(O,this.toBBox),_?h[_-1].children.push(O):this._splitRoot(y,O)},n.prototype._splitRoot=function(h,_){this.data=m([h,_]),this.data.height=h.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(h,_,y){for(var S,E,M,O,w,A,q,P=1/0,T=1/0,I=_;I<=y-_;I++){var z=a(h,0,I,this.toBBox),Y=a(h,I,y,this.toBBox),re=(E=z,M=Y,O=void 0,w=void 0,A=void 0,q=void 0,O=Math.max(E.minX,M.minX),w=Math.max(E.minY,M.minY),A=Math.min(E.maxX,M.maxX),q=Math.min(E.maxY,M.maxY),Math.max(0,A-O)*Math.max(0,q-w)),ze=f(z)+f(Y);re<P?(P=re,S=I,T=ze<T?ze:T):re===P&&ze<T&&(T=ze,S=I)}return S||y-_},n.prototype._chooseSplitAxis=function(h,_,y){var S=h.leaf?this.compareMinX:d,E=h.leaf?this.compareMinY:l;this._allDistMargin(h,_,y,S)<this._allDistMargin(h,_,y,E)&&h.children.sort(S)},n.prototype._allDistMargin=function(h,_,y,S){h.children.sort(S);for(var E=this.toBBox,M=a(h,0,_,E),O=a(h,y-_,y,E),w=s(M)+s(O),A=_;A<y-_;A++){var q=h.children[A];u(M,h.leaf?E(q):q),w+=s(M)}for(var P=y-_-1;P>=_;P--){var T=h.children[P];u(O,h.leaf?E(T):T),w+=s(O)}return w},n.prototype._adjustParentBBoxes=function(h,_,y){for(var S=y;S>=0;S--)u(_[S],h)},n.prototype._condense=function(h){for(var _=h.length-1,y=void 0;_>=0;_--)h[_].children.length===0?_>0?(y=h[_-1].children).splice(y.indexOf(h[_]),1):this.clear():o(h[_],this.toBBox)},n})});var CE={};dt(CE,{default:()=>OG});var Gt,qE,TE,kE,Mn,EG,OG,jE=C(()=>{Gt=x(R()),qE=x(Ae()),TE=x(B()),kE=x(D()),Mn=x(yh());wh();EG=(0,kE.observer)(function({info:e,model:t,nodeName:r,onClose:n}){let{treeMetadata:i,rows:o}=t,a=i[r],u=o.find(d=>d[0]===r);return Gt.default.createElement(qE.Dialog,{onClose:()=>{n()},open:!0,title:"Tree node info",maxWidth:"xl"},Gt.default.createElement(TE.DialogContent,null,Gt.default.createElement(Mn.BaseCard,{title:"Attributes"},Gt.default.createElement(Mn.Attributes,{attributes:{nodeName:r,...e}})),Gt.default.createElement(Mn.BaseCard,{title:"Sequence"},u?Gt.default.createElement($o,{str:[u]}):Gt.default.createElement("div",null,"Sequence not found")),a?Gt.default.createElement(Mn.BaseCard,{title:"Extra metadata"},Gt.default.createElement(Mn.Attributes,{attributes:a})):null))}),OG=EG});var An,ji,IE,MG,AG,RE,FE=C(()=>{An=x(R()),ji=x(B()),IE=x(D()),MG=(0,An.lazy)(()=>Promise.resolve().then(()=>(jE(),CE))),AG=(0,IE.observer)(function({node:e,onClose:t,model:r}){let{collapsed:n,collapsedLeaves:i}=r;return An.default.createElement(ji.Menu,{anchorReference:"anchorPosition",anchorPosition:{top:e.y,left:e.x},transitionDuration:0,keepMounted:!0,open:!!e,onClose:t},An.default.createElement(ji.MenuItem,{dense:!0,disabled:!0},e.name),An.default.createElement(ji.MenuItem,{dense:!0,onClick:()=>{r.queueDialog(o=>[MG,{info:r.getRowData(e.name),model:r,nodeName:e.name,onClose:o}]),t()}},"More info..."),An.default.createElement(ji.MenuItem,{dense:!0,onClick:()=>{n.includes(e.id)?r.toggleCollapsed(e.id):e.id.endsWith("-leafnode")?r.toggleCollapsed2(e.id):r.toggleCollapsed2(`${e.id}-leafnode`),t()}},n.includes(e.id)||i.includes(e.id)?"Show node":"Hide node"))}),RE=AG});var Xo,Ii,LE,PG,DE,NE=C(()=>{Xo=x(R()),Ii=x(B()),LE=x(D()),PG=(0,LE.observer)(function({node:e,model:t,onClose:r}){return Xo.default.createElement(Ii.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:e.x,top:e.y},transitionDuration:0,keepMounted:!0,open:!!e,onClose:r},Xo.default.createElement(Ii.MenuItem,{dense:!0,disabled:!0},e.name),Xo.default.createElement(Ii.MenuItem,{dense:!0,onClick:()=>{t.toggleCollapsed(e.id),r()}},t.collapsed.includes(e.id)?"Expand this node":"Collapse this node"),Xo.default.createElement(Ii.MenuItem,{dense:!0,onClick:()=>{t.showOnly===e.id?t.setShowOnly(void 0):t.setShowOnly(e.id),r()}},t.showOnly===e.id?"Disable show only this node":"Show only this node"))}),DE=PG});function qG({offsetY:e,ctx:t,model:r,theme:n,blockSizeYOverride:i}){let{hierarchy:o,showBranchLen:a,blockSize:u}=r,d=i||u;t.strokeStyle=n.palette.text.primary;for(let l of o.links()){let{source:f,target:s}=l;if(s.height===0&&!a)continue;let c=f.x,p=s.x,m=a?s.len:s.y,v=a?f.len:f.y,h=Math.min(c,p),_=Math.max(c,p);e+d>=h&&_>=e&&(t.beginPath(),t.moveTo(v,c),t.lineTo(v,p),t.lineTo(m,p),t.stroke())}}function TG({ctx:e,clickMap:t,offsetY:r,model:n,blockSizeYOverride:i}){let{hierarchy:o,showBranchLen:a,collapsed:u,blockSize:d,marginLeft:l}=n,f=i||d;for(let s of o.descendants()){let c=a?"len":"y",{[c]:p,data:m}=s,v=s.x,{id:h="",name:_=""}=m;s.height>1&&v>r-5&&v<r+f+5&&(e.strokeStyle="black",e.fillStyle=u.includes(h)?"black":"white",e.beginPath(),e.arc(p,v,2.5,0,2*Math.PI),e.fill(),e.stroke(),t?.insert({minX:p-2.5+l,maxX:p-2.5+5+l,minY:v-2.5,maxY:v-2.5+5,branch:!0,id:h,name:_}))}}function kG({theme:e,model:t,offsetY:r,ctx:n,clickMap:i,blockSizeYOverride:o}){let{fontSize:a,showBranchLen:u,treeMetadata:d,hierarchy:l,collapsed:f,collapsedLeaves:s,blockSize:c,labelsAlignRight:p,drawTree:m,treeAreaWidth:v,treeWidth:h,treeAreaWidthMinusMargin:_,marginLeft:y,leaves:S,noTree:E}=t,M=o||c;p?(n.textAlign="right",n.setLineDash([1,3])):n.textAlign="start";for(let O of S){let{data:{name:w,id:A},len:q}=O,P=O.x,T=O.y,I=d[w]?.genome||w;if(P>r-5&&P<r+M+5){let z=P+a/4,Y=(u?q:T)||0;!u&&!f.includes(A)&&!s.includes(A)&&(Y-=h/l.height);let{width:re}=n.measureText(I),ze=n.measureText("M").width;if(n.fillStyle=e.palette.text.primary,p){let un=_-2;if(m&&!E){let{width:sn}=n.measureText(I);n.moveTo(Y+2.5+2,P),n.lineTo(un-2-sn,P),n.stroke()}n.fillText(I,un,z),i?.insert({minX:v-re,maxX:v,minY:z-ze,maxY:z,name:w,id:A})}else n.fillText(I,Y+5,z),i?.insert({minX:Y+5+y,maxX:Y+5+re+y,minY:z-ze,maxY:z,name:w,id:A})}}n.setLineDash([])}function $c({model:e,clickMap:t,ctx:r,offsetY:n,theme:i,highResScaleFactorOverride:o,blockSizeYOverride:a}){t?.clear();let{noTree:u,drawTree:d,drawNodeBubbles:l,treeWidth:f,highResScaleFactor:s,blockSize:c,fontSize:p,showTreeText:m,marginLeft:v,nref:h,rowHeight:_}=e,y=a||c;r.resetTransform();let S=h<0?Number.NEGATIVE_INFINITY:o||s;r.scale(S,S),r.clearRect(0,0,f+600,y),r.translate(v,-n);let E=r.font;r.font=E.replace(/\d+px/,`${p}px`),!u&&d&&(qG({ctx:r,offsetY:n,model:e,theme:i,blockSizeYOverride:a}),l&&TG({ctx:r,offsetY:n,clickMap:t,model:e,theme:i,blockSizeYOverride:a})),m&&kG({ctx:r,offsetY:n,model:e,clickMap:t,theme:i,blockSizeYOverride:a})}var Yc=C(()=>{});var Pn,at,BE,zE,HE,VE,CG,WE,UE=C(()=>{Pn=x(R()),at=x(R()),BE=x(tr()),zE=x(D()),HE=x(B()),VE=x(PE());FE();NE();Yc();CG=(0,zE.observer)(function({model:e,offsetY:t}){let r=(0,HE.useTheme)(),n=(0,at.useRef)(),i=(0,at.useRef)(new VE.default),o=(0,at.useRef)(null),[a,u]=(0,at.useState)(),[d,l]=(0,at.useState)(),[f,s]=(0,at.useState)(),{scrollY:c,treeAreaWidth:p,blockSize:m,highResScaleFactor:v}=e,h=p+600,_=m,y=h*v,S=_*v,E=(0,at.useCallback)(A=>{e.incrementRef(),n.current=A},[e,_,h]);(0,at.useEffect)(()=>{let A=n.current?.getContext("2d");if(A)return(0,BE.autorun)(()=>{$c({ctx:A,model:e,offsetY:t,clickMap:i.current,theme:r})})},[e,t,r]),(0,at.useEffect)(()=>{let A=o.current?.getContext("2d");if(A&&(A.resetTransform(),A.clearRect(0,0,p+600,m),A.translate(0,-t),f)){let{minX:q,maxX:P,minY:T,maxY:I}=f;A.fillStyle="rgba(0,0,0,0.1)",A.fillRect(q,T,P-q,I-T)}},[f,t,m,p]);function M(A){let q=A.nativeEvent.offsetX,P=A.nativeEvent.offsetY,[T]=i.current.search({minX:q,maxX:q+1,minY:P+t,maxY:P+1+t});return T?.branch?{...T,x:A.clientX,y:A.clientY}:void 0}function O(A){let q=A.nativeEvent.offsetX,P=A.nativeEvent.offsetY,[T]=i.current.search({minX:q,maxX:q+1,minY:P+t,maxY:P+1+t});return T&&!T.branch?{...T,x:A.clientX,y:A.clientY}:void 0}let w={width:h,height:_,top:c+t,left:0,position:"absolute"};return Pn.default.createElement(Pn.default.Fragment,null,a?.id?Pn.default.createElement(DE,{node:a,model:e,onClose:()=>{u(void 0)}}):null,d?.id?Pn.default.createElement(RE,{node:d,model:e,onClose:()=>{l(void 0)}}):null,Pn.default.createElement("canvas",{width:y,height:S,style:w,onMouseMove:A=>{if(!n.current)return;let q=O(A)||M(A);n.current.style.cursor=q?"pointer":"default",s(O(A))},onClick:A=>{let{clientX:q,clientY:P}=A,T=M(A);T?.id&&u({x:q,y:P,id:T.id,name:T.name});let I=O(A);I?.id&&l({...I,x:q,y:P})},onMouseLeave:()=>{s(void 0)},ref:E}),Pn.default.createElement("canvas",{style:{...w,pointerEvents:"none",zIndex:100},width:h,height:_,ref:o}))}),WE=CG});var Lh,$t,GE,jG,$E,YE=C(()=>{Lh=x(R()),$t=x(R()),GE=x(D());UE();Yc();jG=(0,GE.observer)(function({model:e}){let t=(0,$t.useRef)(null),r=(0,$t.useRef)(!1),n=(0,$t.useRef)(0),i=(0,$t.useRef)(0),{treeWidth:o,height:a,blocksY:u}=e,[d,l]=(0,$t.useState)(!1);(0,$t.useEffect)(()=>{let s=t.current;if(!s)return;function c(p){n.current+=p.deltaY,r.current||(r.current=!0,requestAnimationFrame(()=>{e.doScrollY(-n.current),n.current=0,r.current=!1})),p.preventDefault(),p.stopPropagation()}return s.addEventListener("wheel",c),()=>{s.removeEventListener("wheel",c)}},[e]),(0,$t.useEffect)(()=>{let s=()=>{};function c(m){m.preventDefault();let h=m.clientY-i.current;h&&(r.current||(r.current=!0,window.requestAnimationFrame(()=>{e.doScrollY(h),r.current=!1,i.current=m.clientY})))}function p(){i.current=0,d&&l(!1)}return d&&(window.addEventListener("mousemove",c,!0),window.addEventListener("mouseup",p,!0),s=()=>{window.removeEventListener("mousemove",c,!0),window.removeEventListener("mouseup",p,!0)}),s},[e,d]);function f(s){let c=s.target;c.draggable||c.dataset.resizer||s.button===0&&(i.current=s.clientY,l(!0))}return Lh.default.createElement("div",{ref:t,onMouseDown:f,onMouseUp:s=>{s.preventDefault(),l(!1)},onMouseLeave:s=>{s.preventDefault()},style:{height:a,position:"relative",width:o+600}},u.map(s=>Lh.default.createElement(WE,{key:s,model:e,offsetY:s})))}),$E=jG});var Dh,XE,IG,ZE,KE=C(()=>{Dh=x(R()),XE=x(D());YE();IG=(0,XE.observer)(function({model:e}){let{treeAreaWidth:t}=e;return Dh.default.createElement("div",{style:{overflow:"hidden",flexShrink:0,width:t}},Dh.default.createElement($E,{model:e}))}),ZE=IG});var ut,JE,RG,QE,eO=C(()=>{ut=x(R()),JE=x(D()),RG=(0,JE.observer)(function({model:e}){let[t,r]=(0,ut.useState)(),[n,i]=(0,ut.useState)(!1),o=(0,ut.useRef)(!1),{scrollX:a,msaAreaWidth:u,minimapHeight:d,colWidth:l,numColumns:f}=e,s=u/f/l,c=-a,p=c+u,m=c*s,v=p*s,h="rgba(66, 119, 127, 0.3)",_=Math.max(v-m,20);(0,ut.useEffect)(()=>{function E(O){t!==void 0&&(o.current||(o.current=!0,window.requestAnimationFrame(()=>{e.setScrollX(t.scrollX-(O.clientX-t.clientX)/s),o.current=!1})))}function M(){r(void 0)}if(t!==void 0)return document.addEventListener("mousemove",E),document.addEventListener("mouseup",M),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mousemove",M)}},[e,s,t]);let y=12,S=d-y;return ut.default.createElement("div",{style:{position:"relative",height:d,width:"100%"}},ut.default.createElement("div",{style:{height:y,boxSizing:"border-box",border:"1px solid #555"}}),ut.default.createElement("div",{style:{position:"absolute",top:0,left:Math.max(0,m),background:n?"rgba(66,119,127,0.6)":h,cursor:"pointer",height:y,width:_,zIndex:100},onMouseOver:()=>{i(!0)},onMouseOut:()=>{i(!1)},onMouseDown:E=>{r({clientX:E.clientX,scrollX:e.scrollX})}}),ut.default.createElement("svg",{height:S,style:{width:"100%"}},ut.default.createElement("polygon",{fill:h,points:[[m+_,0],[m,0],[0,S],[u,S]].toString()})))}),QE=RG});var tO,Yt,FG,rO,nO=C(()=>{tO=x(D()),Yt=x(R());Kr();FG=(0,tO.observer)(({model:e})=>{let{msaAreaHeight:t,scrollY:r,totalHeight:n}=e,[i,o]=(0,Yt.useState)(!1),a=(0,Yt.useRef)(!1),[u,d]=(0,Yt.useState)(),l="rgba(66, 119, 127, 0.3)",f=t/n,s=-r,c=s+t,p=s*f,m=c*f;return(0,Yt.useEffect)(()=>{function v(_){u!==void 0&&(a.current||(a.current=!0,window.requestAnimationFrame(()=>{e.setScrollY(Ut(-n,u.scrollY-(_.clientY-u.clientY)/f,0)),a.current=!1})))}function h(){d(void 0)}if(u!==void 0)return document.addEventListener("mousemove",v),document.addEventListener("mouseup",h),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mousemove",h)}},[e,f,n,u]),Yt.default.createElement("div",{style:{position:"relative",width:20,height:t,borderLeft:"1px solid #555",borderTop:"1px solid #555",boxSizing:"border-box"}},Yt.default.createElement("div",{style:{position:"absolute",top:Math.max(0,p),left:0,background:i?"rgba(66,119,127,0.6)":l,cursor:"pointer",boxSizing:"border-box",width:20,height:Math.max(m-p,20),zIndex:100},onMouseOver:()=>{o(!0)},onMouseOut:()=>{o(!1)},onMouseDown:v=>{d({clientY:v.clientY,scrollY:e.scrollY})}}))}),rO=FG});var de,Zo,LG,DG,NG,BG,iO,oO=C(()=>{de=x(R()),Zo=x(D());kv();Rv();sE();AE();KE();eO();nO();LG=(0,Zo.observer)(function({model:e}){let{showHorizontalScrollbar:t}=e;return de.default.createElement("div",{style:{display:"flex"}},de.default.createElement(Iv,{model:e}),t?de.default.createElement(QE,{model:e}):null)}),DG=(0,Zo.observer)(function({model:e}){let{showVerticalScrollbar:t}=e;return de.default.createElement("div",{style:{display:"flex"}},de.default.createElement(ZE,{model:e}),de.default.createElement(qv,{model:e}),de.default.createElement(ME,{model:e}),t?de.default.createElement(rO,{model:e}):null)}),NG=(0,Zo.observer)(function({model:e}){return de.default.createElement("div",{style:{position:"relative"}},de.default.createElement(LG,{model:e}),de.default.createElement(DG,{model:e}))}),BG=(0,Zo.observer)(function({model:e}){let{height:t,viewInitialized:r,DialogComponent:n,DialogProps:i}=e;return de.default.createElement("div",null,r?de.default.createElement(de.default.Fragment,null,de.default.createElement("div",{style:{height:t,overflow:"hidden"}},de.default.createElement(uE,{model:e}),de.default.createElement(NG,{model:e})),de.default.createElement(Tv,{model:e}),n?de.default.createElement(de.Suspense,{fallback:null},de.default.createElement(n,{...i})):null):null)}),iO=BG});var Xt,Nh,Zc,aO,zG,HG,Bh,uO=C(()=>{Xt=x(R()),Nh=x(D()),Zc=x(B());_v();aO=x(Ae());Pv();oO();zG=(0,Nh.observer)(function({model:e,error:t}){return Xt.default.createElement("div",null,Xt.default.createElement(aO.ErrorMessage,{error:t}),Xt.default.createElement(Zc.Button,{variant:"contained",color:"primary",onClick:()=>{e.reset()}},"Return to import form"))}),HG=(0,Nh.observer)(function({model:e}){let{isLoading:t,dataInitialized:r}=e;return Xt.default.createElement("div",null,Xt.default.createElement(ka,{fallbackRender:n=>Xt.default.createElement(zG,{model:e,error:n.error})},r?t?Xt.default.createElement(Zc.Typography,{variant:"h4"},"Loading..."):Xt.default.createElement(iO,{model:e}):Xt.default.createElement(Av,{model:e})))}),Bh=HG});function VG(e,t){return e.parent===t.parent?1:2}function WG(e){return e.reduce(UG,0)/e.length}function UG(e,t){return e+t.x}function GG(e){return 1+e.reduce($G,0)}function $G(e,t){return Math.max(e,t.y)}function YG(e){for(var t;t=e.children;)e=t[0];return e}function XG(e){for(var t;t=e.children;)e=t[t.length-1];return e}function zh(){var e=VG,t=1,r=1,n=!1;function i(o){var a,u=0;o.eachAfter(function(c){var p=c.children;p?(c.x=WG(p),c.y=GG(p)):(c.x=a?u+=e(c,a):0,c.y=0,a=c)});var d=YG(o),l=XG(o),f=d.x-e(d,l)/2,s=l.x+e(l,d)/2;return o.eachAfter(n?function(c){c.x=(c.x-o.x)*t,c.y=(o.y-c.y)*r}:function(c){c.x=(c.x-f)/(s-f)*t,c.y=(1-(o.y?c.y/o.y:1))*r})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(n=!1,t=+o[0],r=+o[1],i):n?null:[t,r]},i.nodeSize=function(o){return arguments.length?(n=!0,t=+o[0],r=+o[1],i):n?[t,r]:null},i}var sO=C(()=>{});function ZG(e){var t=0,r=e.children,n=r&&r.length;if(!n)t=1;else for(;--n>=0;)t+=r[n].value;e.value=t}function lO(){return this.eachAfter(ZG)}var cO=C(()=>{});function fO(e,t){let r=-1;for(let n of this)e.call(t,n,++r,this);return this}var dO=C(()=>{});function pO(e,t){for(var r=this,n=[r],i,o,a=-1;r=n.pop();)if(e.call(t,r,++a,this),i=r.children)for(o=i.length-1;o>=0;--o)n.push(i[o]);return this}var hO=C(()=>{});function mO(e,t){for(var r=this,n=[r],i=[],o,a,u,d=-1;r=n.pop();)if(i.push(r),o=r.children)for(a=0,u=o.length;a<u;++a)n.push(o[a]);for(;r=i.pop();)e.call(t,r,++d,this);return this}var vO=C(()=>{});function _O(e,t){let r=-1;for(let n of this)if(e.call(t,n,++r,this))return n}var bO=C(()=>{});function gO(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,i=n&&n.length;--i>=0;)r+=n[i].value;t.value=r})}var yO=C(()=>{});function wO(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}var SO=C(()=>{});function xO(e){for(var t=this,r=KG(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var i=n.length;e!==r;)n.splice(i,0,e),e=e.parent;return n}function KG(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),i=null;for(e=r.pop(),t=n.pop();e===t;)i=e,e=r.pop(),t=n.pop();return i}var EO=C(()=>{});function OO(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}var MO=C(()=>{});function AO(){return Array.from(this)}var PO=C(()=>{});function qO(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}var TO=C(()=>{});function kO(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}var CO=C(()=>{});function*jO(){var e=this,t,r=[e],n,i,o;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,n=e.children)for(i=0,o=n.length;i<o;++i)r.push(n[i]);while(r.length)}var IO=C(()=>{});function Ri(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=e$)):t===void 0&&(t=QG);for(var r=new Ko(e),n,i=[r],o,a,u,d;n=i.pop();)if((a=t(n.data))&&(d=(a=Array.from(a)).length))for(n.children=a,u=d-1;u>=0;--u)i.push(o=a[u]=new Ko(a[u])),o.parent=n,o.depth=n.depth+1;return r.eachBefore(r$)}function JG(){return Ri(this).eachBefore(t$)}function QG(e){return e.children}function e$(e){return Array.isArray(e)?e[1]:null}function t$(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function r$(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ko(e){this.data=e,this.depth=this.height=0,this.parent=null}var RO=C(()=>{cO();dO();hO();vO();bO();yO();SO();EO();MO();PO();TO();CO();IO();Ko.prototype=Ri.prototype={constructor:Ko,count:lO,each:fO,eachAfter:mO,eachBefore:pO,find:_O,sum:gO,sort:wO,path:xO,ancestors:OO,descendants:AO,leaves:qO,links:kO,copy:JG,[Symbol.iterator]:jO}});var FO=C(()=>{sO();RO()});var BO=g((Woe,Wh)=>{var pe=function(){let e={gf:{},gc:{},gs:{},gr:{},seqname:[],seqdata:{}};return Object.keys(e).forEach(t=>this[t]=e[t]),this},NO=/^# STOCKHOLM 1.0/,n$=/^\/\/\s*$/,i$=/^#=GF\s+(\S+)\s+(.*?)\s*$/,o$=/^#=GC\s+(\S+)\s+(.*?)\s*$/,a$=/^#=GS\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,u$=/^#=GR\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,s$=/^\s*(\S+)\s+(\S+)\s*$/,l$=/\S/,LO="No format header: # STOCKHOLM 1.0",c$="No format footer: //",f$="Malformed line",Kc=e=>"(At line "+(e+1)+") ",d$=e=>NO.test(e),p$=e=>{try{Uh(e,{strict:!0})}catch{return!1}return!0},vr=e=>{throw new Error(e)},h$=e=>console.warn(e),Uh=(e,t)=>{t=t||{};let r=t.quiet?()=>null:h$,n=t.strict?vr:r,i=[],o=null;return e.split(`
`).forEach((u,d)=>{let l=()=>{o||(n(Kc(d)+LO),o=new pe)},f;NO.test(u)?(o&&n(Kc(d)+c$),o=new pe):n$.test(u)?(o?i.push(o):n(Kc(d)+LO),o=null):(f=i$.exec(u))?(l(),o.gf[f[1]]=o.gf[f[1]]||[],o.gf[f[1]].push(f[2])):(f=o$.exec(u))?(l(),o.gc[f[1]]=o.gc[f[1]]||"",o.gc[f[1]]+=f[2]):(f=a$.exec(u))?(l(),o.gs[f[2]]=o.gs[f[2]]||{},o.gs[f[2]][f[1]]=o.gs[f[2]][f[1]]||[],o.gs[f[2]][f[1]].push(f[3])):(f=u$.exec(u))?(l(),o.gr[f[2]]=o.gr[f[2]]||{},o.gr[f[2]][f[1]]=o.gr[f[2]][f[1]]||"",o.gr[f[2]][f[1]]+=f[3]):(f=s$.exec(u))?(l(),o.seqdata[f[1]]||(o.seqdata[f[1]]="",o.seqname.push(f[1])),o.seqdata[f[1]]+=f[2]):l$.test(u)&&vr(Kc(d)+f$)}),o&&(n("Warning: no end line //"),i.push(o)),i},m$=(e,t)=>{let r=Uh(e,t);return r.length===0&&vr("No alignments found"),r.length>1&&vr("More than one alignment found"),r[0]},v$=(e,t)=>{let r=new pe;return t=t||Object.keys(e),t.forEach(n=>r.addRow(n,e[n])),r},_$=e=>{let t=new pe;return e.forEach(r=>t.addRow(r[0],r[1])),t};pe.prototype.rows=function(){return this.seqname.length};pe.prototype.columns=function(){let e=0;return this.seqname.forEach(t=>{e=Math.max(e,this.seqdata[t].length)}),Object.keys(this.gr).forEach(t=>Object.keys(this.gr[t]).forEach(r=>{e=Math.max(e,this.gr[t][r].length)})),e};pe.prototype.allNames=function(){let e={},t=[],r=i=>{e[i]||(e[i]=!0,t.push(i))},n=i=>i.forEach(r);return n(this.seqname),n(Object.keys(this.seqdata)),Object.keys(this.gr).forEach(i=>n(Object.keys(this.gr[i]))),Object.keys(this.gs).forEach(i=>n(Object.keys(this.gs[i]))),t};pe.prototype.allTags=function(){let e={},t=r=>Object.keys(r).forEach(n=>e[n]=!0);return t(this.gc),t(this.gf),t(this.gr),t(this.gs),Object.keys(e).sort()};pe.prototype.addRow=function(e,t){return this.seqdata[e]&&vr("Duplicate row name"),this.seqname.push(e),this.seqdata[e]=t||"",this};pe.prototype.deleteRow=function(e){return this.seqdata[e]||vr("Row not found"),this.seqname=this.seqname.filter(t=>t!==e),delete this.seqdata[e],Object.keys(this.gr).forEach(t=>delete this.gr[t][e]),Object.keys(this.gs).forEach(t=>delete this.gs[t][e]),this};var Qc=(e,t)=>{let r={};return Object.keys(e).forEach(n=>r[n]=t(e[n])),r},Jo=e=>Qc(e,t=>t.slice(0)),Hh=e=>Qc(e,t=>Jo(t));pe.prototype.copy=function(){let e=new pe;return e.seqname=this.seqname.slice(0),e.seqdata=Jo(this.seqdata),e.gf=Jo(this.gf),e.gc=Jo(this.gc),e.gs=Hh(this.gs),e.gr=Hh(this.gr),e};var b$=(e,t)=>t.map(r=>e[r]).join(""),Vh=(e,t)=>Qc(e,r=>b$(r,t)),g$=(e,t)=>Qc(e,r=>Vh(r,t));pe.prototype.extractColumns=function(e){let t=this.columns(),r=e.filter(i=>i<0||i>=t);r.length&&vr("Bad column indices: "+r.join(","));let n=new pe;return n.seqname=this.seqname.slice(0),n.seqdata=Vh(this.seqdata,e),n.gf=Jo(this.gf),n.gc=Vh(this.gc,e),n.gs=Hh(this.gs),n.gr=g$(this.gr,e),n};pe.prototype.extractColumnRange=function(e,t){return this.extractColumns(new Array(t+1-e).fill(0).map((r,n)=>e+n))};pe.prototype.defaultGapChars=".-";pe.prototype.seqpos2col=function(e,t){t=t||this.defaultGapChars,this.seqdata[e]||vr("Row not found");let r=this.seqdata[e];return r.split("").map((n,i)=>t.indexOf(r[i])<0?i:-1).filter(n=>n>=0)};pe.prototype.col2seqpos=function(e,t){t=t||this.defaultGapChars,this.seqdata[e]||vr("Row not found");let r=this.seqdata[e],n=-1;return r.split("").map((i,o)=>t.indexOf(r[o])<0?++n:n+.5)};function Jc(e,t){for(;e.length<t;)e=" "+e;return e}function DO(e,t){for(;e.length<t;)e=e+" ";return e}function y$(e){return Jc("",e)}pe.prototype.toString=function(e){e=e||{width:80,indentNames:!1};let t=this.allNames(),r=this.columns(),n=Math.max.apply(null,t.map(f=>f.length).concat([0])),i=Math.max.apply(null,this.allTags().map(f=>f.length).concat([0])),o=i?i+6:0,a=e.width?Math.max(1,e.width-n-o-1):r,u=e.indentNames?Jc:DO,d=e.indentNames?(f,s)=>Jc(f,i)+" "+Jc(s,n):(f,s)=>DO(f+" "+s,i+n+1),l=[0];for(let f=a;f<r;f+=a)l.push(f);return`# STOCKHOLM 1.0
`+Object.keys(this.gf).sort().map(f=>this.gf[f].map(s=>"#=GF "+u(f,i)+" "+s+`
`).join("")).join("")+Object.keys(this.gs).sort().map(f=>Object.keys(this.gs[f]).map(s=>this.gs[f][s].map(c=>"#=GS "+d(f,s)+" "+c+`
`).join("")).join("")).join("")+l.map(f=>Object.keys(this.gc).sort().map(s=>"#=GC "+u(s,i)+y$(n+2)+this.gc[s].substr(f,a)+`
`).join("")+t.map(s=>Object.keys(this.gr).filter(c=>this.gr[c][s]).sort().map(c=>"#=GR "+d(c,s)+" "+this.gr[c][s].substr(f,a)+`
`).join("")+(this.seqdata[s]?u(s,n+o)+" "+this.seqdata[s].substr(f,a)+`
`:"")).join("")).join(`
`)+`//
`};pe.prototype.toFasta=function(e){e=e||{width:80};let t=this.columns(),r=e.width||t,n=[0];for(let i=r;i<t;i+=r)n.push(i);return this.allNames().map(i=>this.seqdata[i]?">"+i+`
`+n.map(o=>this.seqdata[i].substr(o,r)+`
`).join(""):"").join("")};pe.prototype.toRowList=function(e){return this.allNames().filter(t=>this.seqdata[t]).map(t=>[t,this.seqdata[t]])};typeof Wh<"u"&&(Wh.exports={sniff:d$,validate:p$,parse:m$,parseAll:Uh,fromSeqIndex:v$,fromRowList:_$,Stockholm:pe})});var Gh=g((Uoe,zO)=>{zO.exports=BO()});var HO=g(($h,Yh)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof $h<"u"?t():(t(),e.FileSaver={})})($h,function(){"use strict";function e(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function t(u,d,l){var f=new XMLHttpRequest;f.open("GET",u),f.responseType="blob",f.onload=function(){a(f.response,d,l)},f.onerror=function(){console.error("could not download file")},f.send()}function r(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function n(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(u,d,l){var f=i.URL||i.webkitURL,s=document.createElement("a");d=d||u.name||"download",s.download=d,s.rel="noopener",typeof u=="string"?(s.href=u,s.origin===location.origin?n(s):r(s.href)?t(u,d,l):n(s,s.target="_blank")):(s.href=f.createObjectURL(u),setTimeout(function(){f.revokeObjectURL(s.href)},4e4),setTimeout(function(){n(s)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,l){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(e(u,l),d);else if(r(u))t(u,d,l);else{var f=document.createElement("a");f.href=u,f.target="_blank",setTimeout(function(){n(f)})}}:function(u,d,l,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof u=="string")return t(u,d,l);var s=u.type==="application/octet-stream",c=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||s&&c||o)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var _=m.result;_=p?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=_:location=_,f=null},m.readAsDataURL(u)}else{var v=i.URL||i.webkitURL,h=v.createObjectURL(u);f?f.location=h:location.href=h,f=null,setTimeout(function(){v.revokeObjectURL(h)},4e4)}});i.saveAs=a.saveAs=a,typeof Yh<"u"&&(Yh.exports=a)})});function zi(e){let t=e.length;for(;--t>=0;)e[t]=0}function Zh(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function Kh(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Zt(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function SY(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=cf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(pY*2),this.dyn_dtree=new Uint16Array((2*fY+1)*2),this.bl_tree=new Uint16Array((2*dY+1)*2),Qr(this.dyn_ltree),Qr(this.dyn_dtree),Qr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(hY+1),this.heap=new Uint16Array(2*dm+1),Qr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*dm+1),Qr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function WY(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function ma(e){this.options=ff.assign({level:ZY,method:JY,chunkSize:16384,windowBits:15,memLevel:8,strategy:KY},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YM,this.strm.avail_out=0;let r=na.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==sf)throw new Error(Cn[r]);if(t.header&&na.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=fa.string2buf(t.dictionary):XM.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=na.deflateSetDictionary(this.strm,n),r!==sf)throw new Error(Cn[r]);this._dict_set=!0}}function xm(e,t){let r=new ma(t);if(r.push(e,!0),r.err)throw r.msg||Cn[r.err];return r.result}function QY(e,t){return t=t||{},t.raw=!0,xm(e,t)}function eX(e,t){return t=t||{},t.gzip=!0,xm(e,t)}function xX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function BX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}function va(e){this.options=ff.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YM,this.strm.avail_out=0;let r=gr.inflateInit2(this.strm,t.windowBits);if(r!==da)throw new Error(Cn[r]);if(this.header=new zX,gr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=fa.string2buf(t.dictionary):uA.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=gr.inflateSetDictionary(this.strm,t.dictionary),r!==da)))throw new Error(Cn[r])}function Em(e,t){let r=new va(t);if(r.push(e),r.err)throw r.msg||Cn[r.err];return r.result}function GX(e,t){return t=t||{},t.raw=!0,Em(e,t)}var w$,AM,S$,x$,E$,bm,pa,oa,Di,gm,PM,qn,Xh,O$,ym,qM,TM,kM,lm,af,M$,CM,A$,br,ra,aa,ua,wm,uf,jM,IM,RM,FM,sa,et,Kt,LM,P$,q$,DM,T$,NM,BM,VO,Jh,WO,cm,UO,GO,k$,C$,j$,$O,I$,zM,R$,F$,L$,D$,N$,B$,z$,H$,V$,W$,la,U$,G$,$$,Oe,Cn,Hi,Y$,fm,X$,tn,Z$,rn,K$,J$,gt,YO,Ce,XO,Jt,Q$,Qh,eY,tY,ef,rY,nY,iY,oY,cf,aY,uY,sY,lY,cY,dm,fY,dY,pY,hY,U,en,Qt,mY,Ni,Sm,pm,hm,mm,vm,Tn,ea,Ue,Vi,jn,Wi,vY,kn,ZO,Qr,_Y,bY,nn,st,lt,X,Qo,_m,HM,Bi,VM,em,Fi,gY,yY,ta,wY,ha,WM,UM,xY,GM,EY,OY,MY,AY,PY,qY,TY,kY,CY,jY,IY,RY,FY,na,LY,DY,NY,ff,$M,ca,BY,zY,HY,VY,fa,YM,XM,UY,GY,$Y,YY,sf,XY,ZY,KY,JY,tX,rX,nX,iX,oX,aX,tf,uX,sX,Li,KO,JO,QO,tm,eM,lX,cX,fX,dX,pX,ia,hX,ZM,KM,tM,mX,rf,In,vX,_X,yt,JM,QM,bX,rM,df,nM,iM,oM,aM,uM,sM,lM,cM,fM,lf,_r,rm,dM,nm,pM,hM,mM,vM,nf,of,_M,bM,gM,yM,wM,im,SM,xM,ue,eA,tA,gX,yX,wX,SX,EM,Rn,rA,nA,iA,oA,EX,OM,om,am,OX,aA,MX,AX,PX,qX,TX,kX,CX,jX,IX,RX,FX,LX,DX,NX,gr,zX,uA,HX,VX,da,um,sm,WX,MM,UX,$X,YX,XX,ZX,KX,JX,Goe,$oe,Yoe,Xoe,Zoe,Koe,Joe,QX,pf,Om=C(()=>{w$=0,AM=1,S$=2,x$=3,E$=258,bm=29,pa=256,oa=pa+1+bm,Di=30,gm=19,PM=2*oa+1,qn=15,Xh=16,O$=7,ym=256,qM=16,TM=17,kM=18,lm=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),af=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M$=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),CM=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A$=512,br=new Array((oa+2)*2);zi(br);ra=new Array(Di*2);zi(ra);aa=new Array(A$);zi(aa);ua=new Array(E$-x$+1);zi(ua);wm=new Array(bm);zi(wm);uf=new Array(Di);zi(uf);FM=e=>e<256?aa[e]:aa[256+(e>>>7)],sa=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},et=(e,t,r)=>{e.bi_valid>Xh-r?(e.bi_buf|=t<<e.bi_valid&65535,sa(e,e.bi_buf),e.bi_buf=t>>Xh-e.bi_valid,e.bi_valid+=r-Xh):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Kt=(e,t,r)=>{et(e,r[t*2],r[t*2+1])},LM=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},P$=e=>{e.bi_valid===16?(sa(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},q$=(e,t)=>{let r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,d=t.stat_desc.max_length,l,f,s,c,p,m,v=0;for(c=0;c<=qn;c++)e.bl_count[c]=0;for(r[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<PM;l++)f=e.heap[l],c=r[r[f*2+1]*2+1]+1,c>d&&(c=d,v++),r[f*2+1]=c,!(f>n)&&(e.bl_count[c]++,p=0,f>=u&&(p=a[f-u]),m=r[f*2],e.opt_len+=m*(c+p),o&&(e.static_len+=m*(i[f*2+1]+p)));if(v!==0){do{for(c=d-1;e.bl_count[c]===0;)c--;e.bl_count[c]--,e.bl_count[c+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(c=d;c!==0;c--)for(f=e.bl_count[c];f!==0;)s=e.heap[--l],!(s>n)&&(r[s*2+1]!==c&&(e.opt_len+=(c-r[s*2+1])*r[s*2],r[s*2+1]=c),f--)}},DM=(e,t,r)=>{let n=new Array(qn+1),i=0,o,a;for(o=1;o<=qn;o++)i=i+r[o-1]<<1,n[o]=i;for(a=0;a<=t;a++){let u=e[a*2+1];u!==0&&(e[a*2]=LM(n[u]++,u))}},T$=()=>{let e,t,r,n,i,o=new Array(qn+1);for(r=0,n=0;n<bm-1;n++)for(wm[n]=r,e=0;e<1<<lm[n];e++)ua[r++]=n;for(ua[r-1]=n,i=0,n=0;n<16;n++)for(uf[n]=i,e=0;e<1<<af[n];e++)aa[i++]=n;for(i>>=7;n<Di;n++)for(uf[n]=i<<7,e=0;e<1<<af[n]-7;e++)aa[256+i++]=n;for(t=0;t<=qn;t++)o[t]=0;for(e=0;e<=143;)br[e*2+1]=8,e++,o[8]++;for(;e<=255;)br[e*2+1]=9,e++,o[9]++;for(;e<=279;)br[e*2+1]=7,e++,o[7]++;for(;e<=287;)br[e*2+1]=8,e++,o[8]++;for(DM(br,oa+1,o),e=0;e<Di;e++)ra[e*2+1]=5,ra[e*2]=LM(e,5);jM=new Zh(br,lm,pa+1,oa,qn),IM=new Zh(ra,af,0,Di,qn),RM=new Zh(new Array(0),M$,0,gm,O$)},NM=e=>{let t;for(t=0;t<oa;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Di;t++)e.dyn_dtree[t*2]=0;for(t=0;t<gm;t++)e.bl_tree[t*2]=0;e.dyn_ltree[ym*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},BM=e=>{e.bi_valid>8?sa(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},VO=(e,t,r,n)=>{let i=t*2,o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},Jh=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&VO(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!VO(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},WO=(e,t,r)=>{let n,i,o=0,a,u;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+o++]&255,n+=(e.pending_buf[e.sym_buf+o++]&255)<<8,i=e.pending_buf[e.sym_buf+o++],n===0?Kt(e,i,t):(a=ua[i],Kt(e,a+pa+1,t),u=lm[a],u!==0&&(i-=wm[a],et(e,i,u)),n--,a=FM(n),Kt(e,a,r),u=af[a],u!==0&&(n-=uf[a],et(e,n,u)));while(o<e.sym_next);Kt(e,ym,t)},cm=(e,t)=>{let r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems,a,u,d=-1,l;for(e.heap_len=0,e.heap_max=PM,a=0;a<o;a++)r[a*2]!==0?(e.heap[++e.heap_len]=d=a,e.depth[a]=0):r[a*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,r[l*2]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=n[l*2+1]);for(t.max_code=d,a=e.heap_len>>1;a>=1;a--)Jh(e,r,a);l=o;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Jh(e,r,1),u=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=u,r[l*2]=r[a*2]+r[u*2],e.depth[l]=(e.depth[a]>=e.depth[u]?e.depth[a]:e.depth[u])+1,r[a*2+1]=r[u*2+1]=l,e.heap[1]=l++,Jh(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],q$(e,t),DM(r,d,e.bl_count)},UO=(e,t,r)=>{let n,i=-1,o,a=t[0*2+1],u=0,d=7,l=4;for(a===0&&(d=138,l=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)o=a,a=t[(n+1)*2+1],!(++u<d&&o===a)&&(u<l?e.bl_tree[o*2]+=u:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[qM*2]++):u<=10?e.bl_tree[TM*2]++:e.bl_tree[kM*2]++,u=0,i=o,a===0?(d=138,l=3):o===a?(d=6,l=3):(d=7,l=4))},GO=(e,t,r)=>{let n,i=-1,o,a=t[0*2+1],u=0,d=7,l=4;for(a===0&&(d=138,l=3),n=0;n<=r;n++)if(o=a,a=t[(n+1)*2+1],!(++u<d&&o===a)){if(u<l)do Kt(e,o,e.bl_tree);while(--u!==0);else o!==0?(o!==i&&(Kt(e,o,e.bl_tree),u--),Kt(e,qM,e.bl_tree),et(e,u-3,2)):u<=10?(Kt(e,TM,e.bl_tree),et(e,u-3,3)):(Kt(e,kM,e.bl_tree),et(e,u-11,7));u=0,i=o,a===0?(d=138,l=3):o===a?(d=6,l=3):(d=7,l=4)}},k$=e=>{let t;for(UO(e,e.dyn_ltree,e.l_desc.max_code),UO(e,e.dyn_dtree,e.d_desc.max_code),cm(e,e.bl_desc),t=gm-1;t>=3&&e.bl_tree[CM[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},C$=(e,t,r,n)=>{let i;for(et(e,t-257,5),et(e,r-1,5),et(e,n-4,4),i=0;i<n;i++)et(e,e.bl_tree[CM[i]*2+1],3);GO(e,e.dyn_ltree,t-1),GO(e,e.dyn_dtree,r-1)},j$=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(r=32;r<pa;r++)if(e.dyn_ltree[r*2]!==0)return 1;return 0},$O=!1,I$=e=>{$O||(T$(),$O=!0),e.l_desc=new Kh(e.dyn_ltree,jM),e.d_desc=new Kh(e.dyn_dtree,IM),e.bl_desc=new Kh(e.bl_tree,RM),e.bi_buf=0,e.bi_valid=0,NM(e)},zM=(e,t,r,n)=>{et(e,(w$<<1)+(n?1:0),3),BM(e),sa(e,r),sa(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},R$=e=>{et(e,AM<<1,3),Kt(e,ym,br),P$(e)},F$=(e,t,r,n)=>{let i,o,a=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=j$(e)),cm(e,e.l_desc),cm(e,e.d_desc),a=k$(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?zM(e,t,r,n):e.strategy===4||o===i?(et(e,(AM<<1)+(n?1:0),3),WO(e,br,ra)):(et(e,(S$<<1)+(n?1:0),3),C$(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),WO(e,e.dyn_ltree,e.dyn_dtree)),NM(e),n&&BM(e)},L$=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(ua[r]+pa+1)*2]++,e.dyn_dtree[FM(t)*2]++),e.sym_next===e.sym_end),D$=I$,N$=zM,B$=F$,z$=L$,H$=R$,V$={_tr_init:D$,_tr_stored_block:N$,_tr_flush_block:B$,_tr_tally:z$,_tr_align:H$},W$=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;for(;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0},la=W$,U$=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},G$=new Uint32Array(U$()),$$=(e,t,r,n)=>{let i=G$,o=n+r;e^=-1;for(let a=n;a<o;a++)e=e>>>8^i[(e^t[a])&255];return e^-1},Oe=$$,Cn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Hi={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Y$,_tr_stored_block:fm,_tr_flush_block:X$,_tr_tally:tn,_tr_align:Z$}=V$,{Z_NO_FLUSH:rn,Z_PARTIAL_FLUSH:K$,Z_FULL_FLUSH:J$,Z_FINISH:gt,Z_BLOCK:YO,Z_OK:Ce,Z_STREAM_END:XO,Z_STREAM_ERROR:Jt,Z_DATA_ERROR:Q$,Z_BUF_ERROR:Qh,Z_DEFAULT_COMPRESSION:eY,Z_FILTERED:tY,Z_HUFFMAN_ONLY:ef,Z_RLE:rY,Z_FIXED:nY,Z_DEFAULT_STRATEGY:iY,Z_UNKNOWN:oY,Z_DEFLATED:cf}=Hi,aY=9,uY=15,sY=8,lY=29,cY=256,dm=cY+1+lY,fY=30,dY=19,pY=2*dm+1,hY=15,U=3,en=258,Qt=en+U+1,mY=32,Ni=42,Sm=57,pm=69,hm=73,mm=91,vm=103,Tn=113,ea=666,Ue=1,Vi=2,jn=3,Wi=4,vY=3,kn=(e,t)=>(e.msg=Cn[t],t),ZO=e=>e*2-(e>4?9:0),Qr=e=>{let t=e.length;for(;--t>=0;)e[t]=0},_Y=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},bY=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,nn=bY,st=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},lt=(e,t)=>{X$(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,st(e.strm)},X=(e,t)=>{e.pending_buf[e.pending++]=t},Qo=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},_m=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=la(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Oe(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},HM=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i,o,a=e.prev_length,u=e.nice_match,d=e.strstart>e.w_size-Qt?e.strstart-(e.w_size-Qt):0,l=e.window,f=e.w_mask,s=e.prev,c=e.strstart+en,p=l[n+a-1],m=l[n+a];e.prev_length>=e.good_match&&(r>>=2),u>e.lookahead&&(u=e.lookahead);do if(i=t,!(l[i+a]!==m||l[i+a-1]!==p||l[i]!==l[n]||l[++i]!==l[n+1])){n+=2,i++;do;while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<c);if(o=en-(c-n),n=c-en,o>a){if(e.match_start=t,a=o,o>=u)break;p=l[n+a-1],m=l[n+a]}}while((t=s[t&f])>d&&--r!==0);return a<=e.lookahead?a:e.lookahead},Bi=e=>{let t=e.w_size,r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Qt)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),_Y(e),n+=t),e.strm.avail_in===0)break;if(r=_m(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=U)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=nn(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=nn(e,e.ins_h,e.window[i+U-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<U)););}while(e.lookahead<Qt&&e.strm.avail_in!==0)},VM=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,o,a=0,u=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>o&&(n=o),n<r&&(n===0&&t!==gt||t===rn||n!==i+e.strm.avail_in)))break;a=t===gt&&n===i+e.strm.avail_in?1:0,fm(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,st(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(_m(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(a===0);return u-=e.strm.avail_in,u&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?Wi:t!==rn&&t!==gt&&e.strm.avail_in===0&&e.strstart===e.block_start?Vi:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(_m(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,r=o>e.w_size?e.w_size:o,i=e.strstart-e.block_start,(i>=r||(i||t===gt)&&t!==rn&&e.strm.avail_in===0&&i<=o)&&(n=i>o?o:i,a=t===gt&&e.strm.avail_in===0&&n===i?1:0,fm(e,e.block_start,n,a),e.block_start+=n,st(e.strm)),a?jn:Ue)},em=(e,t)=>{let r,n;for(;;){if(e.lookahead<Qt){if(Bi(e),e.lookahead<Qt&&t===rn)return Ue;if(e.lookahead===0)break}if(r=0,e.lookahead>=U&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+U-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Qt&&(e.match_length=HM(e,r)),e.match_length>=U)if(n=tn(e,e.strstart-e.match_start,e.match_length-U),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=U){e.match_length--;do e.strstart++,e.ins_h=nn(e,e.ins_h,e.window[e.strstart+U-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=nn(e,e.ins_h,e.window[e.strstart+1]);else n=tn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(lt(e,!1),e.strm.avail_out===0))return Ue}return e.insert=e.strstart<U-1?e.strstart:U-1,t===gt?(lt(e,!0),e.strm.avail_out===0?jn:Wi):e.sym_next&&(lt(e,!1),e.strm.avail_out===0)?Ue:Vi},Fi=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Qt){if(Bi(e),e.lookahead<Qt&&t===rn)return Ue;if(e.lookahead===0)break}if(r=0,e.lookahead>=U&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+U-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=U-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Qt&&(e.match_length=HM(e,r),e.match_length<=5&&(e.strategy===tY||e.match_length===U&&e.strstart-e.match_start>4096)&&(e.match_length=U-1)),e.prev_length>=U&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-U,n=tn(e,e.strstart-1-e.prev_match,e.prev_length-U),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+U-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=U-1,e.strstart++,n&&(lt(e,!1),e.strm.avail_out===0))return Ue}else if(e.match_available){if(n=tn(e,0,e.window[e.strstart-1]),n&&lt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ue}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=tn(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<U-1?e.strstart:U-1,t===gt?(lt(e,!0),e.strm.avail_out===0?jn:Wi):e.sym_next&&(lt(e,!1),e.strm.avail_out===0)?Ue:Vi},gY=(e,t)=>{let r,n,i,o,a=e.window;for(;;){if(e.lookahead<=en){if(Bi(e),e.lookahead<=en&&t===rn)return Ue;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=U&&e.strstart>0&&(i=e.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+en;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=en-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=U?(r=tn(e,1,e.match_length-U),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=tn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(lt(e,!1),e.strm.avail_out===0))return Ue}return e.insert=0,t===gt?(lt(e,!0),e.strm.avail_out===0?jn:Wi):e.sym_next&&(lt(e,!1),e.strm.avail_out===0)?Ue:Vi},yY=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(Bi(e),e.lookahead===0)){if(t===rn)return Ue;break}if(e.match_length=0,r=tn(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(lt(e,!1),e.strm.avail_out===0))return Ue}return e.insert=0,t===gt?(lt(e,!0),e.strm.avail_out===0?jn:Wi):e.sym_next&&(lt(e,!1),e.strm.avail_out===0)?Ue:Vi};ta=[new Zt(0,0,0,0,VM),new Zt(4,4,8,4,em),new Zt(4,5,16,8,em),new Zt(4,6,32,32,em),new Zt(4,4,16,16,Fi),new Zt(8,16,32,32,Fi),new Zt(8,16,128,128,Fi),new Zt(8,32,128,256,Fi),new Zt(32,128,258,1024,Fi),new Zt(32,258,258,4096,Fi)],wY=e=>{e.window_size=2*e.w_size,Qr(e.head),e.max_lazy_match=ta[e.level].max_lazy,e.good_match=ta[e.level].good_length,e.nice_match=ta[e.level].nice_length,e.max_chain_length=ta[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=U-1,e.match_available=0,e.ins_h=0};ha=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==Ni&&t.status!==Sm&&t.status!==pm&&t.status!==hm&&t.status!==mm&&t.status!==vm&&t.status!==Tn&&t.status!==ea?1:0},WM=e=>{if(ha(e))return kn(e,Jt);e.total_in=e.total_out=0,e.data_type=oY;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Sm:t.wrap?Ni:Tn,e.adler=t.wrap===2?0:1,t.last_flush=-2,Y$(t),Ce},UM=e=>{let t=WM(e);return t===Ce&&wY(e.state),t},xY=(e,t)=>ha(e)||e.state.wrap!==2?Jt:(e.state.gzhead=t,Ce),GM=(e,t,r,n,i,o)=>{if(!e)return Jt;let a=1;if(t===eY&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>aY||r!==cf||n<8||n>15||t<0||t>9||o<0||o>nY||n===8&&a!==1)return kn(e,Jt);n===8&&(n=9);let u=new SY;return e.state=u,u.strm=e,u.status=Ni,u.wrap=a,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+U-1)/U),u.window=new Uint8Array(u.w_size*2),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=(u.lit_bufsize-1)*3,u.level=t,u.strategy=o,u.method=r,UM(e)},EY=(e,t)=>GM(e,t,cf,uY,sY,iY),OY=(e,t)=>{if(ha(e)||t>YO||t<0)return e?kn(e,Jt):Jt;let r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===ea&&t!==gt)return kn(e,e.avail_out===0?Qh:Jt);let n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(st(e),e.avail_out===0)return r.last_flush=-1,Ce}else if(e.avail_in===0&&ZO(t)<=ZO(n)&&t!==gt)return kn(e,Qh);if(r.status===ea&&e.avail_in!==0)return kn(e,Qh);if(r.status===Ni&&r.wrap===0&&(r.status=Tn),r.status===Ni){let i=cf+(r.w_bits-8<<4)<<8,o=-1;if(r.strategy>=ef||r.level<2?o=0:r.level<6?o=1:r.level===6?o=2:o=3,i|=o<<6,r.strstart!==0&&(i|=mY),i+=31-i%31,Qo(r,i),r.strstart!==0&&(Qo(r,e.adler>>>16),Qo(r,e.adler&65535)),e.adler=1,r.status=Tn,st(e),r.pending!==0)return r.last_flush=-1,Ce}if(r.status===Sm){if(e.adler=0,X(r,31),X(r,139),X(r,8),r.gzhead)X(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),X(r,r.gzhead.time&255),X(r,r.gzhead.time>>8&255),X(r,r.gzhead.time>>16&255),X(r,r.gzhead.time>>24&255),X(r,r.level===9?2:r.strategy>=ef||r.level<2?4:0),X(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(X(r,r.gzhead.extra.length&255),X(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Oe(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=pm;else if(X(r,0),X(r,0),X(r,0),X(r,0),X(r,0),X(r,r.level===9?2:r.strategy>=ef||r.level<2?4:0),X(r,vY),r.status=Tn,st(e),r.pending!==0)return r.last_flush=-1,Ce}if(r.status===pm){if(r.gzhead.extra){let i=r.pending,o=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+o>r.pending_buf_size;){let u=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+u),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=Oe(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=u,st(e),r.pending!==0)return r.last_flush=-1,Ce;i=0,o-=u}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending+=o,r.gzhead.hcrc&&r.pending>i&&(e.adler=Oe(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=hm}if(r.status===hm){if(r.gzhead.name){let i=r.pending,o;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=Oe(e.adler,r.pending_buf,r.pending-i,i)),st(e),r.pending!==0)return r.last_flush=-1,Ce;i=0}r.gzindex<r.gzhead.name.length?o=r.gzhead.name.charCodeAt(r.gzindex++)&255:o=0,X(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=Oe(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=mm}if(r.status===mm){if(r.gzhead.comment){let i=r.pending,o;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=Oe(e.adler,r.pending_buf,r.pending-i,i)),st(e),r.pending!==0)return r.last_flush=-1,Ce;i=0}r.gzindex<r.gzhead.comment.length?o=r.gzhead.comment.charCodeAt(r.gzindex++)&255:o=0,X(r,o)}while(o!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=Oe(e.adler,r.pending_buf,r.pending-i,i))}r.status=vm}if(r.status===vm){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(st(e),r.pending!==0))return r.last_flush=-1,Ce;X(r,e.adler&255),X(r,e.adler>>8&255),e.adler=0}if(r.status=Tn,st(e),r.pending!==0)return r.last_flush=-1,Ce}if(e.avail_in!==0||r.lookahead!==0||t!==rn&&r.status!==ea){let i=r.level===0?VM(r,t):r.strategy===ef?yY(r,t):r.strategy===rY?gY(r,t):ta[r.level].func(r,t);if((i===jn||i===Wi)&&(r.status=ea),i===Ue||i===jn)return e.avail_out===0&&(r.last_flush=-1),Ce;if(i===Vi&&(t===K$?Z$(r):t!==YO&&(fm(r,0,0,!1),t===J$&&(Qr(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),st(e),e.avail_out===0))return r.last_flush=-1,Ce}return t!==gt?Ce:r.wrap<=0?XO:(r.wrap===2?(X(r,e.adler&255),X(r,e.adler>>8&255),X(r,e.adler>>16&255),X(r,e.adler>>24&255),X(r,e.total_in&255),X(r,e.total_in>>8&255),X(r,e.total_in>>16&255),X(r,e.total_in>>24&255)):(Qo(r,e.adler>>>16),Qo(r,e.adler&65535)),st(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?Ce:XO)},MY=e=>{if(ha(e))return Jt;let t=e.state.status;return e.state=null,t===Tn?kn(e,Q$):Ce},AY=(e,t)=>{let r=t.length;if(ha(e))return Jt;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==Ni||n.lookahead)return Jt;if(i===1&&(e.adler=la(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Qr(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(t.subarray(r-n.w_size,r),0),t=d,r=n.w_size}let o=e.avail_in,a=e.next_in,u=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Bi(n);n.lookahead>=U;){let d=n.strstart,l=n.lookahead-(U-1);do n.ins_h=nn(n,n.ins_h,n.window[d+U-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=U-1,Bi(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=U-1,n.match_available=0,e.next_in=a,e.input=u,e.avail_in=o,n.wrap=i,Ce},PY=EY,qY=GM,TY=UM,kY=WM,CY=xY,jY=OY,IY=MY,RY=AY,FY="pako deflate (from Nodeca project)",na={deflateInit:PY,deflateInit2:qY,deflateReset:TY,deflateResetKeep:kY,deflateSetHeader:CY,deflate:jY,deflateEnd:IY,deflateSetDictionary:RY,deflateInfo:FY},LY=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),DY=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)LY(r,n)&&(e[n]=r[n])}}return e},NY=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let a=e[n];r.set(a,i),i+=a.length}return r},ff={assign:DY,flattenChunks:NY},$M=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{$M=!1}ca=new Uint8Array(256);for(let e=0;e<256;e++)ca[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ca[254]=ca[254]=1;BY=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,o,a=e.length,u=0;for(i=0;i<a;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(u),o=0,i=0;o<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t},zY=(e,t)=>{if(t<65534&&e.subarray&&$M)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r},HY=(e,t)=>{let r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i,o=new Array(r*2);for(i=0,n=0;n<r;){let a=e[n++];if(a<128){o[i++]=a;continue}let u=ca[a];if(u>4){o[i++]=65533,n+=u-1;continue}for(a&=u===2?31:u===3?15:7;u>1&&n<r;)a=a<<6|e[n++]&63,u--;if(u>1){o[i++]=65533;continue}a<65536?o[i++]=a:(a-=65536,o[i++]=55296|a>>10&1023,o[i++]=56320|a&1023)}return zY(o,i)},VY=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+ca[e[r]]>t?r:t},fa={string2buf:BY,buf2string:HY,utf8border:VY};YM=WY,XM=Object.prototype.toString,{Z_NO_FLUSH:UY,Z_SYNC_FLUSH:GY,Z_FULL_FLUSH:$Y,Z_FINISH:YY,Z_OK:sf,Z_STREAM_END:XY,Z_DEFAULT_COMPRESSION:ZY,Z_DEFAULT_STRATEGY:KY,Z_DEFLATED:JY}=Hi;ma.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?YY:UY,typeof e=="string"?r.input=fa.string2buf(e):XM.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===GY||o===$Y)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=na.deflate(r,o),i===XY)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=na.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===sf;if(r.avail_out===0){this.onData(r.output);continue}if(o>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};ma.prototype.onData=function(e){this.chunks.push(e)};ma.prototype.onEnd=function(e){e===sf&&(this.result=ff.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};tX=ma,rX=xm,nX=QY,iX=eX,oX=Hi,aX={Deflate:tX,deflate:rX,deflateRaw:nX,gzip:iX,constants:oX},tf=16209,uX=16191,sX=function(t,r){let n,i,o,a,u,d,l,f,s,c,p,m,v,h,_,y,S,E,M,O,w,A,q,P,T=t.state;n=t.next_in,q=t.input,i=n+(t.avail_in-5),o=t.next_out,P=t.output,a=o-(r-t.avail_out),u=o+(t.avail_out-257),d=T.dmax,l=T.wsize,f=T.whave,s=T.wnext,c=T.window,p=T.hold,m=T.bits,v=T.lencode,h=T.distcode,_=(1<<T.lenbits)-1,y=(1<<T.distbits)-1;e:do{m<15&&(p+=q[n++]<<m,m+=8,p+=q[n++]<<m,m+=8),S=v[p&_];t:for(;;){if(E=S>>>24,p>>>=E,m-=E,E=S>>>16&255,E===0)P[o++]=S&65535;else if(E&16){M=S&65535,E&=15,E&&(m<E&&(p+=q[n++]<<m,m+=8),M+=p&(1<<E)-1,p>>>=E,m-=E),m<15&&(p+=q[n++]<<m,m+=8,p+=q[n++]<<m,m+=8),S=h[p&y];r:for(;;){if(E=S>>>24,p>>>=E,m-=E,E=S>>>16&255,E&16){if(O=S&65535,E&=15,m<E&&(p+=q[n++]<<m,m+=8,m<E&&(p+=q[n++]<<m,m+=8)),O+=p&(1<<E)-1,O>d){t.msg="invalid distance too far back",T.mode=tf;break e}if(p>>>=E,m-=E,E=o-a,O>E){if(E=O-E,E>f&&T.sane){t.msg="invalid distance too far back",T.mode=tf;break e}if(w=0,A=c,s===0){if(w+=l-E,E<M){M-=E;do P[o++]=c[w++];while(--E);w=o-O,A=P}}else if(s<E){if(w+=l+s-E,E-=s,E<M){M-=E;do P[o++]=c[w++];while(--E);if(w=0,s<M){E=s,M-=E;do P[o++]=c[w++];while(--E);w=o-O,A=P}}}else if(w+=s-E,E<M){M-=E;do P[o++]=c[w++];while(--E);w=o-O,A=P}for(;M>2;)P[o++]=A[w++],P[o++]=A[w++],P[o++]=A[w++],M-=3;M&&(P[o++]=A[w++],M>1&&(P[o++]=A[w++]))}else{w=o-O;do P[o++]=P[w++],P[o++]=P[w++],P[o++]=P[w++],M-=3;while(M>2);M&&(P[o++]=P[w++],M>1&&(P[o++]=P[w++]))}}else if(E&64){t.msg="invalid distance code",T.mode=tf;break e}else{S=h[(S&65535)+(p&(1<<E)-1)];continue r}break}}else if(E&64)if(E&32){T.mode=uX;break e}else{t.msg="invalid literal/length code",T.mode=tf;break e}else{S=v[(S&65535)+(p&(1<<E)-1)];continue t}break}}while(n<i&&o<u);M=m>>3,n-=M,m-=M<<3,p&=(1<<m)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<u?257+(u-o):257-(o-u),T.hold=p,T.bits=m},Li=15,KO=852,JO=592,QO=0,tm=1,eM=2,lX=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),cX=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dX=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pX=(e,t,r,n,i,o,a,u)=>{let d=u.bits,l=0,f=0,s=0,c=0,p=0,m=0,v=0,h=0,_=0,y=0,S,E,M,O,w,A=null,q,P=new Uint16Array(Li+1),T=new Uint16Array(Li+1),I=null,z,Y,re;for(l=0;l<=Li;l++)P[l]=0;for(f=0;f<n;f++)P[t[r+f]]++;for(p=d,c=Li;c>=1&&P[c]===0;c--);if(p>c&&(p=c),c===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,u.bits=1,0;for(s=1;s<c&&P[s]===0;s++);for(p<s&&(p=s),h=1,l=1;l<=Li;l++)if(h<<=1,h-=P[l],h<0)return-1;if(h>0&&(e===QO||c!==1))return-1;for(T[1]=0,l=1;l<Li;l++)T[l+1]=T[l]+P[l];for(f=0;f<n;f++)t[r+f]!==0&&(a[T[t[r+f]]++]=f);if(e===QO?(A=I=a,q=20):e===tm?(A=lX,I=cX,q=257):(A=fX,I=dX,q=0),y=0,f=0,l=s,w=o,m=p,v=0,M=-1,_=1<<p,O=_-1,e===tm&&_>KO||e===eM&&_>JO)return 1;for(;;){z=l-v,a[f]+1<q?(Y=0,re=a[f]):a[f]>=q?(Y=I[a[f]-q],re=A[a[f]-q]):(Y=96,re=0),S=1<<l-v,E=1<<m,s=E;do E-=S,i[w+(y>>v)+E]=z<<24|Y<<16|re|0;while(E!==0);for(S=1<<l-1;y&S;)S>>=1;if(S!==0?(y&=S-1,y+=S):y=0,f++,--P[l]===0){if(l===c)break;l=t[r+a[f]]}if(l>p&&(y&O)!==M){for(v===0&&(v=p),w+=s,m=l-v,h=1<<m;m+v<c&&(h-=P[m+v],!(h<=0));)m++,h<<=1;if(_+=1<<m,e===tm&&_>KO||e===eM&&_>JO)return 1;M=y&O,i[M]=p<<24|m<<16|w-o|0}}return y!==0&&(i[w+y]=l-v<<24|64<<16|0),u.bits=p,0},ia=pX,hX=0,ZM=1,KM=2,{Z_FINISH:tM,Z_BLOCK:mX,Z_TREES:rf,Z_OK:In,Z_STREAM_END:vX,Z_NEED_DICT:_X,Z_STREAM_ERROR:yt,Z_DATA_ERROR:JM,Z_MEM_ERROR:QM,Z_BUF_ERROR:bX,Z_DEFLATED:rM}=Hi,df=16180,nM=16181,iM=16182,oM=16183,aM=16184,uM=16185,sM=16186,lM=16187,cM=16188,fM=16189,lf=16190,_r=16191,rm=16192,dM=16193,nm=16194,pM=16195,hM=16196,mM=16197,vM=16198,nf=16199,of=16200,_M=16201,bM=16202,gM=16203,yM=16204,wM=16205,im=16206,SM=16207,xM=16208,ue=16209,eA=16210,tA=16211,gX=852,yX=592,wX=15,SX=wX,EM=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);Rn=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<df||t.mode>tA?1:0},rA=e=>{if(Rn(e))return yt;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=df,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(gX),t.distcode=t.distdyn=new Int32Array(yX),t.sane=1,t.back=-1,In},nA=e=>{if(Rn(e))return yt;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,rA(e)},iA=(e,t)=>{let r;if(Rn(e))return yt;let n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?yt:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,nA(e))},oA=(e,t)=>{if(!e)return yt;let r=new xX;e.state=r,r.strm=e,r.window=null,r.mode=df;let n=iA(e,t);return n!==In&&(e.state=null),n},EX=e=>oA(e,SX),OM=!0,OX=e=>{if(OM){om=new Int32Array(512),am=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ia(ZM,e.lens,0,288,om,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ia(KM,e.lens,0,32,am,0,e.work,{bits:5}),OM=!1}e.lencode=om,e.lenbits=9,e.distcode=am,e.distbits=5},aA=(e,t,r,n)=>{let i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},MX=(e,t)=>{let r,n,i,o,a,u,d,l,f,s,c,p,m,v,h=0,_,y,S,E,M,O,w,A,q=new Uint8Array(4),P,T,I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Rn(e)||!e.output||!e.input&&e.avail_in!==0)return yt;r=e.state,r.mode===_r&&(r.mode=rm),a=e.next_out,i=e.output,d=e.avail_out,o=e.next_in,n=e.input,u=e.avail_in,l=r.hold,f=r.bits,s=u,c=d,A=In;e:for(;;)switch(r.mode){case df:if(r.wrap===0){r.mode=rm;break}for(;f<16;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(r.wrap&2&&l===35615){r.wbits===0&&(r.wbits=15),r.check=0,q[0]=l&255,q[1]=l>>>8&255,r.check=Oe(r.check,q,2,0),l=0,f=0,r.mode=nM;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=ue;break}if((l&15)!==rM){e.msg="unknown compression method",r.mode=ue;break}if(l>>>=4,f-=4,w=(l&15)+8,r.wbits===0&&(r.wbits=w),w>15||w>r.wbits){e.msg="invalid window size",r.mode=ue;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=l&512?fM:_r,l=0,f=0;break;case nM:for(;f<16;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(r.flags=l,(r.flags&255)!==rM){e.msg="unknown compression method",r.mode=ue;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=ue;break}r.head&&(r.head.text=l>>8&1),r.flags&512&&r.wrap&4&&(q[0]=l&255,q[1]=l>>>8&255,r.check=Oe(r.check,q,2,0)),l=0,f=0,r.mode=iM;case iM:for(;f<32;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}r.head&&(r.head.time=l),r.flags&512&&r.wrap&4&&(q[0]=l&255,q[1]=l>>>8&255,q[2]=l>>>16&255,q[3]=l>>>24&255,r.check=Oe(r.check,q,4,0)),l=0,f=0,r.mode=oM;case oM:for(;f<16;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}r.head&&(r.head.xflags=l&255,r.head.os=l>>8),r.flags&512&&r.wrap&4&&(q[0]=l&255,q[1]=l>>>8&255,r.check=Oe(r.check,q,2,0)),l=0,f=0,r.mode=aM;case aM:if(r.flags&1024){for(;f<16;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}r.length=l,r.head&&(r.head.extra_len=l),r.flags&512&&r.wrap&4&&(q[0]=l&255,q[1]=l>>>8&255,r.check=Oe(r.check,q,2,0)),l=0,f=0}else r.head&&(r.head.extra=null);r.mode=uM;case uM:if(r.flags&1024&&(p=r.length,p>u&&(p=u),p&&(r.head&&(w=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),w)),r.flags&512&&r.wrap&4&&(r.check=Oe(r.check,n,p,o)),u-=p,o+=p,r.length-=p),r.length))break e;r.length=0,r.mode=sM;case sM:if(r.flags&2048){if(u===0)break e;p=0;do w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.name+=String.fromCharCode(w));while(w&&p<u);if(r.flags&512&&r.wrap&4&&(r.check=Oe(r.check,n,p,o)),u-=p,o+=p,w)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=lM;case lM:if(r.flags&4096){if(u===0)break e;p=0;do w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.comment+=String.fromCharCode(w));while(w&&p<u);if(r.flags&512&&r.wrap&4&&(r.check=Oe(r.check,n,p,o)),u-=p,o+=p,w)break e}else r.head&&(r.head.comment=null);r.mode=cM;case cM:if(r.flags&512){for(;f<16;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(r.wrap&4&&l!==(r.check&65535)){e.msg="header crc mismatch",r.mode=ue;break}l=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=_r;break;case fM:for(;f<32;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}e.adler=r.check=EM(l),l=0,f=0,r.mode=lf;case lf:if(r.havedict===0)return e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=u,r.hold=l,r.bits=f,_X;e.adler=r.check=1,r.mode=_r;case _r:if(t===mX||t===rf)break e;case rm:if(r.last){l>>>=f&7,f-=f&7,r.mode=im;break}for(;f<3;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}switch(r.last=l&1,l>>>=1,f-=1,l&3){case 0:r.mode=dM;break;case 1:if(OX(r),r.mode=nf,t===rf){l>>>=2,f-=2;break e}break;case 2:r.mode=hM;break;case 3:e.msg="invalid block type",r.mode=ue}l>>>=2,f-=2;break;case dM:for(l>>>=f&7,f-=f&7;f<32;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=ue;break}if(r.length=l&65535,l=0,f=0,r.mode=nm,t===rf)break e;case nm:r.mode=pM;case pM:if(p=r.length,p){if(p>u&&(p=u),p>d&&(p=d),p===0)break e;i.set(n.subarray(o,o+p),a),u-=p,o+=p,d-=p,a+=p,r.length-=p;break}r.mode=_r;break;case hM:for(;f<14;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(r.nlen=(l&31)+257,l>>>=5,f-=5,r.ndist=(l&31)+1,l>>>=5,f-=5,r.ncode=(l&15)+4,l>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=ue;break}r.have=0,r.mode=mM;case mM:for(;r.have<r.ncode;){for(;f<3;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}r.lens[I[r.have++]]=l&7,l>>>=3,f-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,P={bits:r.lenbits},A=ia(hX,r.lens,0,19,r.lencode,0,r.work,P),r.lenbits=P.bits,A){e.msg="invalid code lengths set",r.mode=ue;break}r.have=0,r.mode=vM;case vM:for(;r.have<r.nlen+r.ndist;){for(;h=r.lencode[l&(1<<r.lenbits)-1],_=h>>>24,y=h>>>16&255,S=h&65535,!(_<=f);){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(S<16)l>>>=_,f-=_,r.lens[r.have++]=S;else{if(S===16){for(T=_+2;f<T;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(l>>>=_,f-=_,r.have===0){e.msg="invalid bit length repeat",r.mode=ue;break}w=r.lens[r.have-1],p=3+(l&3),l>>>=2,f-=2}else if(S===17){for(T=_+3;f<T;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}l>>>=_,f-=_,w=0,p=3+(l&7),l>>>=3,f-=3}else{for(T=_+7;f<T;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}l>>>=_,f-=_,w=0,p=11+(l&127),l>>>=7,f-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=ue;break}for(;p--;)r.lens[r.have++]=w}}if(r.mode===ue)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=ue;break}if(r.lenbits=9,P={bits:r.lenbits},A=ia(ZM,r.lens,0,r.nlen,r.lencode,0,r.work,P),r.lenbits=P.bits,A){e.msg="invalid literal/lengths set",r.mode=ue;break}if(r.distbits=6,r.distcode=r.distdyn,P={bits:r.distbits},A=ia(KM,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,P),r.distbits=P.bits,A){e.msg="invalid distances set",r.mode=ue;break}if(r.mode=nf,t===rf)break e;case nf:r.mode=of;case of:if(u>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=u,r.hold=l,r.bits=f,sX(e,c),a=e.next_out,i=e.output,d=e.avail_out,o=e.next_in,n=e.input,u=e.avail_in,l=r.hold,f=r.bits,r.mode===_r&&(r.back=-1);break}for(r.back=0;h=r.lencode[l&(1<<r.lenbits)-1],_=h>>>24,y=h>>>16&255,S=h&65535,!(_<=f);){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(y&&!(y&240)){for(E=_,M=y,O=S;h=r.lencode[O+((l&(1<<E+M)-1)>>E)],_=h>>>24,y=h>>>16&255,S=h&65535,!(E+_<=f);){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}l>>>=E,f-=E,r.back+=E}if(l>>>=_,f-=_,r.back+=_,r.length=S,y===0){r.mode=wM;break}if(y&32){r.back=-1,r.mode=_r;break}if(y&64){e.msg="invalid literal/length code",r.mode=ue;break}r.extra=y&15,r.mode=_M;case _M:if(r.extra){for(T=r.extra;f<T;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=bM;case bM:for(;h=r.distcode[l&(1<<r.distbits)-1],_=h>>>24,y=h>>>16&255,S=h&65535,!(_<=f);){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(!(y&240)){for(E=_,M=y,O=S;h=r.distcode[O+((l&(1<<E+M)-1)>>E)],_=h>>>24,y=h>>>16&255,S=h&65535,!(E+_<=f);){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}l>>>=E,f-=E,r.back+=E}if(l>>>=_,f-=_,r.back+=_,y&64){e.msg="invalid distance code",r.mode=ue;break}r.offset=S,r.extra=y&15,r.mode=gM;case gM:if(r.extra){for(T=r.extra;f<T;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=ue;break}r.mode=yM;case yM:if(d===0)break e;if(p=c-d,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=ue;break}p>r.wnext?(p-=r.wnext,m=r.wsize-p):m=r.wnext-p,p>r.length&&(p=r.length),v=r.window}else v=i,m=a-r.offset,p=r.length;p>d&&(p=d),d-=p,r.length-=p;do i[a++]=v[m++];while(--p);r.length===0&&(r.mode=of);break;case wM:if(d===0)break e;i[a++]=r.length,d--,r.mode=of;break;case im:if(r.wrap){for(;f<32;){if(u===0)break e;u--,l|=n[o++]<<f,f+=8}if(c-=d,e.total_out+=c,r.total+=c,r.wrap&4&&c&&(e.adler=r.check=r.flags?Oe(r.check,i,c,a-c):la(r.check,i,c,a-c)),c=d,r.wrap&4&&(r.flags?l:EM(l))!==r.check){e.msg="incorrect data check",r.mode=ue;break}l=0,f=0}r.mode=SM;case SM:if(r.wrap&&r.flags){for(;f<32;){if(u===0)break e;u--,l+=n[o++]<<f,f+=8}if(r.wrap&4&&l!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=ue;break}l=0,f=0}r.mode=xM;case xM:A=vX;break e;case ue:A=JM;break e;case eA:return QM;case tA:default:return yt}return e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=u,r.hold=l,r.bits=f,(r.wsize||c!==e.avail_out&&r.mode<ue&&(r.mode<im||t!==tM))&&aA(e,e.output,e.next_out,c-e.avail_out),s-=e.avail_in,c-=e.avail_out,e.total_in+=s,e.total_out+=c,r.total+=c,r.wrap&4&&c&&(e.adler=r.check=r.flags?Oe(r.check,i,c,e.next_out-c):la(r.check,i,c,e.next_out-c)),e.data_type=r.bits+(r.last?64:0)+(r.mode===_r?128:0)+(r.mode===nf||r.mode===nm?256:0),(s===0&&c===0||t===tM)&&A===In&&(A=bX),A},AX=e=>{if(Rn(e))return yt;let t=e.state;return t.window&&(t.window=null),e.state=null,In},PX=(e,t)=>{if(Rn(e))return yt;let r=e.state;return r.wrap&2?(r.head=t,t.done=!1,In):yt},qX=(e,t)=>{let r=t.length,n,i,o;return Rn(e)||(n=e.state,n.wrap!==0&&n.mode!==lf)?yt:n.mode===lf&&(i=1,i=la(i,t,r,0),i!==n.check)?JM:(o=aA(e,t,r,r),o?(n.mode=eA,QM):(n.havedict=1,In))},TX=nA,kX=iA,CX=rA,jX=EX,IX=oA,RX=MX,FX=AX,LX=PX,DX=qX,NX="pako inflate (from Nodeca project)",gr={inflateReset:TX,inflateReset2:kX,inflateResetKeep:CX,inflateInit:jX,inflateInit2:IX,inflate:RX,inflateEnd:FX,inflateGetHeader:LX,inflateSetDictionary:DX,inflateInfo:NX};zX=BX,uA=Object.prototype.toString,{Z_NO_FLUSH:HX,Z_FINISH:VX,Z_OK:da,Z_STREAM_END:um,Z_NEED_DICT:sm,Z_STREAM_ERROR:WX,Z_DATA_ERROR:MM,Z_MEM_ERROR:UX}=Hi;va.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,u;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?VX:HX,uA.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=gr.inflate(r,a),o===sm&&i&&(o=gr.inflateSetDictionary(r,i),o===da?o=gr.inflate(r,a):o===MM&&(o=sm));r.avail_in>0&&o===um&&r.state.wrap>0&&e[r.next_in]!==0;)gr.inflateReset(r),o=gr.inflate(r,a);switch(o){case WX:case MM:case sm:case UX:return this.onEnd(o),this.ended=!0,!1}if(u=r.avail_out,r.next_out&&(r.avail_out===0||o===um))if(this.options.to==="string"){let d=fa.utf8border(r.output,r.next_out),l=r.next_out-d,f=fa.buf2string(r.output,d);r.next_out=l,r.avail_out=n-l,l&&r.output.set(r.output.subarray(d,d+l),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===da&&u===0)){if(o===um)return o=gr.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};va.prototype.onData=function(e){this.chunks.push(e)};va.prototype.onEnd=function(e){e===da&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ff.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};$X=va,YX=Em,XX=GX,ZX=Em,KX=Hi,JX={Inflate:$X,inflate:YX,inflateRaw:XX,ungzip:ZX,constants:KX},{Deflate:Goe,deflate:$oe,deflateRaw:Yoe,gzip:Xoe}=aX,{Inflate:Zoe,inflate:Koe,inflateRaw:Joe,ungzip:QX}=JX,pf=QX});var lA=g((eae,sA)=>{sA.exports=JBrowseExports["@jbrowse/core/util/types/mst"]});var fA=g((tae,cA)=>{cA.exports=JBrowseExports["@jbrowse/core/util/io"]});function Mm(e){return{...e,children:e.children.map(t=>t.children.length?Mm(t):{children:[t],id:`${t.id}-leafnode`,name:`${t.name}-hidden`})}}var dA=C(()=>{});function pA({mapHeight:e,blockSize:t,viewportY:r,viewportHeight:n}){let i=Math.max(0,Math.min(r,e*t-n)),o=Math.floor(i/t),a=Math.floor((i+n-1)/t),u=[];for(let d=o;d<=a;d++)u.push(d*t);return u}function hA({mapWidth:e,blockSize:t,viewportX:r,viewportWidth:n}){let i=Math.max(0,Math.min(r,e-n)),o=Math.floor(i/t),a=Math.floor((i+n-1)/t),u=[];for(let d=o;d<=a;d++)u.push(d*t);return u}var mA=C(()=>{});function vA(e,t){Am||(Am=document.createElement("canvas"));let r=Am.getContext("2d");if(!r)throw new Error("no canvas context");return r.font=r.font.replace(/\d+px/,`${t}px`),r.measureText(e).width}var Am,_A=C(()=>{});var er,bA,Pm,eZ,tZ,gA,yA=C(()=>{er=x(R()),bA=x(B()),Pm=x(D());Kr();eZ=(0,Pm.observer)(function({track:e,model:t,offsetX:r}){let{blockSize:n,scrollX:i,bgColor:o,colorScheme:a,colWidth:u,fontSize:d,rowHeight:l,highResScaleFactor:f}=t,{model:{customColorScheme:s,data:c}}=e,p=s||a,m=(0,bA.useTheme)(),v=(0,er.useRef)(null),h=(0,er.useMemo)(()=>Ti(p,m),[p,m]);return(0,er.useEffect)(()=>{if(!v.current)return;let _=v.current.getContext("2d");if(!_)return;_.resetTransform(),_.scale(f,f),_.clearRect(0,0,n,l),_.translate(-r,0),_.textAlign="center",_.font=_.font.replace(/\d+px/,`${d}px`);let y=Math.max(0,Math.floor(r/u)),S=Math.max(0,Math.ceil((r+n)/u)),E=c.slice(y,S);for(let M=0;E&&M<E.length;M++){let O=E[M],w=p[O.toUpperCase()];if(o){let A=M*u+r-r%u;_.fillStyle=w||"white",_.fillRect(A,0,u,l),l>=10&&u>=l/2&&(_.fillStyle=h[O.toUpperCase()]||"black",_.fillText(O,A+u/2,l/2+1))}}},[d,o,n,u,l,r,h,p,f,c]),er.default.createElement("canvas",{ref:v,height:l*f,width:n*f,style:{position:"absolute",left:i+r,width:n,height:l}})}),tZ=(0,Pm.observer)(function({track:e,model:t}){let{blocksX:r,msaAreaWidth:n,rowHeight:i}=t;return er.default.createElement("div",{style:{position:"relative",height:i,width:n,overflow:"hidden"}},r.map(o=>er.default.createElement(eZ,{key:o,track:e,model:t,offsetX:o})))}),gA=tZ});function rZ(e){let t=/\(?(\d+(\.\d+)+)\)?/.exec(e);return t&&t.length>1?t[1]:""}function SA(e){let t=["CLUSTAL","PROBCONS","MUSCLE","MSAPROBS","Kalign"];t.some(n=>e.startsWith(n))||console.warn(`${e} is not a known CLUSTAL header: ${t.join(",")}, proceeding but could indicate an issue`);let r=rZ(e);return{info:e,version:r}}function hf(e){let t=e.next();for(;!t.done&&t.value.trim()==="";)t=e.next();return t.value}function nZ(e){let t=e.split(/\s+/),r=e.slice(t[0].length),n=t[0].length+r.indexOf(t[1]),i=n+t[1].length;return[n,i]}function wA(e){let t=hf(e),r=[],n="";if(!t)return;for(;t;)t[0].startsWith(" ")?n=t:r.push(t),t=e.next().value;let[i,o]=nZ(r[0]),u=r.map(s=>s.split(/\s+/)).map(s=>s[0]),d=r.map(s=>s.slice(i,o)),l=n.slice(i,o),f=d[0].length-l.length;return f&&(l+=" ".repeat(f)),{ids:u,seqs:d,consensus:l}}function xA(e){let t,r=wA(e);if(r!==void 0)for(;t=wA(e);){for(let n=0;n<t.seqs.length;n++)r.seqs[n]+=t.seqs[n];r.consensus+=t.consensus}return r}var qm=C(()=>{});var EA=C(()=>{qm()});function iZ(e){let t=hf(e);if(!t)throw new Error("Empty file received");let r=SA(t),n=xA(e);if(n===void 0)throw new Error("No blocks parsed");let i=n.seqs.map((a,u)=>({id:n.ids[u],seq:a})),{consensus:o}=n;if(o.length!=i[0].seq.length)throw new Error(`Consensus length != sequence length. Con ${o.length} seq ${i[0].seq.length}`);return{consensus:o,alns:i,header:r}}function OA(e){let t=e.split(`
`)[Symbol.iterator]();return iZ(t)}var MA=C(()=>{EA();qm()});var _a,AA=C(()=>{MA();_a=class{MSA;constructor(t){this.MSA=OA(t)}getMSA(){return this.MSA}getRow(t){return this.MSA.alns.find(r=>r.id===t)?.seq||""}getWidth(){return this.MSA.alns[0].seq.length}getRowData(){}getHeader(){return this.MSA.header}getNames(){return this.MSA.alns.map(t=>t.id)}getStructures(){return{}}get alignmentNames(){return[]}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,name:t,children:[]}))}}get seqConsensus(){return this.MSA.consensus}get secondaryStructureConsensus(){}get tracks(){return[]}}});function PA(e){let t=e.split(`
`).map(o=>o.trim()).filter(o=>!!o),r=[],n=[];for(let o of t)if(o.startsWith("SEQ"))r.push(o);else{if(o.startsWith("DATA"))continue;if(o.startsWith("//"))break;n.push(o)}let i=r.map(o=>{let[,a,u,d,l,f,s,c,p]=o.split(" ");return{species:a,protein:u,chr:d,start:+l,end:+f,strand:+s,geneId:c,unknown:p,seq:""}});for(let o of n)for(let a=0;a<r.length;a++)i[a].seq+=o[a];return i}function qA(e){let t=e.split(`
`).map(o=>o.trim()).filter(o=>!!o),r=[],n="";for(let o of t)if(o.startsWith("SEQ"))r.push(o);else{if(o.startsWith("DATA"))continue;if(o.startsWith("//"))break;n=o}let i=r.map(o=>{let[,a,u,d,l,f,s,c,p]=o.split(" ");return{species:a,protein:u,chr:d,start:+l,end:+f,strand:+s,geneId:c,unknown:p}});return{tree:n,seqs:i}}var Tm=C(()=>{});var ba,TA=C(()=>{Tm();ba=class{MSA;constructor(t){this.MSA=PA(t)}getMSA(){return this.MSA}getRow(t){return this.MSA.find(r=>r.protein===t)?.seq||""}getWidth(){return this.MSA[0].seq.length}getRowData(){}getHeader(){return""}getNames(){return this.MSA.map(t=>t.protein)}getStructures(){return{}}get alignmentNames(){return[]}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,name:t,children:[]}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}});function ga(e){let t=[],r={},n=e.split(/\s*(;|\(|\)|,|:)\s*/);for(let i=0;i<n.length;i++){let o=n[i],a={};switch(o){case"(":r.children=[a],t.push(r),r=a;break;case",":t.at(-1)?.children.push(a),r=a;break;case")":r=t.pop();break;case":":break;default:{let u=n[i-1];u===")"||u==="("||u===","?r.name=o:u===":"&&(r.length=Number.parseFloat(o))}}}return r}var km=C(()=>{});var kA,ya,CA=C(()=>{kA=x(Gh());km();Kr();ya=class{data;MSA;constructor(t,r){let n=kA.default.parseAll(t);this.data=n,this.MSA=n[r]}getMSA(){return this.MSA}getRow(t){return this.MSA.seqdata[t]||""}getWidth(){let t=Object.keys(this.MSA.seqdata)[0];return this.getRow(t).length}get alignmentNames(){return this.data.map((t,r)=>t.gf.DE?.[0]||`Alignment ${r+1}`)}getHeader(){return{General:this.MSA.gf,Accessions:this.MSA.gs?.AC,Dbxref:this.MSA.gs?.DR}}getRowData(t){return{name:t,accession:this.MSA.gs?.AC[t],dbxref:this.MSA.gs?.DR?.[t]}}getNames(){return Object.keys(this.MSA.seqdata)}getSeqCoords(){}getStructures(){let t=/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/,r=this.MSA,n=Object.entries(r.gs?.DR||{}).map(([o,a])=>[o,t.exec(a)]).filter(o=>!!o[1]).map(([o,a])=>{let u=a[1].toLowerCase(),d=a[2],l=+a[3],f=+a[4];return{id:o,pdb:u,chain:d,startPos:l,endPos:f}}),i={};for(let o of n){let{id:a,...u}=o;i[a]||(i[a]=[]),i[a].push(u)}return i}getTree(){let t=this.MSA.gf.NH?.[0];return t?Wo(ga(t)):{id:"root",name:"root",noTree:!0,children:this.getNames().map(r=>({id:r,children:[],name:r}))}}get seqConsensus(){return this.MSA.gc?.seq_cons}get secondaryStructureConsensus(){return this.MSA.gc?.SS_cons}get tracks(){return[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{}},{id:"secondaryStruct",name:"Secondary-structure",data:this.secondaryStructureConsensus,customColorScheme:{">":"pink","<":"lightblue"}}]}}});function oZ(e){return e.split(">").filter(t=>/\S/.test(t)).map(t=>{let[r,...n]=t.split(`
`),[i,...o]=r.split(" "),a=o.join(" "),d=n.join("").replaceAll(/\s/g,"");return{id:i,description:a,sequence:d}})}var wa,jA=C(()=>{wa=class{MSA;constructor(t){this.MSA={seqdata:Object.fromEntries(oZ(t).map(r=>[r.id,r.sequence]))}}getMSA(){return this.MSA}getRowData(){}getNames(){return Object.keys(this.MSA.seqdata)}getRow(t){return this.MSA.seqdata[t]||""}getWidth(){let t=Object.keys(this.MSA.seqdata)[0];return this.getRow(t).length}getStructures(){return{}}get alignmentNames(){return[]}getHeader(){return{}}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,children:[],name:t}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}});function IA(){return on.types.model({tree:on.types.maybe(on.types.string),msa:on.types.maybe(on.types.string),treeMetadata:on.types.maybe(on.types.string)}).actions(e=>({setTree(t){e.tree=t},setMSA(t){e.msa=t},setTreeMetadata(t){e.treeMetadata=t}})).postProcessSnapshot(e=>{let{tree:t,msa:r,treeMetadata:n}=e,i=5e4;return{tree:t&&t.length>i?void 0:t,msa:r&&r.length>i?void 0:r,treeMetadata:n&&n.length>i?void 0:n}})}var on,RA=C(()=>{on=x(Ge())});function LA(){return FA.types.model("DialogQueueSessionMixin",{}).volatile(()=>({queueOfDialogs:[]})).views(e=>({get DialogComponent(){return e.queueOfDialogs[0]?.[0]},get DialogProps(){return e.queueOfDialogs[0]?.[1]}})).actions(e=>({removeActiveDialog(){e.queueOfDialogs=e.queueOfDialogs.slice(1)},queueDialog(t){let[r,n]=t(()=>{this.removeActiveDialog()});e.queueOfDialogs=[...e.queueOfDialogs,[r,n]]}}))}var FA,DA=C(()=>{FA=x(Ge())});function NA(){return Ui.types.model({drawLabels:!0,labelsAlignRight:!1,treeAreaWidth:Ui.types.optional(Ui.types.number,400),treeWidth:Ui.types.optional(Ui.types.number,300),treeWidthMatchesArea:!0,showBranchLen:!0,drawTree:!0,drawNodeBubbles:!0}).actions(e=>({setTreeWidthMatchesArea(t){e.treeWidthMatchesArea=t},setTreeAreaWidth(t){e.treeAreaWidth=t},setTreeWidth(t){e.treeWidth=t},setLabelsAlignRight(t){e.labelsAlignRight=t},setDrawTree(t){e.drawTree=t},setShowBranchLen(t){e.showBranchLen=t},setDrawNodeBubbles(t){e.drawNodeBubbles=t},setDrawLabels(t){e.drawLabels=t}}))}var Ui,BA=C(()=>{Ui=x(Ge())});function HA(){return zA.types.model({bgColor:!0,colorSchemeName:"maeditor"}).actions(e=>({setColorSchemeName(t){e.colorSchemeName=t},setBgColor(t){e.bgColor=t}}))}var zA,VA=C(()=>{zA=x(Ge())});function Cm(e,t){let r=0,n=0,i=0;for(;r<t;r++,i++)for(;n<e.length&&e[n]-1===i;)n++,i++;return i}function WA(e,t){let r=0;for(let n=0;n<t;n++)if(e[n]!=="-")r++;else if(r>=t)break;return r}var UA=C(()=>{});var Sa,GA=C(()=>{Tm();Sa=class{data;constructor(t){this.data=qA(t)}}});var YA=g(jm=>{"use strict";var $A=Ip();jm.createRoot=$A.createRoot,jm.hydrateRoot=$A.hydrateRoot;var kae});var Fn,XA,aZ,ZA,KA=C(()=>{Fn=x(R()),XA=x(D()),aZ=(0,XA.observer)(({model:e})=>{let{scrollX:t,msaAreaWidth:r,minimapHeight:n,colWidth:i,numColumns:o}=e,a=12,u=n-12,d=r/o/i,l=-t,f=l+r,s=l*d,c=f*d,p="rgba(66, 119, 127, 0.3)";return Fn.default.createElement(Fn.default.Fragment,null,Fn.default.createElement("rect",{x:0,y:0,width:r,height:a,stroke:"#555",fill:"none"}),Fn.default.createElement("rect",{x:Math.max(0,s),y:0,width:c-s,height:a,fill:p,stroke:"#555"}),Fn.default.createElement("g",{transform:`translate(0 ${a})`},Fn.default.createElement("polygon",{fill:p,points:[[c,0],[s,0],[0,u],[r,u]].toString()})))}),ZA=aZ});var t2=g(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});function JA(e){return!e||typeof e=="string"?e:e+""}var Im=class{async svg2canvas(t,r,n){let i=await new Promise(u=>{var d=new Image;d.onload=function(){u(d)},d.src=t});var o=document.createElement("canvas");return o.width=r,o.height=n,o.getContext("2d").drawImage(i,0,0),o}toDataURL(t,r,n,i,o,a){var u=new XMLSerializer().serializeToString(t),d=document.documentMode;if(d){var l=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi;l.test(u)&&(u=u.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink'))}a||(a={});var f="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(u);if(i==="image/svg+xml"||!i)return a.async?Promise.resolve(f):f;if(i==="image/jpeg"||i==="image/png"){if(!a.async)throw new Error("svgcanvas: options.async must be set to true if type is image/jpeg | image/png");return(async()=>{let s=await this.svg2canvas(f,r,n),c=s.toDataURL(i,o);return s.remove(),c})()}throw new Error("svgcanvas: Unknown type for toDataURL, please use image/jpeg | image/png | image/svg+xml.")}getImageData(t,r,n,i,o,a,u,d){if(d||(d={}),!d.async)throw new Error("svgcanvas: options.async must be set to true for getImageData");let l=this.toDataURL(t,r,n,"image/svg+xml");return(async()=>{let f=await this.svg2canvas(l,r,n),c=f.getContext("2d").getImageData(i,o,a,u);return f.remove(),c})()}},QA=new Im;var e2=function(){var e,t,r,n,i;function o(s,c){var p=Object.keys(c),m;for(m=0;m<p.length;m++)s=s.replace(new RegExp("\\{"+p[m]+"\\}","gi"),c[p[m]]);return s}function a(s){var c,p,m;if(!s)throw new Error("cannot create a random attribute name for an undefined object");c="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="";do for(p="",m=0;m<12;m++)p+=c[Math.floor(Math.random()*c.length)];while(s[p]);return p}function u(s,c){var p,m,v={},h;for(s=s.split(","),c=c||10,p=0;p<s.length;p+=2)m="&"+s[p+1]+";",h=parseInt(s[p],c),v[m]="&#"+h+";";return v["\\xa0"]="&#160;",v}function d(s){var c={left:"start",right:"end",center:"middle",start:"start",end:"end"};return c[s]||c.start}function l(s){var c={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return c[s]||c.alphabetic}i=u("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},r=function(s,c){this.__root=s,this.__ctx=c},r.prototype.addColorStop=function(s,c){var p=this.__ctx.__createElement("stop"),m,v;p.setAttribute("offset",s),JA(c).indexOf("rgba")!==-1?(m=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,v=m.exec(c),p.setAttribute("stop-color",o("rgb({r},{g},{b})",{r:v[1],g:v[2],b:v[3]})),p.setAttribute("stop-opacity",v[4])):p.setAttribute("stop-color",JA(c)),this.__root.appendChild(p)},n=function(s,c){this.__root=s,this.__ctx=c},t=function(s){var c={width:500,height:500,enableMirroring:!1},p;if(arguments.length>1?(p=c,p.width=arguments[0],p.height=arguments[1]):s?p=s:p=c,!(this instanceof t))return new t(p);this.width=p.width||c.width,this.height=p.height||c.height,this.enableMirroring=p.enableMirroring!==void 0?p.enableMirroring:c.enableMirroring,this.canvas=this,this.__document=p.document||document,p.ctx?this.__ctx=p.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__styleStack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.resetTransform(),this.__options=p,this.__id=Math.random().toString(16).substring(2,8),this.__debug("new",s)},t.prototype.__debug=function(...s){this.__options.debug&&console.debug(`svgcanvas#${this.__id}:`,...s)},t.prototype.__createElement=function(s,c,p){typeof c>"u"&&(c={});var m=this.__document.createElementNS("http://www.w3.org/2000/svg",s),v=Object.keys(c),h,_;for(p&&(m.setAttribute("fill","none"),m.setAttribute("stroke","none")),h=0;h<v.length;h++)_=v[h],m.setAttribute(_,c[_]);return m},t.prototype.__setDefaultStyles=function(){var s=Object.keys(e),c,p;for(c=0;c<s.length;c++)p=s[c],this[p]=e[p].canvas},t.prototype.__applyStyleState=function(s){var c=Object.keys(s),p,m;for(p=0;p<c.length;p++)m=c[p],this[m]=s[m]},t.prototype.__getStyleState=function(){var s,c={},p=Object.keys(e),m;for(s=0;s<p.length;s++)m=p[s],c[m]=this[m];return c},t.prototype.__applyTransformation=function(s,c){let{a:p,b:m,c:v,d:h,e:_,f:y}=c||this.getTransform();s.setAttribute("transform",`matrix(${p} ${m} ${v} ${h} ${_} ${y})`)},t.prototype.__applyStyleToCurrentElement=function(s){var c=this.__currentElement,p=this.__currentElementsToStyle;p&&(c.setAttribute(s,""),c=p.element,p.children.forEach(function(T){T.setAttribute(s,"")}));var m=Object.keys(e),v,h,_,y,S,E,M,O;for(v=0;v<m.length;v++)if(h=e[m[v]],_=this[m[v]],h.apply){if(_ instanceof n){if(_.__ctx)for(M=0;M<_.__ctx.__defs.childNodes.length;M++)O=_.__ctx.__defs.childNodes[M],E=O.getAttribute("id"),this.__ids[E]=E,this.__defs.appendChild(O);c.setAttribute(h.apply,o("url(#{id})",{id:_.__root.getAttribute("id")}))}else if(_ instanceof r)c.setAttribute(h.apply,o("url(#{id})",{id:_.__root.getAttribute("id")}));else if(h.apply.indexOf(s)!==-1&&h.svg!==_)if((h.svgAttr==="stroke"||h.svgAttr==="fill")&&_.indexOf("rgba")!==-1){y=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,S=y.exec(_),c.setAttribute(h.svgAttr,o("rgb({r},{g},{b})",{r:S[1],g:S[2],b:S[3]}));var w=S[4],A=this.globalAlpha;A!=null&&(w*=A),c.setAttribute(h.svgAttr+"-opacity",w)}else{var q=h.svgAttr;if(m[v]==="globalAlpha"){if(q=s+"-"+h.svgAttr,c.getAttribute(q))continue}else if(m[v]==="lineWidth"){var P=this.__getTransformScale();_=_*Math.max(P.x,P.y)}c.setAttribute(q,_)}}},t.prototype.__closestGroupOrSvg=function(s){return s=s||this.__currentElement,s.nodeName==="g"||s.nodeName==="svg"?s:this.__closestGroupOrSvg(s.parentNode)},t.prototype.getSerializedSvg=function(s){var c=new XMLSerializer().serializeToString(this.__root),p,m,v,h,_,y;if(y=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,y.test(c)&&(c=c.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),s)for(p=Object.keys(i),m=0;m<p.length;m++)v=p[m],h=i[v],_=new RegExp(v,"gi"),_.test(c)&&(c=c.replace(_,h));return c},t.prototype.getSvg=function(){return this.__root},t.prototype.save=function(){var s=this.__createElement("g"),c=this.__closestGroupOrSvg();this.__groupStack.push(c),c.appendChild(s),this.__currentElement=s;let p=this.__getStyleState();this.__debug("save style",p),this.__styleStack.push(p),this.__transformMatrixStack||(this.__transformMatrixStack=[]),this.__transformMatrixStack.push(this.getTransform())},t.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var s=this.__styleStack.pop();this.__debug("restore style",s),this.__applyStyleState(s),this.__transformMatrixStack&&this.__transformMatrixStack.length>0&&this.setTransform(this.__transformMatrixStack.pop())},t.prototype.beginPath=function(){var s,c;this.__currentDefaultPath="",this.__currentPosition={},s=this.__createElement("path",{},!0),c=this.__closestGroupOrSvg(),c.appendChild(s),this.__currentElement=s},t.prototype.__applyCurrentDefaultPath=function(){var s=this.__currentElement;s.nodeName==="path"?s.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",s.nodeName)},t.prototype.__addPathCommand=function(s){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=s},t.prototype.moveTo=function(s,c){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:s,y:c},this.__addPathCommand(o("M {x} {y}",{x:this.__matrixTransform(s,c).x,y:this.__matrixTransform(s,c).y}))},t.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},t.prototype.lineTo=function(s,c){this.__currentPosition={x:s,y:c},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(o("L {x} {y}",{x:this.__matrixTransform(s,c).x,y:this.__matrixTransform(s,c).y})):this.__addPathCommand(o("M {x} {y}",{x:this.__matrixTransform(s,c).x,y:this.__matrixTransform(s,c).y}))},t.prototype.bezierCurveTo=function(s,c,p,m,v,h){this.__currentPosition={x:v,y:h},this.__addPathCommand(o("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:this.__matrixTransform(s,c).x,cp1y:this.__matrixTransform(s,c).y,cp2x:this.__matrixTransform(p,m).x,cp2y:this.__matrixTransform(p,m).y,x:this.__matrixTransform(v,h).x,y:this.__matrixTransform(v,h).y}))},t.prototype.quadraticCurveTo=function(s,c,p,m){this.__currentPosition={x:p,y:m},this.__addPathCommand(o("Q {cpx} {cpy} {x} {y}",{cpx:this.__matrixTransform(s,c).x,cpy:this.__matrixTransform(s,c).y,x:this.__matrixTransform(p,m).x,y:this.__matrixTransform(p,m).y}))};var f=function(s){var c=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return[s[0]/c,s[1]/c]};return t.prototype.arcTo=function(s,c,p,m,v){var h=this.__currentPosition&&this.__currentPosition.x,_=this.__currentPosition&&this.__currentPosition.y;if(!(typeof h>"u"||typeof _>"u")){if(v<0)throw new Error("IndexSizeError: The radius provided ("+v+") is negative.");if(h===s&&_===c||s===p&&c===m||v===0){this.lineTo(s,c);return}var y=f([h-s,_-c]),S=f([p-s,m-c]);if(y[0]*S[1]===y[1]*S[0]){this.lineTo(s,c);return}var E=y[0]*S[0]+y[1]*S[1],M=Math.acos(Math.abs(E)),O=f([y[0]+S[0],y[1]+S[1]]),w=v/Math.sin(M/2),A=s+w*O[0],q=c+w*O[1],P=[-y[1],y[0]],T=[S[1],-S[0]],I=function(re){var ze=re[0],Bn=re[1];return Bn>=0?Math.acos(ze):-Math.acos(ze)},z=I(P),Y=I(T);this.lineTo(A+P[0]*v,q+P[1]*v),this.arc(A,q,v,z,Y)}},t.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},t.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},t.prototype.rect=function(s,c,p,m){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(s,c),this.lineTo(s+p,c),this.lineTo(s+p,c+m),this.lineTo(s,c+m),this.lineTo(s,c),this.closePath()},t.prototype.fillRect=function(s,c,p,m){let{a:v,b:h,c:_,d:y,e:S,f:E}=this.getTransform();JSON.stringify([v,h,_,y,S,E])===JSON.stringify([1,0,0,1,0,0])&&s===0&&c===0&&p===this.width&&m===this.height&&this.__clearCanvas();var M,O;M=this.__createElement("rect",{x:s,y:c,width:p,height:m},!0),O=this.__closestGroupOrSvg(),O.appendChild(M),this.__currentElement=M,this.__applyTransformation(M),this.__applyStyleToCurrentElement("fill")},t.prototype.strokeRect=function(s,c,p,m){var v,h;v=this.__createElement("rect",{x:s,y:c,width:p,height:m},!0),h=this.__closestGroupOrSvg(),h.appendChild(v),this.__currentElement=v,this.__applyTransformation(v),this.__applyStyleToCurrentElement("stroke")},t.prototype.__clearCanvas=function(){var s=this.__root.childNodes[1];this.__root.removeChild(s),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.__groupStack=[]},t.prototype.clearRect=function(s,c,p,m){let{a:v,b:h,c:_,d:y,e:S,f:E}=this.getTransform();if(JSON.stringify([v,h,_,y,S,E])===JSON.stringify([1,0,0,1,0,0])&&s===0&&c===0&&p===this.width&&m===this.height){this.__clearCanvas();return}var M,O=this.__closestGroupOrSvg();M=this.__createElement("rect",{x:s,y:c,width:p,height:m,fill:"#FFFFFF"},!0),this.__applyTransformation(M),O.appendChild(M)},t.prototype.createLinearGradient=function(s,c,p,m){var v=this.__createElement("linearGradient",{id:a(this.__ids),x1:s+"px",x2:p+"px",y1:c+"px",y2:m+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(v),new r(v,this)},t.prototype.createRadialGradient=function(s,c,p,m,v,h){var _=this.__createElement("radialGradient",{id:a(this.__ids),cx:m+"px",cy:v+"px",r:h+"px",fx:s+"px",fy:c+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(_),new r(_,this)},t.prototype.__applyText=function(s,c,p,m){var v=document.createElement("span");v.setAttribute("style","font:"+this.font);var h=v.style,_=this.__closestGroupOrSvg(),y=this.__createElement("text",{"font-family":h.fontFamily,"font-size":h.fontSize,"font-style":h.fontStyle,"font-weight":h.fontWeight,"text-decoration":this.__fontUnderline,x:c,y:p,"text-anchor":d(this.textAlign),"dominant-baseline":l(this.textBaseline)},!0);if(y.appendChild(this.__document.createTextNode(s)),this.__currentElement=y,this.__applyTransformation(y),this.__applyStyleToCurrentElement(m),this.__fontHref){var S=this.__createElement("a");S.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.__fontHref),S.appendChild(y),y=S}_.appendChild(y)},t.prototype.fillText=function(s,c,p){this.__applyText(s,c,p,"fill")},t.prototype.strokeText=function(s,c,p){this.__applyText(s,c,p,"stroke")},t.prototype.measureText=function(s){return this.__ctx.font=this.font,this.__ctx.measureText(s)},t.prototype.arc=function(s,c,p,m,v,h){if(m!==v){m=m%(2*Math.PI),v=v%(2*Math.PI),m===v&&(v=(v+2*Math.PI-.001*(h?-1:1))%(2*Math.PI));var _=s+p*Math.cos(v),y=c+p*Math.sin(v),S=s+p*Math.cos(m),E=c+p*Math.sin(m),M=h?0:1,O=0,w=v-m;w<0&&(w+=2*Math.PI),h?O=w>Math.PI?0:1:O=w>Math.PI?1:0;var A=Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),q=Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d);this.lineTo(S,E),this.__addPathCommand(o("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:p*A,ry:p*q,xAxisRotation:0,largeArcFlag:O,sweepFlag:M,endX:this.__matrixTransform(_,y).x,endY:this.__matrixTransform(_,y).y})),this.__currentPosition={x:_,y}}},t.prototype.ellipse=function(s,c,p,m,v,h,_,y){if(h!==_){var S=this.__matrixTransform(s,c);s=S.x,c=S.y;var E=this.__getTransformScale();p=p*E.x,m=m*E.y,v=v+this.__getTransformRotation(),h=h%(2*Math.PI),_=_%(2*Math.PI),h===_&&(_=(_+2*Math.PI-.001*(y?-1:1))%(2*Math.PI));var M=s+Math.cos(-v)*p*Math.cos(_)+Math.sin(-v)*m*Math.sin(_),O=c-Math.sin(-v)*p*Math.cos(_)+Math.cos(-v)*m*Math.sin(_),w=s+Math.cos(-v)*p*Math.cos(h)+Math.sin(-v)*m*Math.sin(h),A=c-Math.sin(-v)*p*Math.cos(h)+Math.cos(-v)*m*Math.sin(h),q=y?0:1,P=0,T=_-h;T<0&&(T+=2*Math.PI),y?P=T>Math.PI?0:1:P=T>Math.PI?1:0;var I=this.__transformMatrix;this.resetTransform(),this.lineTo(w,A),this.__transformMatrix=I,this.__addPathCommand(o("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:p,ry:m,xAxisRotation:v*(180/Math.PI),largeArcFlag:P,sweepFlag:q,endX:M,endY:O})),this.__currentPosition={x:M,y:O}}},t.prototype.clip=function(){var s=this.__closestGroupOrSvg(),c=this.__createElement("clipPath"),p=a(this.__ids),m=this.__createElement("g");this.__applyCurrentDefaultPath(),s.removeChild(this.__currentElement),c.setAttribute("id",p),c.appendChild(this.__currentElement),this.__defs.appendChild(c),s.setAttribute("clip-path",o("url(#{id})",{id:p})),s.appendChild(m),this.__currentElement=m},t.prototype.drawImage=function(){var s=Array.prototype.slice.call(arguments),c=s[0],p,m,v,h,_=0,y=0,S,E,M,O,w,A,q,P,T,I;if(s.length===3)p=s[1],m=s[2],S=c.width,E=c.height,v=S,h=E;else if(s.length===5)p=s[1],m=s[2],v=s[3],h=s[4],S=c.width,E=c.height;else if(s.length===9)_=s[1],y=s[2],S=s[3],E=s[4],p=s[5],m=s[6],v=s[7],h=s[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);M=this.__closestGroupOrSvg();let z=this.getTransform().translate(p,m);if(c instanceof t){if(O=c.getSvg().cloneNode(!0),O.childNodes&&O.childNodes.length>1){for(w=O.childNodes[0];w.childNodes.length;)I=w.childNodes[0].getAttribute("id"),this.__ids[I]=I,this.__defs.appendChild(w.childNodes[0]);A=O.childNodes[1],A&&(this.__applyTransformation(A,z),M.appendChild(A))}}else(c.nodeName==="CANVAS"||c.nodeName==="IMG")&&(q=this.__createElement("image"),q.setAttribute("width",v),q.setAttribute("height",h),q.setAttribute("preserveAspectRatio","none"),(_||y||S!==c.width||E!==c.height)&&(P=this.__document.createElement("canvas"),P.width=v,P.height=h,T=P.getContext("2d"),T.drawImage(c,_,y,S,E,0,0,v,h),c=P),this.__applyTransformation(q,z),q.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.nodeName==="CANVAS"?c.toDataURL():c.getAttribute("src")),M.appendChild(q))},t.prototype.createPattern=function(s,c){var p=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),m=a(this.__ids),v;return p.setAttribute("id",m),p.setAttribute("width",s.width),p.setAttribute("height",s.height),p.setAttribute("patternUnits","userSpaceOnUse"),s.nodeName==="CANVAS"||s.nodeName==="IMG"?(v=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),v.setAttribute("width",s.width),v.setAttribute("height",s.height),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.nodeName==="CANVAS"?s.toDataURL():s.getAttribute("src")),p.appendChild(v),this.__defs.appendChild(p)):s instanceof t&&(p.appendChild(s.__root.childNodes[1]),this.__defs.appendChild(p)),new n(p,this)},t.prototype.setLineDash=function(s){s&&s.length>0?this.lineDash=s.join(","):this.lineDash=null},t.prototype.setTransform=function(s,c,p,m,v,h){s instanceof DOMMatrix?this.__transformMatrix=new DOMMatrix([s.a,s.b,s.c,s.d,s.e,s.f]):this.__transformMatrix=new DOMMatrix([s,c,p,m,v,h])},t.prototype.getTransform=function(){let{a:s,b:c,c:p,d:m,e:v,f:h}=this.__transformMatrix;return new DOMMatrix([s,c,p,m,v,h])},t.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)},t.prototype.scale=function(s,c){if(c===void 0&&(c=s),isNaN(s)||isNaN(c)||!isFinite(s)||!isFinite(c))return;let p=this.getTransform().scale(s,c);this.setTransform(p)},t.prototype.rotate=function(s){let c=this.getTransform().multiply(new DOMMatrix([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]));this.setTransform(c)},t.prototype.translate=function(s,c){let p=this.getTransform().translate(s,c);this.setTransform(p)},t.prototype.transform=function(s,c,p,m,v,h){let _=this.getTransform().multiply(new DOMMatrix([s,c,p,m,v,h]));this.setTransform(_)},t.prototype.__matrixTransform=function(s,c){return new DOMPoint(s,c).matrixTransform(this.__transformMatrix)},t.prototype.__getTransformScale=function(){return{x:Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),y:Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d)}},t.prototype.__getTransformRotation=function(){return Math.atan2(this.__transformMatrix.b,this.__transformMatrix.a)},t.prototype.getImageData=function(s,c,p,m,v){return QA.getImageData(this.getSvg(),this.width,this.height,s,c,p,m,v)},t.prototype.drawFocusRing=function(){},t.prototype.createImageData=function(){},t.prototype.putImageData=function(){},t.prototype.globalCompositeOperation=function(){},t}();function an(e){this.ctx=new e2(e),this.svg=this.ctx.__root;var t=this.svg,r=this,n=document.createElement("div");n.style.display="inline-block",n.appendChild(t),this.wrapper=n,Object.defineProperty(this,"className",{get:function(){return n.getAttribute("class")||""},set:function(i){return n.setAttribute("class",i)}}),Object.defineProperty(this,"tagName",{get:function(){return"CANVAS"},set:function(){}}),["width","height"].forEach(function(i){Object.defineProperty(r,i,{get:function(){return t.getAttribute(i)|0},set:function(o){if(!(isNaN(o)||typeof o>"u"))return r.ctx[i]=o,t.setAttribute(i,o),n[i]=o}})}),["style","id"].forEach(function(i){Object.defineProperty(r,i,{get:function(){return n[i]},set:function(o){if(typeof o<"u")return n[i]=o}})}),["getBoundingClientRect"].forEach(function(i){r[i]=function(){return t[i]()}})}an.prototype.getContext=function(e){if(e!=="2d")throw new Error("Unsupported type of context for SVGCanvas");return this.ctx};an.prototype.toObjectURL=function(){var e=new XMLSerializer().serializeToString(this.svg),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)};an.prototype.toDataURL=function(e,t,r){return QA.toDataURL(this.svg,this.width,this.height,e,t,r)};an.prototype.addEventListener=function(){return this.svg.addEventListener.apply(this.svg,arguments)};an.prototype.getElement=function(){return this.wrapper};an.prototype.getAttribute=function(e){return this.wrapper.getAttribute(e)};an.prototype.setAttribute=function(e,t){this.wrapper.setAttribute(e,t)};mf.Context=e2;mf.Element=an});var a2={};dt(a2,{renderToSvg:()=>uZ});async function uZ(e,t){await(0,i2.when)(()=>!!e.dataInitialized);let{width:r,height:n,scrollX:i,scrollY:o}=e,{exportType:a,theme:u,includeMinimap:d}=t;if(a==="entire")return r2({width:e.totalWidth+e.treeAreaWidth,height:e.totalHeight,theme:u,model:e,offsetY:0,offsetX:0,includeMinimap:d});if(a==="viewport")return r2({width:r,height:n,theme:u,model:e,offsetY:o,offsetX:-i,includeMinimap:d});throw new Error("unknown export type")}async function r2({width:e,height:t,offsetX:r,offsetY:n,theme:i,model:o,includeMinimap:a}){let{Context:u}=await Promise.resolve().then(()=>x(t2())),d=a?lZ:fZ;return(0,o2.renderToStaticMarkup)(be.default.createElement(cZ,{width:e,height:t},be.default.createElement(d,{model:o},be.default.createElement(sZ,{Context:u,model:o,theme:i,offsetX:r,offsetY:n,width:e,height:t}))),n2.createRoot)}function sZ({model:e,theme:t,width:r,height:n,offsetX:i,offsetY:o,Context:a}){let u="tree",d="msa",{treeAreaWidth:l,colorScheme:f}=e,s=Ti(f,t),c=a(r,n),p=a(r,n);Vc({ctx:p,offsetX:i,offsetY:o,model:e,blockSizeYOverride:n,highResScaleFactorOverride:1});let m=r-l;return $c({model:e,offsetY:o,ctx:c,theme:t,blockSizeYOverride:n,highResScaleFactorOverride:1}),Hc({model:e,theme:t,offsetY:o,offsetX:i,contrastScheme:s,ctx:p,blockSizeXOverride:m,blockSizeYOverride:n,highResScaleFactorOverride:1}),be.default.createElement(be.default.Fragment,null,be.default.createElement("defs",null,be.default.createElement("clipPath",{id:u},be.default.createElement("rect",{x:0,y:0,width:l,height:n}))),be.default.createElement("defs",null,be.default.createElement("clipPath",{id:d},be.default.createElement("rect",{x:0,y:0,width:m,height:n}))),be.default.createElement("g",{clipPath:`url(#${u})`,dangerouslySetInnerHTML:{__html:c.getSvg().innerHTML}}),be.default.createElement("g",{clipPath:`url(#${d})`,transform:`translate(${l} 0)`,dangerouslySetInnerHTML:{__html:p.getSvg().innerHTML}}))}function lZ({model:e,children:t}){let{minimapHeight:r,treeAreaWidth:n}=e;return be.default.createElement(be.default.Fragment,null,be.default.createElement("g",{transform:`translate(${n} 0)`},be.default.createElement(ZA,{model:e})),be.default.createElement("g",{transform:`translate(0 ${r})`},t))}function cZ({width:e,height:t,children:r}){return be.default.createElement("svg",{width:e,height:t,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,e,t].toString()},r)}function fZ({children:e}){return e}var be,n2,i2,o2,u2=C(()=>{be=x(R()),n2=x(YA()),i2=x(tr()),o2=x(Me());Yc();kh();Kr();KA();Ch()});function dZ(e){return e[0]===31&&e[1]===139&&e[2]===8}function pZ(){return J.types.compose(LA(),NA(),HA(),J.types.model("MsaView",{id:Gi.ElementId,showDomains:!1,allowedGappyness:100,contrastLettering:!0,subFeatureRows:!1,type:J.types.literal("MsaView"),drawMsaLetters:!0,hideGaps:!0,drawTreeText:!0,height:J.types.optional(J.types.number,550),rowHeight:18,scrollY:0,scrollX:0,colWidth:14,treeFilehandle:J.types.maybe(Gi.FileLocation),msaFilehandle:J.types.maybe(Gi.FileLocation),treeMetadataFilehandle:J.types.maybe(Gi.FileLocation),currentAlignment:0,collapsed:J.types.array(J.types.string),collapsedLeaves:J.types.array(J.types.string),showOnly:J.types.maybe(J.types.string),turnedOffTracks:J.types.map(J.types.boolean),data:J.types.optional(IA(),{tree:"",msa:"",treeMetadata:""}),featureFilters:J.types.map(J.types.boolean)})).volatile(()=>({headerHeight:0,status:void 0,highResScaleFactor:1,loadingMSA:!1,loadingTree:!1,volatileWidth:void 0,resizeHandleWidth:5,blockSize:500,mouseRow:void 0,mouseCol:void 0,mouseClickRow:void 0,mouseClickCol:void 0,nref:0,minimapHeight:56,marginLeft:20,error:void 0,annotPos:void 0,interProAnnotations:void 0})).actions(e=>({setHideGaps(t){e.hideGaps=t},setAllowedGappyness(t){e.allowedGappyness=t},setContrastLettering(t){e.contrastLettering=t},setLoadingMSA(t){e.loadingMSA=t},setLoadingTree(t){e.loadingTree=t},setWidth(t){e.volatileWidth=t},setHeight(t){e.height=t},setError(t){e.error=t},setMousePos(t,r){e.mouseCol=t,e.mouseRow=r},setShowDomains(t){e.showDomains=t},setSubFeatureRows(t){e.subFeatureRows=t},setMouseClickPos(t,r){e.mouseClickCol=t,e.mouseClickRow=r},setRowHeight(t){e.rowHeight=t},setColWidth(t){e.colWidth=t},setScrollY(t){e.scrollY=t},setCurrentAlignment(t){e.currentAlignment=t},toggleCollapsed(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},toggleCollapsed2(t){e.collapsedLeaves.includes(t)?e.collapsedLeaves.remove(t):e.collapsedLeaves.push(t)},setShowOnly(t){e.showOnly=t},setData(t){e.data=(0,J.cast)(t)},setMSAFilehandle(t){e.msaFilehandle=t},setTreeFilehandle(t){e.treeFilehandle=t},setMSA(t){e.data.setMSA(t)},setTree(t){e.data.setTree(t)},setTreeMetadata(t){e.data.setTreeMetadata(t)}})).views(e=>({get realAllowedGappyness(){return e.hideGaps?e.allowedGappyness:100},get actuallyShowDomains(){return e.showDomains&&!!e.interProAnnotations},get viewInitialized(){return e.volatileWidth!==void 0},get width(){if(e.volatileWidth===void 0)throw new Error("not initialized");return e.volatileWidth}})).views(e=>({extraViewMenuItems(){return[]},get colorScheme(){return jc[e.colorSchemeName]},get header(){return this.MSA?.getHeader()||{}},getRowData(t){return{data:this.MSA?.getRowData(t)}},get alignmentNames(){return this.MSA?.alignmentNames||[]},get noTree(){return!!this.tree.noTree},get noDomains(){return!e.interProAnnotations},menuItems(){return[]},get treeMetadata(){return e.data.treeMetadata?JSON.parse(e.data.treeMetadata):{}},get MSA(){let t=e.data.msa;return t?s2.default.sniff(t)?new ya(t,e.currentAlignment):t.startsWith(">")?new wa(t):t.startsWith("SEQ")?new ba(t):new _a(t):null},get numColumns(){return(this.MSA?.getWidth()||0)-this.blanks.length},get tree(){let t=e.data.tree,r;if(t){let n;t.startsWith("SEQ")?n=new Sa(t).data.tree:n=t,r=Wo(ga(n))}else r=this.MSA?.getTree()||{noTree:!0,children:[],id:"empty",name:"empty"};return Mm(r)},get rowNames(){return this.leaves.map(t=>t.data.name)},get mouseOverRowName(){let{mouseRow:t}=e;return t===void 0?void 0:this.rowNames[t]},get root(){let t=Ri(this.tree,r=>r.children).sum(r=>r.children?0:1).sort((r,n)=>Tc(r.data.length||1,n.data.length||1));if(e.showOnly){let r=t.find(n=>n.data.id===e.showOnly);r&&(t=r)}return[...e.collapsed,...e.collapsedLeaves].map(r=>t.find(n=>n.data.id===r)).filter(Ln.notEmpty).map(r=>{YS(r)}),t},get msaAreaWidth(){return e.width-e.treeAreaWidth},get treeAreaWidthMinusMargin(){return e.treeAreaWidth-e.marginLeft},get blanks(){let{hideGaps:t,realAllowedGappyness:r}=e,n=[];if(t){let i=this.leaves.map(o=>this.MSA?.getRow(o.data.name)).filter(o=>!!o);if(i.length)for(let o=0;o<i[0].length;o++){let a=0;for(let u of i)u[o]==="-"&&a++;a/i.length>=r/100&&n.push(o)}}return n},get blanksSet(){return new Set(this.blanks)},get rows(){let t=this.MSA;return this.leaves.map(r=>[r.data.name,t?.getRow(r.data.name)]).filter(r=>!!r[1])},get rowMap(){return new Map(this.rows)},get columns(){return Object.fromEntries(this.rows.map((t,r)=>[t[0],this.columns2d[r]]))},get columns2d(){return this.rows.map(t=>t[1]).map(t=>mh(this.blanks,t))},get fontSize(){return Math.min(Math.max(6,e.rowHeight-3),18)},get colStats(){let t=[],r=this.columns2d;for(let n of r)for(let i=0;i<n.length;i++){let o=t[i]||{},a=n[i];o[a]||(o[a]=0),o[a]++,t[i]=o}return t},get colStatsSums(){return Object.fromEntries(Object.entries(this.colStats).map(([t,r])=>[t,(0,Ln.sum)(Object.values(r))]))},get hierarchy(){let t=this.root;return zh().size([this.totalHeight,e.treeWidth]).separation(()=>1)(t),vh(t,t.data.length=0,e.treeWidth/_h(t)),t},get totalHeight(){return this.root.leaves().length*e.rowHeight},get leaves(){return this.hierarchy.leaves()}})).views(e=>({get totalWidth(){return e.numColumns*e.colWidth}})).views(e=>({get dataInitialized(){return(e.data.msa||e.data.tree)&&!e.error},get blocksX(){return hA({viewportWidth:e.msaAreaWidth,viewportX:-e.scrollX,blockSize:e.blockSize,mapWidth:e.totalWidth})},get blocksY(){return pA({viewportHeight:e.height,viewportY:-e.scrollY,blockSize:e.blockSize,mapHeight:e.totalHeight})}})).views(e=>({get blocks2d(){let t=[];for(let r of e.blocksY)for(let n of e.blocksX)t.push([n,r]);return t},get isLoading(){return e.loadingMSA||e.loadingTree},get maxScrollX(){return-e.totalWidth+(e.msaAreaWidth-100)},get showMsaLetters(){return e.drawMsaLetters&&e.rowHeight>=5},get showTreeText(){return e.drawLabels&&e.rowHeight>=5}})).actions(e=>({setDrawMsaLetters(t){e.drawMsaLetters=t},zoomOutHorizontal(){e.colWidth=Math.max(1,Math.floor(e.colWidth*.75)),e.scrollX=Ut(e.maxScrollX,e.scrollX,0)},zoomInHorizontal(){e.colWidth=Math.ceil(e.colWidth*1.5),e.scrollX=Ut(e.maxScrollX,e.scrollX,0)},zoomInVertical(){e.rowHeight=Math.ceil(e.rowHeight*1.5)},zoomOutVertical(){e.rowHeight=Math.max(1.5,Math.floor(e.rowHeight*.75))},zoomIn(){(0,Ct.transaction)(()=>{e.colWidth=Math.ceil(e.colWidth*1.5),e.rowHeight=Math.ceil(e.rowHeight*1.5),e.scrollX=Ut(e.maxScrollX,e.scrollX,0)})},zoomOut(){(0,Ct.transaction)(()=>{e.colWidth=Math.max(1,Math.floor(e.colWidth*.75)),e.rowHeight=Math.max(1.5,Math.floor(e.rowHeight*.75)),e.scrollX=Ut(e.maxScrollX,e.scrollX,0)})},setInterProAnnotations(t){e.interProAnnotations=t},doScrollY(t){e.scrollY=Ut(-e.totalHeight+10,e.scrollY+t,0)},doScrollX(t){e.scrollX=Ut(e.maxScrollX,e.scrollX+t,0)},setScrollX(t){e.scrollX=Ut(e.maxScrollX,t,0)},toggleTrack(t){e.turnedOffTracks.has(t)?e.turnedOffTracks.delete(t):e.turnedOffTracks.set(t,!0)},setStatus(t){e.status=t}})).views(e=>({get labelsWidth(){let t=0,{rowHeight:r,leaves:n,treeMetadata:i,fontSize:o}=e;if(r>5)for(let a of n)t=Math.max(vA(i[a.data.name]?.genome||a.data.name,o),t);return t},get secondaryStructureConsensus(){return e.MSA?.secondaryStructureConsensus},get seqConsensus(){return e.MSA?.seqConsensus},get conservation(){if(e.columns2d.length)for(let t=0;t<e.columns2d[0].length;t++){let r=[];for(let n of e.columns2d)r.push(n[t])}return["a"]},get adapterTrackModels(){return e.MSA?.tracks.map(t=>({model:{...t,data:t.data?mh(e.blanks,t.data):void 0,height:e.rowHeight},ReactComponent:gA}))||[]},get tracks(){return this.adapterTrackModels},get turnedOnTracks(){return this.tracks.filter(t=>!e.turnedOffTracks.has(t.model.id))},get showHorizontalScrollbar(){return e.msaAreaWidth<e.totalWidth},get rowNamesSet(){return new Map(e.rowNames.map((t,r)=>[t,r]))},mouseOverCoordToRowLetter(t,r){let{rowMap:n,blanks:i}=e;return n.get(t)?.[Cm(i,r)]},mouseOverCoordToGapRemovedRowCoord(t,r){let{rowMap:n,blanks:i}=e,o=n.get(t);if(o!==void 0){let a=Cm(i,r),u=WA(o,a);return o[u]==="-"||!o[u]?void 0:u}else return},seqCoordToRowSpecificGlobalCoord(t,r){let{rowNames:n,rows:i}=e,o=n.indexOf(t);if(o!==-1&&i[o]){let a=i[o][1],u=0,d=0;for(;u<r;d++)if(a[d]!=="-")u++;else if(u>=r)break;return d}return 0}})).views(e=>({get msaAreaHeight(){return e.height-(e.showHorizontalScrollbar?e.minimapHeight:0)-e.headerHeight},get totalTrackAreaHeight(){return(0,Ln.sum)(e.turnedOnTracks.map(t=>t.model.height))},get tidyInterProAnnotationTypes(){let t=new Map;for(let r of this.tidyInterProAnnotations)t.set(r.accession,r);return t},get tidyInterProAnnotations(){let t=[],{interProAnnotations:r}=e;if(r)for(let[n,i]of Object.entries(r))for(let{signature:o,locations:a}of i.matches){let{entry:u}=o;if(u){let{name:d,accession:l,description:f}=u;for(let{start:s,end:c}of a)t.push({id:n,name:d,accession:l,description:f,start:s,end:c})}}return t.sort((n,i)=>bh(i)-bh(n))},get tidyFilteredInterProAnnotations(){return this.tidyInterProAnnotations.filter(t=>e.featureFilters.get(t.accession))},get tidyFilteredGatheredInterProAnnotations(){return(0,Ln.groupBy)(this.tidyFilteredInterProAnnotations,t=>t.id)}})).views(e=>({get showVerticalScrollbar(){return e.msaAreaHeight<e.totalHeight}})).views(e=>({get verticalScrollbarWidth(){return e.showVerticalScrollbar?20:0},get fillPalette(){let t=[...e.tidyInterProAnnotationTypes.keys()],r=0,n={};for(let i of t){let o=Math.min(t.length-1,xh.length-1);n[i]=xh[o][r],r++}return n},get strokePalette(){return Object.fromEntries(Object.entries(this.fillPalette).map(([t,r])=>[t,He(r).darken(.1).toHex()]))}})).actions(e=>({setHeaderHeight(t){e.headerHeight=t},reset(){e.setData({tree:"",msa:""}),e.setError(void 0),e.setScrollY(0),e.setScrollX(0),e.setCurrentAlignment(0),e.setTreeFilehandle(void 0),e.setMSAFilehandle(void 0)},async exportSVG(t){let{renderToSvg:r}=await Promise.resolve().then(()=>(u2(),a2)),n=await r(e,t),i=new Blob([n],{type:"image/svg+xml"});(0,l2.saveAs)(i,"image.svg")},incrementRef(){e.nref++},initFilter(t){e.featureFilters.get(t)===void 0&&e.featureFilters.set(t,!0)},setFilter(t,r){e.featureFilters.set(t,r)},afterCreate(){(0,J.addDisposer)(e,(0,Ct.autorun)(()=>{for(let t of e.tidyInterProAnnotationTypes.keys())this.initFilter(t)})),(0,J.addDisposer)(e,(0,Ct.autorun)(async()=>{let{treeFilehandle:t}=e;if(t)try{e.setLoadingTree(!0),e.setTree(await(0,vf.openLocation)(t).readFile("utf8")),t.locationType==="BlobLocation"&&e.setTreeFilehandle(void 0)}catch(r){console.error(r),e.setError(r)}finally{e.setLoadingTree(!1)}})),(0,J.addDisposer)(e,(0,Ct.autorun)(async()=>{let{treeMetadataFilehandle:t}=e;if(t)try{e.setTreeMetadata(await(0,vf.openLocation)(t).readFile("utf8"))}catch(r){console.error(r),e.setError(r)}})),(0,J.addDisposer)(e,(0,Ct.autorun)(async()=>{let{msaFilehandle:t}=e;if(t)try{e.setLoadingMSA(!0);let r=await(0,vf.openLocation)(t).readFile(),n=dZ(r)?pf(r):r,i=new TextDecoder("utf8").decode(n);(0,Ct.transaction)(()=>{e.setMSA(i),t.locationType==="BlobLocation"&&e.setMSAFilehandle(void 0)})}catch(r){console.error(r),e.setError(r)}finally{e.setLoadingMSA(!1)}})),(0,J.addDisposer)(e,(0,Ct.autorun)(()=>{e.colStats,e.colStatsSums,e.columns})),(0,J.addDisposer)(e,(0,Ct.autorun)(async()=>{e.treeWidthMatchesArea&&e.setTreeWidth(Math.max(50,e.treeAreaWidth-e.labelsWidth-10-e.marginLeft))}))}})).postProcessSnapshot(e=>{let t=e,{data:{tree:r,msa:n,treeMetadata:i},...o}=t;return{data:{...e.treeFilehandle?{}:{tree:r},...e.msaFilehandle?{}:{msa:n},...e.treeMetadataFilehandle?{}:{treeMetadata:i}},...o}})}var Ct,J,s2,l2,Gi,vf,Ln,Rm,c2=C(()=>{Ct=x(tr()),J=x(Ge());FO();hh();s2=x(Gh()),l2=x(HO());Om();Gi=x(lA()),vf=x(fA()),Ln=x(Me());Kr();Pc();dA();mA();_A();Eh();yA();AA();TA();CA();jA();km();Ic();RA();DA();BA();VA();UA();GA();Rm=pZ});var Fm=C(()=>{uO();c2()});var d2=g((due,f2)=>{f2.exports=JBrowseExports["@jbrowse/core/pluggableElementTypes"]});async function p2(e,t){let r=await fetch(e,t);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${e} ${await r.text()}`);return r}async function je(e,t){return(await p2(e,t)).text()}async function h2(e,t){return(await p2(e,t)).json()}function _f(e){return new Promise(t=>setTimeout(t,e))}var Lm=C(()=>{"use strict"});async function v2({query:e,blastDatabase:t,blastProgram:r,onProgress:n,onRid:i}){n("Submitting to NCBI BLAST...");let{rid:o}=await bZ({query:e,blastDatabase:t,blastProgram:r});i(o),await gZ({rid:o,onProgress:n});let a=await h2(`${xa}?CMD=Get&RID=${o}&FORMAT_TYPE=JSON2_S&FORMAT_OBJECT=Alignment`);return{rid:o,hits:a.BlastOutput2[0]?.report.results.search.hits??[]}}async function bZ({query:e,blastProgram:t,blastDatabase:r}){let n=await je(xa,{method:"POST",body:new URLSearchParams({CMD:"Put",PROGRAM:t,DATABASE:r,QUERY:e,...r==="nr_clustered_seq"?{CLUSTERED_DB:"on",DB_TYPE:"Experimental Databases"}:{}})}),i=/^ {4}RID = (.*$)/m.exec(n)?.[1],o=/^ {4}RTOE = (.*$)/m.exec(n)?.[1];if(!i)throw new Error("Failed to get RID from BLAST request");return{rid:i,rtoe:o}}async function gZ({rid:e,onProgress:t}){for(;;){for(let i=0;i<20;i++)await _f(1e3),t(`Re-checking BLAST status in... ${20-i}`);let n=await je(`${xa}?CMD=Get&FORMAT_OBJECT=SearchInfo&RID=${e}`);if(!/\s+Status=WAITING/m.test(n)){if(/\s+Status=FAILED/m.test(n))throw new Error(`BLAST ${e} failed; please report to blast-help@ncbi.nlm.nih.gov`);if(/\s+Status=READY/m.test(n)){if(/\s+ThereAreHits=yes/m.test(n))return!0;throw new Error("No hits found")}}}}var xa,Dm=C(()=>{"use strict";Lm();xa="https://blast.ncbi.nlm.nih.gov/blast/Blast.cgi"});var x2=g(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.genomeToTranscriptSeqMapping=void 0;function yZ(e){var t,r;let n=e.strand,i=e.refName,o=(r=(t=e.subfeatures)===null||t===void 0?void 0:t.filter(l=>l.type==="CDS").sort((l,f)=>n*(l.start-f.start)))!==null&&r!==void 0?r:[],a={},u={},d=0;if(n!==-1)for(let l of o)for(let f=l.start;f<l.end;f++){let s=Math.floor(d++/3);a[f]=s,u[s]||(u[s]=f)}else for(let l of o)for(let f=l.end;f>l.start;f--){let s=Math.floor(d++/3);a[f]=s,u[s]||(u[s]=f)}return{g2p:a,p2g:u,refName:i,strand:n}}yf.genomeToTranscriptSeqMapping=yZ});function Bm(e){return xf.default.createElement(M2.SvgIcon,{...e},xf.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),xf.default.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}))}var xf,M2,A2=C(()=>{"use strict";xf=x(R()),M2=x(B())});function wZ({rid:e}){return Ef.default.createElement(Of.Typography,null,"RID ",e," ",Ef.default.createElement(Of.Link,{target:"_black",href:`${xa}?CMD=Get&RID=${e}`},"(see status at NCBI ",Ef.default.createElement(Bm,null),")"))}var Ef,Of,zm,P2=C(()=>{"use strict";Ef=x(R()),Of=x(B());A2();Dm();zm=wZ});function SZ({rid:e,error:t}){return wt.default.createElement("div",null,e?wt.default.createElement(zm,{rid:e}):null,wt.default.createElement(Mf.ErrorMessage,{error:t}))}function xZ({rid:e,progress:t}){let{classes:r}=k2();return wt.default.createElement("div",{className:r.loading},e?wt.default.createElement(zm,{rid:e}):null,wt.default.createElement(Hm.Typography,null,t))}var wt,Hm,q2,T2,Mf,k2,EZ,C2,j2=C(()=>{"use strict";wt=x(R()),Hm=x(B()),q2=x(D()),T2=x(It()),Mf=x(Ae());P2();k2=(0,T2.makeStyles)()(e=>({margin:{padding:20},loading:{background:e.palette.background.paper}}));EZ=(0,q2.observer)(function({model:t}){let{progress:r,rid:n,error:i,processing:o}=t,{classes:a}=k2();return wt.default.createElement("div",{className:a.margin},wt.default.createElement(Mf.LoadingEllipses,{message:"Running NCBI BLAST",variant:"h5"}),i?wt.default.createElement(SZ,{rid:n,error:i}):n?wt.default.createElement(xZ,{rid:n,progress:r}):null,wt.default.createElement(Hm.Typography,null,o||"Initializing BLAST query"))}),C2=EZ});var R2={};dt(R2,{default:()=>MZ});var Af,I2,OZ,MZ,F2=C(()=>{"use strict";Af=x(R()),I2=x(D());Fm();j2();OZ=(0,I2.observer)(function({model:t}){let{blastParams:r}=t;return Af.default.createElement("div",null,r?Af.default.createElement(C2,{model:t}):Af.default.createElement(Bh,{model:t}))}),MZ=OZ});var N2=g(Pf=>{"use strict";"use client";var PZ=G();Object.defineProperty(Pf,"__esModule",{value:!0});Pf.default=void 0;var qZ=PZ(ne()),TZ=ie(),Gue=Pf.default=(0,qZ.default)((0,TZ.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")});var W2=g((Jue,V2)=>{V2.exports=JBrowseExports["@jbrowse/core/configuration"]});var YZ={};dt(YZ,{default:()=>If});var bP=x(nv()),gP=x(Me()),yP=x(sv());var lv="2.0.4";var L2=x(R()),D2=x(dv());var Se=x(Ge()),wf=x(tr());Fm();var Sf=x(Me()),E2=x(d2());Lm();var ct="https://www.ebi.ac.uk/Tools/services/rest";async function hZ({sequence:e,onProgress:t}){let r=await je(`${ct}/clustalo/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",sequence:e})});return await bf({jobId:r,algorithm:"clustalo",onProgress:t}),{msa:await je(`${ct}/clustalo/result/${r}/aln-clustal_num`),tree:await je(`${ct}/clustalo/result/${r}/phylotree`)}}async function mZ({sequence:e,onProgress:t}){let r=await je(`${ct}/muscle/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",format:"clw",tree:"tree1",sequence:e})});return await bf({jobId:r,algorithm:"muscle",onProgress:t}),{msa:await je(`${ct}/muscle/result/${r}/fa`),tree:await je(`${ct}/muscle/result/${r}/phylotree`)}}async function vZ({sequence:e,onProgress:t}){let r=await je(`${ct}/kalign/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",stype:"protein",sequence:e})});return await bf({jobId:r,algorithm:"kalign",onProgress:t}),{msa:await je(`${ct}/kalign/result/${r}/fa`),tree:await je(`${ct}/kalign/result/${r}/phylotree`)}}async function _Z({sequence:e,onProgress:t}){let r=await je(`${ct}/mafft/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",stype:"protein",sequence:e})});return await bf({jobId:r,algorithm:"mafft",onProgress:t}),{msa:await je(`${ct}/mafft/result/${r}/fa`),tree:await je(`${ct}/mafft/result/${r}/phylotree`)}}async function bf({onProgress:e,jobId:t,algorithm:r}){for(;;){for(let i=0;i<10;i++)await _f(1e3),e(`Re-checking MSA status in... ${10-i}`);let n=await je(`${ct}/${r}/status/${t}`);if(n==="FINISHED")break;if(n.includes("FAILURE"))throw new Error(`Failed to run: jobId ${t}`)}}async function m2({algorithm:e,sequence:t,onProgress:r}){switch(r(`Launching ${e} MSA...`),e){case"clustalo":return hZ({sequence:t,onProgress:r});case"muscle":return mZ({sequence:t,onProgress:r});case"kalign":return vZ({sequence:t,onProgress:r});case"mafft":return _Z({sequence:t,onProgress:r});default:throw new Error("unknown algorithm")}}Dm();function _2(e){return`${e.accession}-${e.sciname.replaceAll(" ","_")}`}function b2(e){return e.replace("-","")}async function g2({self:e}){let{blastDatabase:t,blastProgram:r,msaAlgorithm:n,proteinSequence:i}=e.blastParams,o=i.replaceAll("*","").replaceAll("&",""),{hits:a}=await v2({query:o,blastDatabase:t,blastProgram:r,onProgress:l=>{e.setProgress(l)},onRid:l=>{e.setRid(l)}}),u=[`>QUERY
${o}`,...a.map(l=>[_2(l.description[0]??{accession:"unknown",id:"unknown",sciname:"unknown"}),b2(l.hsps[0]?.hseq??"")]).map(([l,f])=>`>${l}
${f}`)].join(`
`);return await m2({algorithm:n,sequence:u,onProgress:l=>{e.setProgress(l)}})}var w2=x(Me());function y2(e){return!!e&&typeof e=="object"&&"hoverFeature"in e&&"hoverPosition"in e}function S2({model:e}){let{hovered:t}=(0,w2.getSession)(e),{transcriptToMsaMap:r,connectedView:n}=e;if(n?.initialized&&r&&y2(t)){let{coord:i}=t.hoverPosition,{g2p:o}=r,a=o[i];if(a!==void 0)return e.seqCoordToRowSpecificGlobalCoord("QUERY",a+1)}}function gf({model:e,coord:t}){let{transcriptToMsaMap:r}=e;if(r===void 0)return;let n=t,i=e.seqCoordToRowSpecificGlobalCoord("QUERY",n)||0,o=e.seqCoordToRowSpecificGlobalCoord("QUERY",n+1)||0,{refName:a,p2g:u}=r,d=u[i],l=u[o];return d!==void 0&&l!==void 0?{refName:a,start:Math.min(d,l),end:Math.max(d,l)}:void 0}var O2=x(x2());function Nm(){return Se.types.compose(E2.BaseViewModel,Rm(),Se.types.model("MsaView",{connectedViewId:Se.types.maybe(Se.types.string),connectedFeature:Se.types.frozen(),connectedHighlights:Se.types.array(Se.types.model({refName:Se.types.string,start:Se.types.number,end:Se.types.number})),blastParams:Se.types.frozen(),zoomToBaseLevel:!1})).volatile(()=>({rid:void 0,progress:"",error:void 0})).views(e=>({ungappedCoordMap(t,r){let i=e.rows.find(o=>o[0]===t)?.[1];if(i&&r<i.length){let o=0,a=0;for(;a<r;a++,o++)for(;i[o]==="-";)o++;return o}}})).views(e=>({get transcriptToMsaMap(){return e.connectedFeature?(0,O2.genomeToTranscriptSeqMapping)(e.connectedFeature):void 0}})).views(e=>({get mouseCol2(){return S2({model:e})},get clickCol2(){}})).views(e=>({get processing(){return!!e.progress},get connectedView(){let{views:t}=(0,Sf.getSession)(e);return t.find(r=>r.id===e.connectedViewId)}})).actions(e=>({setZoomToBaseLevel(t){e.zoomToBaseLevel=t},setError(t){e.error=t},setProgress(t){e.progress=t},setRid(t){e.rid=t},setConnectedHighlights(t){e.connectedHighlights=(0,Se.cast)(t)},addToConnectedHighlights(t){e.connectedHighlights.push(t)},clearConnectedHighlights(){e.connectedHighlights=(0,Se.cast)([])},setBlastParams(t){e.blastParams=t}})).views(e=>({extraViewMenuItems(){return[{label:"Zoom to base level on click?",checked:e.zoomToBaseLevel,type:"checkbox",onClick:()=>{e.setZoomToBaseLevel(!e.zoomToBaseLevel)}}]},get processing(){return!!e.progress},get connectedView(){let{views:t}=(0,Sf.getSession)(e);return t.find(r=>r.id===e.connectedViewId)}})).actions(e=>({afterCreate(){(0,Se.addDisposer)(e,(0,wf.autorun)(async()=>{if(e.blastParams)try{e.setProgress("Submitting query");let t=await g2({self:e});e.setData(t),e.setBlastParams(void 0),e.setProgress("")}catch(t){e.setError(t),console.error(t)}finally{e.setProgress("")}})),(0,Se.addDisposer)(e,(0,wf.autorun)(()=>{let{mouseCol:t,mouseClickCol:r}=e,n=t===void 0?void 0:gf({model:e,coord:t}),i=r===void 0?void 0:gf({model:e,coord:r});e.setConnectedHighlights([n,i].filter(o=>!!o))})),(0,Se.addDisposer)(e,(0,wf.autorun)(()=>{let{connectedView:t,zoomToBaseLevel:r,mouseClickCol:n}=e,{assemblyManager:i}=(0,Sf.getSession)(e),o=n===void 0?void 0:gf({model:e,coord:n});if(!(!o||!t))if(r)t.navTo(o);else{let a=i.get(t.assemblyNames[0])?.getCanonicalRefName(o.refName)??o.refName;t.centerAt(o.start,a)}}))}}))}var AZ=(0,L2.lazy)(()=>Promise.resolve().then(()=>(F2(),R2)));function Vm(e){e.addViewType(()=>new D2.default({name:"MsaView",stateModel:Nm(),ReactComponent:AZ}))}var kf=x(Me()),lP=x(N2());var St=x(R()),sP=x(Ae()),Nn=x(B());var Wm=x(R()),B2=x(B());function qf(e){let{children:t,value:r,index:n,...i}=e;return Wm.default.createElement("div",{role:"tabpanel",hidden:r!==n,id:`gtabpanel-${n}`,"aria-labelledby":`gtab-${n}`,...i},r===n&&Wm.default.createElement(B2.Box,{sx:{p:3}},t))}var Ie=x(R()),J2=x(D()),jt=x(B()),Q2=x(It()),eP=x(Me()),tP=x(Ae());function Ea(e){let t=e.get("subfeatures")??[];return t.some(r=>r.get("type")==="CDS")?[e]:t.filter(r=>r.get("subfeatures")?.some(n=>n.get("type")==="CDS"))}function ft(e){return e?.get("name")||e?.get("id")||""}function Dn(e){return e===void 0?"":[e.get("name"),e.get("id")].filter(t=>!!t).join(" ")}function Oa(e){return e===void 0?"":[e.get("gene_name")||e.get("name"),e.get("id")].filter(t=>!!t).join(" ")}var $i=x(Me());function kZ(e,t){return e.map(r=>t.slice(r.start,r.end)).join("")}function CZ({cds:e,sequence:t,codonTable:r}){let n=kZ(e,t),i="";for(let o=0;o<n.length;o+=3)i+=r[n.slice(o,o+3)]??"&";return i}function jZ(e,t){return e.map(r=>({...r,start:t-r.end,end:t-r.start})).sort((r,n)=>r.start-n.start)}function z2(e){return`${e.start}-${e.end}`}function IZ(e){return e.filter((t,r,n)=>!r||z2(t)!==z2(n[r-1]))}function H2({selectedTranscript:e,seq:t}){let r=e.toJSON(),n=IZ(r.subfeatures.sort((i,o)=>i.start-o.start).map(i=>({...i,start:i.start-r.start,end:i.end-r.start})).filter(i=>i.type==="CDS"));return CZ({cds:r.strand===-1?jZ(n,t.length):n,sequence:r.strand===-1?(0,$i.revcom)(t):t,codonTable:(0,$i.generateCodonTable)($i.defaultCodonTable)})}var Ma=x(R()),G2=x(Me()),$2=x(W2()),U2=5e5;async function Um({start:e,end:t,refName:r,session:n,assemblyName:i}){let{assemblyManager:o,rpcManager:a}=n,u=await o.waitForAssembly(i);if(!u)throw new Error("assembly not found");let d="getSequence";return(await a.call(d,"CoreGetFeatures",{adapterConfig:(0,$2.getConf)(u,["sequence","adapter"]),sessionId:d,regions:[{start:e,end:t,refName:u.getCanonicalRefName(r),assemblyName:i}]}))[0]?.get("seq")??""}function Y2({view:e,feature:t,upDownBp:r=0,forceLoad:n=!0}){let[i,o]=(0,Ma.useState)(),[a,u]=(0,Ma.useState)(),d=e?.assemblyNames?.[0];return(0,Ma.useEffect)(()=>{e&&(async()=>{try{u(void 0),o(void 0);let l=(0,G2.getSession)(e),{start:f,end:s,refName:c}=t.toJSON();if(!d)throw new Error("No assembly found");if(!n&&s-f>U2)o({error:`Genomic sequence larger than ${U2}bp, use "force load" button to display`});else{let p=f-r,m=s+r;o({seq:await Um({start:f,end:s,refName:c,assemblyName:d,session:l}),upstream:await Um({start:Math.max(0,p),end:f,refName:c,assemblyName:d,session:l}),downstream:await Um({start:s,end:m,refName:c,assemblyName:d,session:l})})}}catch(l){console.error(l),u(l)}})()},[t,e,r,d,n]),{sequence:i,error:a}}var Gm=x(R()),X2=x(B());function RZ({children:e,...t}){return Gm.default.createElement("div",null,Gm.default.createElement(X2.TextField,{...t},e))}var Aa=RZ;var Z2=x(Me());function K2({newViewTitle:e,view:t,feature:r}){return(0,Z2.getSession)(t).addView("MsaView",{type:"MsaView",displayName:e,connectedViewId:t.id,connectedFeature:r.toJSON(),treeAreaWidth:250,treeWidth:100,drawNodeBubbles:!0,labelsAlignRight:!0,colWidth:10,rowHeight:12,colorSchemeName:"percent_identity_dynamic"})}var FZ=(0,Q2.makeStyles)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"}}),LZ=(0,J2.observer)(function({handleClose:t,feature:r,model:n}){let{classes:i}=FZ(),o=(0,eP.getContainingView)(n),[a,u]=(0,Ie.useState)("nr"),[d,l]=(0,Ie.useState)("clustalo"),f=Ea(r),[s,c]=(0,Ie.useState)(ft(f[0])),p=f.find(S=>ft(S)===s),{sequence:m,error:v}=Y2({view:o,feature:p}),h=m&&!("error"in m)?H2({seq:m.seq,selectedTranscript:p}):"",_=["nr","nr_cluster_seq"],y=["clustalo","muscle","kalign","mafft"];return Ie.default.createElement(jt.DialogContent,{className:i.dialogContent},v?Ie.default.createElement(tP.ErrorMessage,{error:v}):null,Ie.default.createElement(Aa,{value:a,onChange:S=>{u(S.target.value)},label:"BLAST blastDatabase",select:!0},_.map(S=>Ie.default.createElement(jt.MenuItem,{value:S,key:S},S))),Ie.default.createElement(Aa,{value:d,onChange:S=>{l(S.target.value)},label:"MSA Algorithm",select:!0},y.map(S=>Ie.default.createElement(jt.MenuItem,{value:S,key:S},S))),Ie.default.createElement(Aa,{value:s,onChange:S=>{c(S.target.value)},label:"Choose isoform to BLAST",select:!0},f.map(S=>Ie.default.createElement(jt.MenuItem,{value:ft(S),key:S.id()},Oa(r)," - ",Dn(S)))),Ie.default.createElement(Aa,{variant:"outlined",multiline:!0,minRows:5,maxRows:10,fullWidth:!0,value:h?`>${Dn(p)}
${h}`:"Loading...",InputProps:{readOnly:!0,classes:{input:i.textAreaFont}}}),Ie.default.createElement(jt.DialogActions,null,Ie.default.createElement(jt.Button,{color:"primary",variant:"contained",onClick:()=>{K2({feature:p,view:o,newViewTitle:`NCBI BLAST - ${Oa(r)} - ${Dn(p)} - ${d}`}).setBlastParams({blastProgram:"blastp",blastDatabase:a,msaAlgorithm:d,selectedTranscript:p,proteinSequence:h}),t()},disabled:!h},"Submit"),Ie.default.createElement(jt.Button,{color:"secondary",variant:"contained",onClick:()=>{t()}},"Cancel")))}),$m=LZ;var ge=x(R()),iP=x(D()),oP=x(Ae()),tt=x(B()),Tf=x(Me()),aP=x(It());async function rP(){let e=await fetch("https://jbrowse.org/demos/msaview/knownCanonical/list.txt");if(!e.ok)throw new Error(`HTTP ${e.status} fetching list ${await e.text()}`);return(await e.text()).split(`
`).map(r=>r.trim()).filter(r=>!!r)}Om();async function DZ(e){let t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${await t.text()}`);let r=await t.arrayBuffer();return new TextDecoder().decode(pf(r))}async function nP({userSelection:e,session:t,newViewTitle:r,view:n,feature:i}){let o=await DZ(`https://jbrowse.org/demos/msaview/knownCanonical/${e}.mfa.gz`);t.addView("MsaView",{type:"MsaView",displayName:r,treeAreaWidth:200,treeWidth:100,drawNodeBubbles:!1,labelsAlignRight:!0,showBranchLen:!1,colWidth:10,rowHeight:12,colorSchemeName:"percent_identity_dynamic",treeFilehandle:{uri:"https://hgdownload.soe.ucsc.edu/goldenPath/hg38/multiz100way/hg38.100way.nh"},treeMetadataFilehandle:{uri:"https://s3.amazonaws.com/jbrowse.org/demos/app/species.json"},data:{msa:o},connectedViewId:n.id,connectedFeature:i.toJSON()})}var NZ=(0,aP.makeStyles)()({dialogContent:{width:"80em"}}),BZ=(0,iP.observer)(function({model:t,feature:r,handleClose:n}){let i=(0,Tf.getSession)(t),o=(0,Tf.getContainingView)(t),{classes:a}=NZ(),[u,d]=(0,ge.useState)(),[l,f]=(0,ge.useState)();(0,ge.useEffect)(()=>{(async()=>{try{let h=await rP();f(h);let _=new Set(h),S=Ea(r).find(E=>_.has(ft(E)));S&&v(ft(S))}catch(h){console.error(h),d(h)}})()},[r]);let s=new Set(l),c=Ea(r),p=c.find(h=>s.has(ft(h))),[m,v]=(0,ge.useState)(ft(c[0]));return ge.default.createElement(ge.default.Fragment,null,ge.default.createElement(tt.DialogContent,{className:a.dialogContent},ge.default.createElement(tt.Typography,null,"The source data for these multiple sequence alignments is from"," ",ge.default.createElement("a",{href:"https://hgdownload.soe.ucsc.edu/goldenPath/hg38/multiz100way/alignments/"},"knownCanonical.multiz100way.protAA.fa.gz")),u?ge.default.createElement(oP.ErrorMessage,{error:u}):null,l&&!p?ge.default.createElement("div",{style:{color:"red"}},"No MSA data for this gene found"):null,ge.default.createElement(tt.TextField,{value:m,onChange:h=>{v(h.target.value)},label:"Choose isoform to view MSA for",select:!0},c.filter(h=>s.has(ft(h))).map(h=>ge.default.createElement(tt.MenuItem,{value:ft(h),key:h.id()},Dn(h)," (has data)")),c.filter(h=>!s.has(ft(h))).map(h=>ge.default.createElement(tt.MenuItem,{value:ft(h),key:h.id(),disabled:!0},Dn(h))))),ge.default.createElement(tt.DialogActions,null,ge.default.createElement(tt.Button,{color:"primary",variant:"contained",onClick:()=>{(async()=>{try{if(!p)return;await nP({userSelection:m,session:i,newViewTitle:Oa(p),view:o,feature:p}),n()}catch(h){console.error(h),d(h)}})()}},"Submit"),ge.default.createElement(tt.Button,{color:"secondary",variant:"contained",onClick:()=>{n()}},"Cancel")))}),uP=BZ;function Ym(e){return{id:`gtab-${e}`,"aria-controls":`gtabpanel-${e}`}}function Xm({handleClose:e,feature:t,model:r}){let[n,i]=(0,St.useState)(0);return St.default.createElement(sP.Dialog,{maxWidth:"xl",title:"Launch MSA view",onClose:()=>{e()},open:!0},St.default.createElement(Nn.Box,{sx:{borderBottom:1,borderColor:"divider"}},St.default.createElement(Nn.Tabs,{value:n,onChange:(o,a)=>{i(a)}},St.default.createElement(Nn.Tab,{label:"NCBI BLAST query",...Ym(0)}),St.default.createElement(Nn.Tab,{label:"UCSC 100-way dataset",...Ym(1)}))),St.default.createElement(qf,{value:n,index:0},St.default.createElement($m,{handleClose:e,feature:t,model:r})),St.default.createElement(qf,{value:n,index:1},St.default.createElement(uP,{model:r,feature:t,handleClose:e})))}function zZ(e){return e.name==="LinearBasicDisplay"}function HZ(e){return e.views(t=>{let r=t.contextMenuItems;return{contextMenuItems(){let n=t.contextMenuFeature,i=(0,kf.getContainingTrack)(t);return[...r(),...n?[{label:"Launch MSA view",icon:lP.default,onClick:()=>{(0,kf.getSession)(i).queueDialog(o=>[Xm,{model:i,handleClose:o,feature:n}])}}]:[]]}}})}function Zm(e){e.addToExtensionPoint("Core-extendPluggableElement",t=>(zZ(t)&&(t.stateModel=HZ(t.stateModel)),t))}var _P=x(R());var Pa=x(R()),mP=x(D());var jf=x(R()),fP=x(D()),dP=x(Me());var cP=x(It()),Cf=(0,cP.makeStyles)()({highlight:{height:"100%",background:"rgba(255,255,0,0.2)",border:"1px solid rgba(50,50,0,0.2)",position:"absolute",zIndex:99,textAlign:"center",pointerEvents:"none",overflow:"hidden"}});function VZ(e,t){return e.getCanonicalRefName(t)??t}var WZ=(0,fP.observer)(function({model:t}){let{classes:r}=Cf(),{assemblyManager:n,views:i}=(0,dP.getSession)(t),o=i.find(u=>u.type==="MsaView"),a=n.get(t.assemblyNames[0]);return a?jf.default.createElement(jf.default.Fragment,null,o?.connectedHighlights.map((u,d)=>{let l=VZ(a,u.refName),f=t.bpToPx({refName:l,coord:u.start}),s=t.bpToPx({refName:l,coord:u.end});if(f&&s){let c=Math.max(Math.abs(s.offsetPx-f.offsetPx),4),p=Math.min(f.offsetPx,s.offsetPx)-t.offsetPx;return jf.default.createElement("div",{key:`${JSON.stringify(u)}-${d}`,className:r.highlight,style:{left:p,width:c}})}return null})):null}),pP=WZ;var Km=x(R()),Jm=x(D()),Qm=x(Me());var UZ=(0,Jm.observer)(function({model:t}){let{hovered:r}=(0,Qm.getSession)(t);return r&&typeof r=="object"&&"hoverPosition"in r?Km.default.createElement(GZ,{model:t}):null}),GZ=(0,Jm.observer)(function({model:t}){let{classes:r}=Cf(),n=(0,Qm.getSession)(t);if(n.views.some(i=>i.type==="MsaView")){let{hovered:i}=n,{offsetPx:o}=t,{coord:a,refName:u}=i.hoverPosition,d=t.bpToPx({refName:u,coord:a-1}),l=t.bpToPx({refName:u,coord:a});if(d&&l){let f=Math.max(Math.abs(l.offsetPx-d.offsetPx),4),s=Math.min(d.offsetPx,l.offsetPx)-o;return Km.default.createElement("div",{className:r.highlight,style:{left:s,width:f}})}}return null}),hP=UZ;var $Z=(0,mP.observer)(function({model:t}){return Pa.default.createElement(Pa.default.Fragment,null,Pa.default.createElement(pP,{model:t}),Pa.default.createElement(hP,{model:t}))}),vP=$Z;function ev(e){e.addToExtensionPoint("LinearGenomeView-TracksContainerComponent",(t=[],{model:r})=>[...t,_P.default.createElement(vP,{key:"highlight_protein_viewer_msaview",model:r})])}var If=class extends bP.default{constructor(){super(...arguments);this.name="MsaViewPlugin";this.version=lv}install(r){Vm(r),Zm(r),ev(r)}configure(r){(0,gP.isAbstractMenuManager)(r.rootModel)&&r.rootModel.appendToSubMenu(["Add"],{label:"Multiple sequence alignment view",icon:yP.default,onClick:n=>{n.addView("MsaView",{})}})}};return MP(YZ);})();
/*! Bundled license information:

canvas2svg/canvas2svg.js:
  (*!!
   *  Canvas 2 Svg v1.0.15
   *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
   *
   *  Licensed under the MIT license:
   *  http://www.opensource.org/licenses/mit-license.php
   *
   *  Author:
   *  Kerry Liu
   *
   *  Copyright (c) 2014 Gliffy Inc.
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)

svgcanvas/dist/svgcanvas.js:
  (*!!
   *  SVGCanvas v2.0.3
   *  Draw on SVG using Canvas's 2D Context API.
   *
   *  Licensed under the MIT license:
   *  http://www.opensource.org/licenses/mit-license.php
   *
   *  Author:
   *  Kerry Liu
   *  Zeno Zeng
   *
   *  Copyright (c) 2014 Gliffy Inc.
   *  Copyright (c) 2021 Zeno Zeng
   *)
*/
//# sourceMappingURL=jbrowse-plugin-msaview.umd.production.min.js.map